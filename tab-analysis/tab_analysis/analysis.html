<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 13.1.1"/>
    <title>tab-analysis.tab_analysis.analysis API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../tab_analysis.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;tab-analysis.tab_analysis</a>

            <img src="https://loco-philippe.github.io/ES/logo_loco.png" class="logo" alt="project logo"/>

            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#AnaField">AnaField</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AnaField.__init__">AnaField</a>
                        </li>
                        <li>
                                <a class="function" href="#AnaField.to_dict">to_dict</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaField.iscomplete">iscomplete</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaField.ratecodec">ratecodec</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaField.dmincodec">dmincodec</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaField.dmaxcodec">dmaxcodec</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaField.rancodec">rancodec</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaField.typecodec">typecodec</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AnaRelation">AnaRelation</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AnaRelation.__init__">AnaRelation</a>
                        </li>
                        <li>
                                <a class="function" href="#AnaRelation.to_dict">to_dict</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaRelation.id_relation">id_relation</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaRelation.parent_child">parent_child</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaRelation.index_relation">index_relation</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaRelation.dmax">dmax</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaRelation.dmin">dmin</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaRelation.diff">diff</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaRelation.dran">dran</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaRelation.distomin">distomin</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaRelation.distomax">distomax</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaRelation.distance">distance</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaRelation.ratecpl">ratecpl</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaRelation.rateder">rateder</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaRelation.typecoupl">typecoupl</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AnaDfield">AnaDfield</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AnaDfield.__init__">AnaDfield</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDfield.index">index</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDfield.fields">fields</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDfield.list_relations">list_relations</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDfield.list_p_derived">list_p_derived</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDfield.list_c_derived">list_c_derived</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDfield.list_coupled">list_coupled</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDfield.dist_root">dist_root</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDfield.category">category</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDfield.p_derived">p_derived</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDfield.p_distance">p_distance</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDfield.p_distomin">p_distomin</a>
                        </li>
                        <li>
                                <a class="function" href="#AnaDfield.to_dict">to_dict</a>
                        </li>
                        <li>
                                <a class="function" href="#AnaDfield.view">view</a>
                        </li>
                        <li>
                                <a class="function" href="#AnaDfield.ascendants">ascendants</a>
                        </li>
                        <li>
                                <a class="function" href="#AnaDfield.dic_inner_node">dic_inner_node</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AnaDataset">AnaDataset</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AnaDataset.__init__">AnaDataset</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDataset.category">category</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDataset.ana_relations">ana_relations</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDataset.p_relations">p_relations</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDataset.root">root</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDataset.primary">primary</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDataset.complete">complete</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDataset.dimension">dimension</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDataset.secondary">secondary</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDataset.unique">unique</a>
                        </li>
                        <li>
                                <a class="variable" href="#AnaDataset.variable">variable</a>
                        </li>
                        <li>
                                <a class="function" href="#AnaDataset.set_relations">set_relations</a>
                        </li>
                        <li>
                                <a class="function" href="#AnaDataset.get_relation">get_relation</a>
                        </li>
                        <li>
                                <a class="function" href="#AnaDataset.dfield">dfield</a>
                        </li>
                        <li>
                                <a class="function" href="#AnaDataset.tree">tree</a>
                        </li>
                        <li>
                                <a class="function" href="#AnaDataset.to_dict">to_dict</a>
                        </li>
                        <li>
                                <a class="function" href="#AnaDataset.partitions">partitions</a>
                        </li>
                        <li>
                                <a class="function" href="#AnaDataset.field_partition">field_partition</a>
                        </li>
                        <li>
                                <a class="function" href="#AnaDataset.indicator">indicator</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Util">Util</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Util.view">view</a>
                        </li>
                        <li>
                                <a class="function" href="#Util.reduce_dic">reduce_dic</a>
                        </li>
                        <li>
                                <a class="function" href="#Util.clean_dic">clean_dic</a>
                        </li>
                        <li>
                                <a class="function" href="#Util.filter_dic">filter_dic</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AnaError">AnaError</a>
                            <ul class="memberlist">
                </ul>

            </li>
    </ul>


            <footer>tab_analysis V0.1.0</footer>

        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
tab-analysis<wbr>.<a href="./../tab_analysis.html">tab_analysis</a><wbr>.analysis    </h1>

                        <div class="docstring"><p>This module analyses structure and relationships included in a tabular object
(Pandas DataFrame, Dataset, list of list) :</p>

<ul>
<li>Structure of a single field (class <code><a href="#AnaField">AnaField</a></code>),</li>
<li>Relationship between two fields (class <code><a href="#AnaRelation">AnaRelation</a></code>)</li>
<li>Structure and relationships of fields inside a dataset (class <code><a href="#AnaDfield">AnaDfield</a></code>)</li>
<li>Structure of a dataset (class <code><a href="#AnaDataset">AnaDataset</a></code>)</li>
</ul>

<p>It contains two another classes <code><a href="#Util">Util</a></code>, <code><a href="#AnaError">AnaError</a></code>.</p>
</div>

                        <input id="mod-analysis-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-analysis-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="c1"># -*- coding: utf-8 -*-</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="sd">This module analyses structure and relationships included in a tabular object</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="sd">(Pandas DataFrame, Dataset, list of list) :</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="sd">- Structure of a single field (class `AnaField`),</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="sd">- Relationship between two fields (class `AnaRelation`)</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="sd">- Structure and relationships of fields inside a dataset (class `AnaDfield`)</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="sd">- Structure of a dataset (class `AnaDataset`)</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a><span class="sd">It contains two another classes `Util`, `AnaError`.</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="kn">import</span> <span class="nn">json</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a><span class="kn">import</span> <span class="nn">pprint</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">combinations</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">mul</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a><span class="n">NULL</span> <span class="o">=</span> <span class="s1">&#39;null&#39;</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="n">UNIQUE</span> <span class="o">=</span> <span class="s1">&#39;unique&#39;</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a><span class="n">COMPLETE</span> <span class="o">=</span> <span class="s1">&#39;complete&#39;</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a><span class="n">FULL</span> <span class="o">=</span> <span class="s1">&#39;full&#39;</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a><span class="n">DEFAULT</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a><span class="n">MIXED</span> <span class="o">=</span> <span class="s1">&#39;mixed&#39;</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a><span class="n">COUPLED</span> <span class="o">=</span> <span class="s1">&#39;coupled&#39;</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a><span class="n">DERIVED</span> <span class="o">=</span> <span class="s1">&#39;derived&#39;</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a><span class="n">LINKED</span> <span class="o">=</span> <span class="s1">&#39;linked&#39;</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a><span class="n">CROSSED</span> <span class="o">=</span> <span class="s1">&#39;crossed&#39;</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a><span class="n">DISTRIBUTED</span> <span class="o">=</span> <span class="s1">&#39;distributed&#39;</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a><span class="n">ROOTED</span> <span class="o">=</span> <span class="s1">&#39;rooted&#39;</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a><span class="n">ROOT</span> <span class="o">=</span> <span class="s1">&#39;root&#39;</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a><span class="n">IDFIELD</span> <span class="o">=</span> <span class="s1">&#39;id&#39;</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a><span class="n">MINCODEC</span> <span class="o">=</span> <span class="s1">&#39;mincodec&#39;</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a><span class="n">MAXCODEC</span> <span class="o">=</span> <span class="s1">&#39;maxcodec&#39;</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a><span class="n">LENCODEC</span> <span class="o">=</span> <span class="s1">&#39;lencodec&#39;</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a><span class="n">RATECODEC</span> <span class="o">=</span> <span class="s1">&#39;ratecodec&#39;</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a><span class="n">DMINCODEC</span> <span class="o">=</span> <span class="s1">&#39;dmincodec&#39;</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a><span class="n">DMAXCODEC</span> <span class="o">=</span> <span class="s1">&#39;dmaxcodec&#39;</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a><span class="n">RANCODEC</span> <span class="o">=</span> <span class="s1">&#39;rancodec&#39;</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a><span class="n">TYPECODEC</span> <span class="o">=</span> <span class="s1">&#39;typecodec&#39;</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a><span class="n">HASHF</span> <span class="o">=</span> <span class="s1">&#39;hashf&#39;</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a><span class="n">RELATION</span> <span class="o">=</span> <span class="s1">&#39;relation&#39;</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a><span class="n">HASHR</span> <span class="o">=</span> <span class="s1">&#39;hashr&#39;</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a><span class="n">DIST</span> <span class="o">=</span> <span class="s1">&#39;dist&#39;</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a><span class="n">DMAX</span> <span class="o">=</span> <span class="s1">&#39;dmax&#39;</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a><span class="n">DMIN</span> <span class="o">=</span> <span class="s1">&#39;dmin&#39;</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a><span class="n">DIFF</span> <span class="o">=</span> <span class="s1">&#39;diff&#39;</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a><span class="n">DRAN</span> <span class="o">=</span> <span class="s1">&#39;dran&#39;</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a><span class="n">NUM</span> <span class="o">=</span> <span class="s1">&#39;num&#39;</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a><span class="n">CATEGORY</span> <span class="o">=</span> <span class="s1">&#39;category&#39;</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a><span class="n">PDERIVED</span> <span class="o">=</span> <span class="s1">&#39;pderived&#39;</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a><span class="n">PDISTANCE</span> <span class="o">=</span> <span class="s1">&#39;pdistance&#39;</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a><span class="n">PDISTOMIN</span> <span class="o">=</span> <span class="s1">&#39;pdistomin&#39;</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a><span class="n">DISDISTANCE</span> <span class="o">=</span> <span class="s1">&#39;disdistance&#39;</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a><span class="n">DERDISTANCE</span> <span class="o">=</span> <span class="s1">&#39;derdistance&#39;</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a><span class="n">DISRATECPL</span> <span class="o">=</span> <span class="s1">&#39;disratecpl&#39;</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a><span class="n">DERRATECPL</span> <span class="o">=</span> <span class="s1">&#39;derratecpl&#39;</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a><span class="n">DISRATEDER</span> <span class="o">=</span> <span class="s1">&#39;disrateder&#39;</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a><span class="n">DERRATEDER</span> <span class="o">=</span> <span class="s1">&#39;derrateder&#39;</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a><span class="n">TYPECOUPL</span> <span class="o">=</span> <span class="s1">&#39;typecoupl&#39;</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a><span class="n">PARENTCHILD</span> <span class="o">=</span> <span class="s1">&#39;parentchild&#39;</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a><span class="n">DISTANCE</span> <span class="o">=</span> <span class="s1">&#39;distance&#39;</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a><span class="n">DISTOMIN</span> <span class="o">=</span> <span class="s1">&#39;distomin&#39;</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a><span class="n">DISTOMAX</span> <span class="o">=</span> <span class="s1">&#39;distomax&#39;</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a><span class="n">DISTROOT</span> <span class="o">=</span> <span class="s1">&#39;distroot&#39;</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a><span class="n">RATECPL</span> <span class="o">=</span> <span class="s1">&#39;ratecpl&#39;</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a><span class="n">RATEDER</span> <span class="o">=</span> <span class="s1">&#39;rateder&#39;</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a><span class="n">IDDATASET</span> <span class="o">=</span> <span class="s1">&#39;name&#39;</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a><span class="n">RELATIONS</span> <span class="o">=</span> <span class="s1">&#39;relations&#39;</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a><span class="n">FIELDS</span> <span class="o">=</span> <span class="s1">&#39;fields&#39;</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a><span class="n">LENGTH</span> <span class="o">=</span> <span class="s1">&#39;length&#39;</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a><span class="n">HASHD</span> <span class="o">=</span> <span class="s1">&#39;hashd&#39;</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a><span class="k">class</span> <span class="nc">AnaField</span><span class="p">:</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;This class analyses field entities.</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a><span class="sd">    *Attributes*</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a><span class="sd">    - **idfield** : string - name or Id of the field</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a><span class="sd">    - **lencodec**: integer - codec length</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a><span class="sd">    - **mincodec**: integer - minimal codec length</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a><span class="sd">    - **maxcodec**: integer - minimal codec length</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a><span class="sd">    - **hashf**: integer - hash value to identify modifications</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a><span class="sd">    *characteristic (@property)*</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a><span class="sd">    - `iscomplete`</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a><span class="sd">    - `ratecodec`</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a><span class="sd">    - `dmincodec`</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a><span class="sd">    - `dmaxcodec`</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a><span class="sd">    - `rancodec`</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a><span class="sd">    - `typecodec`</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a><span class="sd">    *instance methods*</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a><span class="sd">    - `to_dict`</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idfield</span><span class="p">,</span> <span class="n">lencodec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mincodec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxcodec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hashf</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Creation mode :</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a><span class="sd">        - single dict attribute where keys are attributes name,</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a><span class="sd">        - single AnaField attribute to make a copy</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a><span class="sd">        - multiple attributes</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a><span class="sd">        *Parameters (multiple attributes)*</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a><span class="sd">        - **idfield** : string or integer - Id of the Field</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a><span class="sd">        - **lencodec** : integer (default None) - length of the codec</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a><span class="sd">        - **mincodec** : integer (default None) - number of different values</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a><span class="sd">        - **maxcodec** : integer (default None) - length of the field</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a><span class="sd">        - **hashf** : string (default None) - update identifier</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idfield</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">IDFIELD</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">LENCODEC</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">MINCODEC</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">MAXCODEC</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hashf</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">HASHF</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a>            <span class="k">return</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idfield</span><span class="p">,</span> <span class="p">(</span><span class="n">AnaField</span><span class="p">,</span> <span class="n">AnaDfield</span><span class="p">)):</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">idfield</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">lencodec</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">mincodec</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">maxcodec</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hashf</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">hashf</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a>            <span class="k">return</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">lencodec</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lencodec</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a>            <span class="k">raise</span> <span class="n">AnaError</span><span class="p">(</span><span class="s2">&quot;lencodec is not correct&quot;</span><span class="p">)</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span> <span class="o">=</span> <span class="n">idfield</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">=</span> <span class="n">lencodec</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="o">=</span> <span class="n">mincodec</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">=</span> <span class="n">maxcodec</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hashf</span> <span class="o">=</span> <span class="n">hashf</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;length of the field (maxcodec)&#39;&#39;&#39;</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;representation of the field (class name + idfield)&#39;&#39;&#39;</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; equal if class and attributes are equal&#39;&#39;&#39;</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">and</span> \
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">idfield</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">lencodec</span> <span class="ow">and</span> \
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">mincodec</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">maxcodec</span> <span class="ow">and</span> \
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hashf</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">hashf</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a>    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; return a comparison between hash value&#39;&#39;&#39;</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">hash</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return hash value (sum of attributes hash)&#39;&#39;&#39;</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idfield</span><span class="p">)</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span><span class="p">)</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span><span class="p">)</span> \
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a>            <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span><span class="p">)</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hashf</span><span class="p">)</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;json-text build with the attributes dict&#39;&#39;&#39;</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">idfield</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; Copy all the attributes &#39;&#39;&#39;</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">idfield</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">notnone</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict with field attributes.</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a><span class="sd">        - **full** : boolean (default False) - if True, all the attributes are included</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a><span class="sd">        - **idfield** : boolean (default False) - if True, idfield is included</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a><span class="sd">        - **notnone** : boolean (default True) - if True, None values are not included</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a>        <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">LENCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span><span class="p">,</span> <span class="n">MINCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span><span class="p">,</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a>               <span class="n">MAXCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span><span class="p">}</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a>        <span class="k">if</span> <span class="n">idfield</span> <span class="ow">or</span> <span class="n">full</span><span class="p">:</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a>            <span class="n">dic</span><span class="p">[</span><span class="n">IDFIELD</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>        <span class="k">if</span> <span class="n">full</span><span class="p">:</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a>            <span class="n">dic</span> <span class="o">|=</span> <span class="p">{</span><span class="n">RATECODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratecodec</span><span class="p">,</span> <span class="n">DMINCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmincodec</span><span class="p">,</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a>                    <span class="n">DMAXCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmaxcodec</span><span class="p">,</span> <span class="n">RANCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rancodec</span><span class="p">,</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a>                    <span class="n">TYPECODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">typecodec</span><span class="p">}</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a>        <span class="k">if</span> <span class="n">notnone</span><span class="p">:</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>            <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">reduce_dic</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a>        <span class="k">return</span> <span class="n">dic</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a>    <span class="nd">@property</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a>    <span class="k">def</span> <span class="nf">iscomplete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return boolean indicator : True if all attributes are present&#39;&#39;&#39;</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a>        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a>    <span class="nd">@property</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a>    <span class="k">def</span> <span class="nf">ratecodec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return float ratecodec indicator&#39;&#39;&#39;</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iscomplete</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span><span class="p">:</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a>            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span><span class="p">)</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a>    <span class="nd">@property</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a>    <span class="k">def</span> <span class="nf">dmincodec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer dmincodec indicator&#39;&#39;&#39;</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iscomplete</span> <span class="k">else</span> <span class="kc">None</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a>    <span class="nd">@property</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a>    <span class="k">def</span> <span class="nf">dmaxcodec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer dmaxcodec indicator&#39;&#39;&#39;</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iscomplete</span> <span class="k">else</span> <span class="kc">None</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>    <span class="nd">@property</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a>    <span class="k">def</span> <span class="nf">rancodec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer rancodec indicator&#39;&#39;&#39;</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iscomplete</span> <span class="k">else</span> <span class="kc">None</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>    <span class="nd">@property</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a>    <span class="k">def</span> <span class="nf">typecodec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return string typecodec indicator</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a><span class="sd">        (null, unique, complete, full, default, mixed)</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>            <span class="k">return</span> <span class="n">NULL</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a>            <span class="k">return</span> <span class="n">UNIQUE</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span><span class="p">:</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a>            <span class="k">return</span> <span class="n">COMPLETE</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span><span class="p">:</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a>            <span class="k">return</span> <span class="n">FULL</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span><span class="p">:</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a>            <span class="k">return</span> <span class="n">DEFAULT</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>        <span class="k">return</span> <span class="n">MIXED</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a><span class="k">class</span> <span class="nc">AnaRelation</span><span class="p">:</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;This class analyses relationship between two fields</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a><span class="sd">    *Attributes* :</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a><span class="sd">    - **relation** : List of the two fields involved in the relationship</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a><span class="sd">    - **dist** : value of the relationship</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a><span class="sd">    - **distrib** : boolean True if values are distributed</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a><span class="sd">    - **hashr**: integer - hash value to identify update</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a><span class="sd">    *global (@property)*</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a><span class="sd">    - `id_relation`</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a><span class="sd">    - `index_relation`</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a><span class="sd">    - `parent_child`</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a><span class="sd">    - `typecoupl`</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a><span class="sd">    *characteristic (@property)*</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a><span class="sd">    - `dmax`</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a><span class="sd">    - `dmin`</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a><span class="sd">    - `diff`</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a><span class="sd">    - `dran`</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a><span class="sd">    - `distomin`</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a><span class="sd">    - `distomax`</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a><span class="sd">    - `distance`</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a><span class="sd">    - `ratecpl`</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a><span class="sd">    - `rateder`</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a><span class="sd">    *instance methods*</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a><span class="sd">    - `to_dict`</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relation</span><span class="p">,</span> <span class="n">dists</span><span class="p">,</span> <span class="n">hashr</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Constructor of the relationship :</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a><span class="sd">        - **relation** : List of the two fields involved in the relationship</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a><span class="sd">        - **dists** : dist value or list of dist value and distrib boolean</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a><span class="sd">        - **distrib** : boolean True if values are distributed</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a><span class="sd">        - **hashr**: integer - hash value to identify update</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dists</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="o">=</span> <span class="n">dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">distrib</span> <span class="o">=</span> <span class="n">dists</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="o">=</span> <span class="n">dists</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">distrib</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hashr</span> <span class="o">=</span> <span class="n">hashr</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;representation of the field (class name + idfield)&#39;&#39;&#39;</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id_relation</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;json-text build with the attributes dict&#39;&#39;&#39;</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">relation</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; equal if class and values are equal&#39;&#39;&#39;</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">and</span> \
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">relation</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">dist</span> <span class="ow">and</span> \
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hashr</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">hashr</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">distrib</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">distrib</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return hash value (sum of attributes hash)&#39;&#39;&#39;</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> \
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a>            <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="p">)</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hashr</span><span class="p">)</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">distrib</span><span class="p">)</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distances</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">relation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a>                <span class="n">notnone</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">misc</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict with AnaRelation attributes.</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a><span class="sd">        - **distances** : boolean (default False) - if True, distances indicators are included</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a><span class="sd">        - **full** : boolean (default False) - if True, all the attributes are included</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a><span class="sd">        - **relation** : boolean (default False) - if True, idfield are included</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a><span class="sd">        - **notnone** : boolean (default True) - if True, None values are not included</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a>        <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">DIST</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="p">,</span> <span class="n">TYPECOUPL</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">typecoupl</span><span class="p">,</span> <span class="n">HASHR</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashr</span><span class="p">}</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a>        <span class="k">if</span> <span class="n">relation</span> <span class="ow">or</span> <span class="n">full</span><span class="p">:</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a>            <span class="n">dic</span><span class="p">[</span><span class="n">RELATION</span><span class="p">]</span> <span class="o">=</span> <span class="n">Util</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a>            <span class="c1">#dic[TYPECOUPL] = self.typecoupl</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a>            <span class="n">dic</span><span class="p">[</span><span class="n">PARENTCHILD</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_child</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a>        <span class="k">if</span> <span class="n">distances</span> <span class="ow">or</span> <span class="n">full</span><span class="p">:</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a>            <span class="n">dic</span> <span class="o">|=</span> <span class="p">{</span><span class="n">DISTANCE</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance</span><span class="p">,</span> <span class="n">DISTOMIN</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomin</span><span class="p">,</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a>                    <span class="n">DISTOMAX</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomax</span><span class="p">,</span> <span class="n">DISTRIBUTED</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">distrib</span><span class="p">,</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>                    <span class="n">RATECPL</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratecpl</span><span class="p">,</span> <span class="n">RATEDER</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rateder</span><span class="p">}</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a>        <span class="k">if</span> <span class="n">misc</span> <span class="ow">or</span> <span class="n">full</span><span class="p">:</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a>            <span class="n">dic</span> <span class="o">|=</span> <span class="p">{</span><span class="n">DMAX</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmax</span><span class="p">,</span> <span class="n">DMIN</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmin</span><span class="p">,</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a>                    <span class="n">DIFF</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">diff</span><span class="p">,</span> <span class="n">DRAN</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dran</span><span class="p">}</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a>        <span class="k">if</span> <span class="n">notnone</span><span class="p">:</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a>            <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">reduce_dic</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a>        <span class="k">return</span> <span class="n">dic</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a>    <span class="nd">@property</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a>    <span class="k">def</span> <span class="nf">id_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a list with the id of the two fields involved&#39;&#39;&#39;</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">:</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">fld</span><span class="o">.</span><span class="n">idfield</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">]</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a>    <span class="nd">@property</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>    <span class="k">def</span> <span class="nf">parent_child</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;returns the direction of the relationship (True if parent is first)&#39;&#39;&#39;</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a>        <span class="n">rel0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a>        <span class="n">rel1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a>        <span class="c1"># if isinstance(rel0, AnaDfield) and isinstance(rel1, AnaDfield):</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">rel0</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">&gt;</span> <span class="n">rel1</span><span class="o">.</span><span class="n">lencodec</span> <span class="ow">or</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a>                <span class="p">(</span><span class="n">rel0</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">==</span> <span class="n">rel1</span><span class="o">.</span><span class="n">lencodec</span> <span class="ow">and</span> <span class="n">rel0</span><span class="o">.</span><span class="n">index</span> <span class="o">&lt;</span> <span class="n">rel1</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a>        <span class="c1"># return None</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>    <span class="nd">@property</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>    <span class="k">def</span> <span class="nf">index_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a list with the index of the two fields involved&#39;&#39;&#39;</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">:</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">fld</span><span class="o">.</span><span class="n">index</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">]</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>    <span class="nd">@property</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a>    <span class="k">def</span> <span class="nf">dmax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer dmax indicator&#39;&#39;&#39;</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lencodec</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a>    <span class="nd">@property</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a>    <span class="k">def</span> <span class="nf">dmin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer dmin indicator&#39;&#39;&#39;</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a>        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lencodec</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lencodec</span><span class="p">)</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a>    <span class="nd">@property</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a>    <span class="k">def</span> <span class="nf">diff</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer diff indicator&#39;&#39;&#39;</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lencodec</span><span class="p">)</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a>    <span class="nd">@property</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a>    <span class="k">def</span> <span class="nf">dran</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer dran indicator&#39;&#39;&#39;</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmax</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmin</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a>    <span class="nd">@property</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a>    <span class="k">def</span> <span class="nf">distomin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer distomin indicator&#39;&#39;&#39;</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmin</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a>    <span class="nd">@property</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a>    <span class="k">def</span> <span class="nf">distomax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer distomax indicator&#39;&#39;&#39;</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmax</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a>    <span class="nd">@property</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a>    <span class="k">def</span> <span class="nf">distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer distance indicator&#39;&#39;&#39;</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomin</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">diff</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a>    <span class="nd">@property</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a>    <span class="k">def</span> <span class="nf">ratecpl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return float ratecpl indicator&#39;&#39;&#39;</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a>        <span class="n">disdis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomax</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a>        <span class="k">return</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">disdis</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance</span> <span class="o">/</span> <span class="n">disdis</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a>    <span class="nd">@property</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a>    <span class="k">def</span> <span class="nf">rateder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return float rateder indicator&#39;&#39;&#39;</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a>        <span class="k">return</span> <span class="mi">0</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dran</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomin</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">dran</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a>    <span class="nd">@property</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a>    <span class="k">def</span> <span class="nf">typecoupl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return relationship type (coupled, derived, crossed, linked)&#39;&#39;&#39;</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>            <span class="k">return</span> <span class="n">COUPLED</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomin</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>            <span class="k">return</span> <span class="n">DERIVED</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomax</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>            <span class="k">return</span> <span class="n">CROSSED</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a>        <span class="k">return</span> <span class="n">LINKED</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a><span class="k">class</span> <span class="nc">AnaDfield</span><span class="p">(</span><span class="n">AnaField</span><span class="p">):</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;This class analyses structure and relationships of fields inside a dataset</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a><span class="sd">    *Attributes* :</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a><span class="sd">    - **dataset** : AnaDataset object where AnaDfield is included</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a><span class="sd">    - **AnaField attributes** : inheritance of AnaField object</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a><span class="sd">    *relationship (@property)*</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a><span class="sd">    - `list_relations`</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a><span class="sd">    - `list_p_derived`</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a><span class="sd">    - `list_c_derived`</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a><span class="sd">    - `list_coupled`</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a><span class="sd">    *field (@property)*</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a><span class="sd">    - `fields`</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a><span class="sd">    - `p_derived`</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a><span class="sd">    - `p_distance`</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a><span class="sd">    - `p_distomin`</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a><span class="sd">    *global (@property)*</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a><span class="sd">    - `index`</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a><span class="sd">    - `dist_root`</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a><span class="sd">    - `category`</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a><span class="sd">    *global (instance methods)*</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a><span class="sd">    - `ascendants`</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a><span class="sd">    - `to_dict`</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a><span class="sd">    - `view`</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a><span class="sd">    *other instance methods*</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a><span class="sd">    - `dic_inner_node`</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a>    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">dataset</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;initialization of attributes from &quot;other&quot;&#39;&#39;&#39;</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">AnaDfield</span><span class="p">):</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a>            <span class="n">new</span> <span class="o">=</span> <span class="n">AnaDfield</span><span class="o">.</span><span class="n">__copy__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a>            <span class="k">return</span> <span class="n">new</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">AnaField</span><span class="p">):</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a>            <span class="n">new</span> <span class="o">=</span> <span class="n">AnaField</span><span class="o">.</span><span class="n">__copy__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a>            <span class="n">new</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="n">AnaDfield</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a>            <span class="k">return</span> <span class="n">new</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a>        <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">dataset</span><span class="p">):</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;AnaDfield is created by adding a AnaDataset link to an AnaField object.</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a><span class="sd">        - **other** : AnaField or AnaDfield to initialize attributes</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a><span class="sd">        - **dataset** : AnaDataset which includes the AnaDfield</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span> <span class="o">=</span> <span class="n">dataset</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; Copy all the data &#39;&#39;&#39;</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">AnaField</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">)</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a>    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; return a comparison between field index&#39;&#39;&#39;</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">index</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>    <span class="nd">@property</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the row of the field in the AnaDataset&#39;&#39;&#39;</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a>        <span class="k">if</span> <span class="bp">self</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a>            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a>    <span class="nd">@property</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>    <span class="k">def</span> <span class="nf">fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the list of the fields included in the AnaDataset&#39;&#39;&#39;</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">fields</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a>    <span class="nd">@property</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a>    <span class="k">def</span> <span class="nf">list_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the list of the relations with the AnaDfield&#39;&#39;&#39;</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">relations</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a>    <span class="nd">@property</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>    <span class="k">def</span> <span class="nf">list_p_derived</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the list of the derived relations with the parents of AnaDfield&#39;&#39;&#39;</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span> <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">typecoupl</span> <span class="o">==</span> <span class="n">DERIVED</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a>                <span class="ow">and</span> <span class="ow">not</span> <span class="n">rel</span><span class="o">.</span><span class="n">parent_child</span><span class="p">]</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a>    <span class="nd">@property</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a>    <span class="k">def</span> <span class="nf">list_c_derived</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the list of the derived relations with the childs of AnaDfield&#39;&#39;&#39;</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span> <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">typecoupl</span> <span class="o">==</span> <span class="n">DERIVED</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a>                <span class="ow">and</span> <span class="n">rel</span><span class="o">.</span><span class="n">parent_child</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a>                <span class="ow">and</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">!=</span> <span class="n">UNIQUE</span><span class="p">]</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a>    <span class="nd">@property</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a>    <span class="k">def</span> <span class="nf">list_coupled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the list of the coupled relations with the AnaDfield&#39;&#39;&#39;</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span> <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">typecoupl</span> <span class="o">==</span> <span class="n">COUPLED</span><span class="p">]</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a>    <span class="nd">@property</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a>    <span class="k">def</span> <span class="nf">dist_root</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the distance to the root field&#39;&#39;&#39;</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a>    <span class="nd">@property</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a>    <span class="k">def</span> <span class="nf">category</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return AnaDfield category (unique, rooted, coupled, derived, mixed)&#39;&#39;&#39;</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">typecodec</span> <span class="o">==</span> <span class="n">UNIQUE</span><span class="p">:</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a>            <span class="k">return</span> <span class="n">UNIQUE</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">typecodec</span> <span class="ow">in</span> <span class="p">(</span><span class="n">COMPLETE</span><span class="p">,</span> <span class="n">FULL</span><span class="p">):</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a>            <span class="k">return</span> <span class="n">ROOTED</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a>        <span class="k">if</span> <span class="n">COUPLED</span> <span class="ow">in</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">typecoupl</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>                       <span class="k">if</span> <span class="ow">not</span> <span class="n">rel</span><span class="o">.</span><span class="n">parent_child</span><span class="p">]:</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a>            <span class="k">return</span> <span class="n">COUPLED</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_c_derived</span><span class="p">:</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a>            <span class="k">return</span> <span class="n">DERIVED</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a>        <span class="k">return</span> <span class="n">MIXED</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a>    <span class="nd">@property</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a>    <span class="k">def</span> <span class="nf">p_derived</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the first derived or coupled parent of the AnaDfield&#39;&#39;&#39;</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="ow">in</span> <span class="p">(</span><span class="n">UNIQUE</span><span class="p">,</span> <span class="n">ROOTED</span><span class="p">):</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">COUPLED</span><span class="p">:</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_coupled</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">COUPLED</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_p_derived</span><span class="p">:</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a>        <span class="n">distance_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">rel</span><span class="o">.</span><span class="n">distance</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_p_derived</span><span class="p">)</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a>        <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_p_derived</span><span class="p">:</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>            <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">distance</span> <span class="o">==</span> <span class="n">distance_min</span><span class="p">:</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>                <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">ROOTED</span><span class="p">:</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>                <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">MIXED</span><span class="p">:</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>                    <span class="k">return</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>    <span class="nd">@property</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a>    <span class="k">def</span> <span class="nf">p_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the first parent with minimal distance of the AnaDfield&#39;&#39;&#39;</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p_min_dist</span><span class="p">()</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>    <span class="nd">@property</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a>    <span class="k">def</span> <span class="nf">p_distomin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the first parent with minimal distomin of the AnaDfield&#39;&#39;&#39;</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p_min_dist</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a>    <span class="k">def</span> <span class="nf">_p_min_dist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the parent with minimal distance of the AnaDfield&#39;&#39;&#39;</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">UNIQUE</span><span class="p">:</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>        <span class="k">if</span> <span class="n">distance</span><span class="p">:</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>            <span class="n">dist_up</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">distance</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span> <span class="k">if</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>                       <span class="ow">not</span> <span class="n">rel</span><span class="o">.</span><span class="n">parent_child</span><span class="p">]</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a>            <span class="c1"># not rel.parent_child and rel.relation[1].category != COUPLED]</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a>            <span class="n">dist_up</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">distomin</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span> <span class="k">if</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a>                       <span class="ow">not</span> <span class="n">rel</span><span class="o">.</span><span class="n">parent_child</span><span class="p">]</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a>            <span class="c1"># not rel.parent_child and rel.relation[1].category != COUPLED]</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">dist_up</span> <span class="ow">or</span> <span class="nb">min</span><span class="p">(</span><span class="n">dist_up</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_root</span><span class="p">:</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>        <span class="n">dist_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">dist_up</span><span class="p">)</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>        <span class="k">if</span> <span class="n">distance</span><span class="p">:</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a>            <span class="n">list_dmin</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>                         <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">distance</span> <span class="o">==</span> <span class="n">dist_min</span><span class="p">]</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>            <span class="c1"># if rel.distance == dist_min and not rel.parent_child]</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>            <span class="n">list_dmin</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>                         <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">distomin</span> <span class="o">==</span> <span class="n">dist_min</span><span class="p">]</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>            <span class="c1"># if rel.distomin == dist_min and not rel.parent_child]</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>        <span class="n">max_lencodec</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">fld</span><span class="o">.</span><span class="n">lencodec</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">list_dmin</span><span class="p">)</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">list_dmin</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">==</span> <span class="n">max_lencodec</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">):</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict with field attributes.</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a><span class="sd">        - **mode** : str (default &#39;id&#39;) - AnaDfield representation (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a>        <span class="n">dic</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">full</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">notnone</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">DISTROOT</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_root</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">NUM</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">CATEGORY</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">PDISTANCE</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_distance</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">PDISTOMIN</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_distomin</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">PDERIVED</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_derived</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a>        <span class="k">return</span> <span class="n">dic</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a>    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">):</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; return a representation of the AnaDfield</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a>        <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>    <span class="k">def</span> <span class="nf">ascendants</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">typeparent</span><span class="o">=</span><span class="s1">&#39;derived&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">):</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; return the list of the AnaDfield&#39;s ascendants in the family tree up to</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a><span class="sd">        the root AnaDfield.</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a><span class="sd">        - **typeparent** : str (default &#39;derived&#39;) - &#39;derived&#39;, &#39;distance&#39; or &#39;distomin&#39;</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a><span class="sd">        (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a><span class="sd">        *Returns* : list of parents from closest to the most distant. Parents</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a><span class="sd">        are represented with index, idfield, or object</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a>        <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>        <span class="n">listparent</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a>        <span class="k">while</span> <span class="n">parent</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a>            <span class="k">if</span> <span class="n">typeparent</span> <span class="o">==</span> <span class="s1">&#39;derived&#39;</span><span class="p">:</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a>                <span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">p_derived</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a>            <span class="k">elif</span> <span class="n">typeparent</span> <span class="o">==</span> <span class="s1">&#39;distance&#39;</span><span class="p">:</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>                <span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">p_distance</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a>                <span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">p_distomin</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a>            <span class="k">if</span> <span class="n">parent</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a>                <span class="n">listparent</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a>        <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">listparent</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a>    <span class="k">def</span> <span class="nf">dic_inner_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">lname</span><span class="p">):</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a child AnaDfield tree.</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a><span class="sd">        - **lname** : integer - maximal length of the names</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a><span class="sd">        - **mode** : string (default &#39;derived&#39;) - kind of tree :</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a><span class="sd">            &#39;derived&#39; : derived tree</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a><span class="sd">            &#39;distance&#39;: min distance tree</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a><span class="sd">            &#39;distomin&#39;: min distomin tree</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a><span class="sd">        *Returns* : dict where key is a AnaDfield and value is the list of</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a><span class="sd">        the childs.</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>        <span class="n">adding</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distance&#39;</span><span class="p">:</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>            <span class="n">rel_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_distance</span><span class="p">)</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>            <span class="n">adding</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rel_parent</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distomin&#39;</span><span class="p">:</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>            <span class="n">rel_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_distomin</span><span class="p">)</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a>            <span class="n">adding</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rel_parent</span><span class="o">.</span><span class="n">distomin</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;derived&#39;</span><span class="p">:</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>            <span class="n">rel_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_derived</span><span class="p">)</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>            <span class="n">adding</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rel_parent</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>        <span class="n">adding</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span><span class="p">)</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span><span class="p">[:</span><span class="n">lname</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; (&#39;</span> <span class="o">+</span> <span class="n">adding</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>        <span class="n">lis</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)]</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;derived&#39;</span><span class="p">:</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ROOTED</span><span class="p">,</span> <span class="n">COUPLED</span><span class="p">):</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>                <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_coupled</span><span class="p">:</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>                    <span class="n">lis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dic_inner_node</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">lname</span><span class="p">))</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ROOTED</span><span class="p">,</span> <span class="n">UNIQUE</span><span class="p">):</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>                <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>                          <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">p_derived</span> <span class="o">==</span> <span class="bp">self</span> <span class="ow">and</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>                          <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">!=</span> <span class="n">COUPLED</span><span class="p">]</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distomin&#39;</span><span class="p">:</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>                      <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">p_distomin</span> <span class="o">==</span> <span class="bp">self</span><span class="p">]</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distance&#39;</span><span class="p">:</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>                      <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">p_distance</span> <span class="o">==</span> <span class="bp">self</span><span class="p">]</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>        <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">childs</span><span class="p">:</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>            <span class="n">lis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fld</span><span class="o">.</span><span class="n">dic_inner_node</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">lname</span><span class="p">))</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>        <span class="k">return</span> <span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">):</span> <span class="n">lis</span><span class="p">}</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a><span class="k">class</span> <span class="nc">AnaDataset</span><span class="p">:</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;This class analyses the structure of a dataset.</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a><span class="sd">    *Attributes* :</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a><span class="sd">    - **iddataset** : string or integer - Id of the Dataset</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a><span class="sd">    - **fields** : list of the AnaDfields included</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a><span class="sd">    - **relations** : dict of the AnaRelations between two AnaDfields</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a><span class="sd">    - **hashd** : string - update identifier</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a><span class="sd">    *relationship (@property)*</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a><span class="sd">    - `ana_relations`</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a><span class="sd">    - `p_relations`</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a><span class="sd">    *field (@property)*</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a><span class="sd">    - `root`</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a><span class="sd">    - `primary`</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a><span class="sd">    - `secondary`</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a><span class="sd">    - `unique`</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a><span class="sd">    - `variable`</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a><span class="sd">    *global (@property)*</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a><span class="sd">    - `category`</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a><span class="sd">    - `complete`</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a><span class="sd">    - `dimension`</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a><span class="sd">    *update (instance methods)*</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a><span class="sd">    - `set_relations`</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a><span class="sd">    *access (instance methods)*</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a><span class="sd">    - `get_relation`</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a><span class="sd">    - `dfield`</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a><span class="sd">    *synthesis (instance methods)*</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a><span class="sd">    - `tree`</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a><span class="sd">    - `to_dict`</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a><span class="sd">    - `indicator`</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a><span class="sd">    - `partitions`</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a><span class="sd">    - `field_partition`</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">iddataset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a>                 <span class="n">leng</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hashd</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Creation mode :</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a><span class="sd">        - single dict attribute where keys are attributes name,</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a><span class="sd">        - single AnaDataset attribute to make a copy</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a><span class="sd">        - multiple attributes</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a><span class="sd">         *Parameters (multiple attributes)*</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a><span class="sd">        - **idfield** : string or integer - Id of the Field</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a><span class="sd">        - **lencodec** : integer (default None) - length of the codec</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a><span class="sd">        - **mincodec** : integer (default None) - number of different values</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a><span class="sd">        - **maxcodec** : integer (default None) - length of the field</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a><span class="sd">        - **hashf** : string (default None) - update identifier</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="n">AnaDataset</span><span class="p">):</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">iddataset</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">iddataset</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">fields</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">relations</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">relations</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hashd</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">hashd</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a>            <span class="k">return</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a>            <span class="n">iddataset</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">IDDATASET</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a>            <span class="n">leng</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">LENGTH</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a>            <span class="n">relations</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">RELATIONS</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a>            <span class="n">hashd</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">HASHD</span><span class="p">)</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a>            <span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">FIELDS</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">iddataset</span> <span class="o">=</span> <span class="n">iddataset</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">AnaDfield</span><span class="p">(</span><span class="n">AnaField</span><span class="p">(</span><span class="n">field</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a>                       <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">]</span> <span class="k">if</span> <span class="n">fields</span> <span class="k">else</span> <span class="p">[]</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a>        <span class="k">if</span> <span class="n">leng</span><span class="p">:</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>            <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>                <span class="n">fld</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">=</span> <span class="n">leng</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">relations</span> <span class="o">=</span> <span class="p">{</span><span class="n">field</span><span class="p">:</span> <span class="p">{}</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">}</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>        <span class="k">if</span> <span class="n">relations</span><span class="p">:</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>            <span class="k">for</span> <span class="n">fld</span><span class="p">,</span> <span class="n">dic_relation</span> <span class="ow">in</span> <span class="n">relations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">set_relations</span><span class="p">(</span><span class="n">fld</span><span class="p">,</span> <span class="n">dic_relation</span><span class="p">)</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hashd</span> <span class="o">=</span> <span class="n">hashd</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;length of the AnaDataset (len of the AnaDfields included)&#39;&#39;&#39;</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a>        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fld</span><span class="p">)</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; equal if class and values are equal&#39;&#39;&#39;</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">and</span> \
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">fields</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">relations</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">relations</span> <span class="ow">and</span> \
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">iddataset</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">iddataset</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashd</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">hashd</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return hash value (sum of attributes hash)&#39;&#39;&#39;</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iddataset</span><span class="p">)</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">fld</span><span class="p">)</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span> <span class="o">+</span> \
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">rel</span><span class="p">)</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">relations</span><span class="p">)</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hashd</span><span class="p">)</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a>    <span class="nd">@property</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>    <span class="k">def</span> <span class="nf">category</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a list of AnaDfield category (unique, rooted, coupled, derived, mixed)&#39;&#39;&#39;</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">fld</span><span class="o">.</span><span class="n">category</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">]</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>    <span class="nd">@property</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>    <span class="k">def</span> <span class="nf">ana_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the list of AnaRelation included&#39;&#39;&#39;</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">fldrel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">fldrel</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a>    <span class="nd">@property</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>    <span class="k">def</span> <span class="nf">p_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the list of oriented AnaRelation (parent first, child second)&#39;&#39;&#39;</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ana_relations</span> <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">parent_child</span><span class="p">]</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>    <span class="nd">@property</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>    <span class="k">def</span> <span class="nf">root</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the root AnaDfield&#39;&#39;&#39;</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>        <span class="n">len_self</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>        <span class="k">return</span> <span class="n">AnaDfield</span><span class="p">(</span><span class="n">AnaField</span><span class="p">(</span><span class="n">ROOT</span><span class="p">,</span> <span class="n">len_self</span><span class="p">,</span> <span class="n">len_self</span><span class="p">,</span> <span class="n">len_self</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>    <span class="nd">@property</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>    <span class="k">def</span> <span class="nf">primary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the first partition of the partitions&#39;&#39;&#39;</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>        <span class="n">part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">partitions</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>        <span class="k">return</span> <span class="n">part</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">part</span> <span class="k">else</span> <span class="p">[]</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a>    <span class="nd">@property</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>    <span class="k">def</span> <span class="nf">complete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return True if the dimension is not 0&#39;&#39;&#39;</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimension</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>    <span class="nd">@property</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a>    <span class="k">def</span> <span class="nf">dimension</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the highest partition lenght&#39;&#39;&#39;</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary</span><span class="p">)</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a>    <span class="nd">@property</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a>    <span class="k">def</span> <span class="nf">secondary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the derived ou coupled fields from primary&#39;&#39;&#39;</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a>        <span class="n">secondary</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary</span><span class="p">:</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_add_child</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">secondary</span><span class="p">)</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">secondary</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary</span><span class="p">]</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>    <span class="nd">@property</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>    <span class="k">def</span> <span class="nf">unique</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the unique fields&#39;&#39;&#39;</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">UNIQUE</span><span class="p">]</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>    <span class="nd">@property</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a>    <span class="k">def</span> <span class="nf">variable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the variable fields&#39;&#39;&#39;</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">secondary</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique</span><span class="p">]</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a>    <span class="k">def</span> <span class="nf">set_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">dic_relations</span><span class="p">):</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Add relations in the AnaDataset from a dict.</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a><span class="sd">        - **field** : AnaDfield, AnaField or str (idfield) - first relation AnaDfield</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a><span class="sd">        - **dic_relations** : dict - key is the second relation AnaDfield and</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a><span class="sd">        value is the dist value or teh list [dist, distrib]</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a>        <span class="n">fld</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>        <span class="k">for</span> <span class="n">other</span><span class="p">,</span> <span class="n">dist</span> <span class="ow">in</span> <span class="n">dic_relations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>            <span class="n">oth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">relations</span><span class="p">[</span><span class="n">fld</span><span class="p">][</span><span class="n">oth</span><span class="p">]</span> <span class="o">=</span> <span class="n">AnaRelation</span><span class="p">([</span><span class="n">fld</span><span class="p">,</span> <span class="n">oth</span><span class="p">],</span> <span class="n">dist</span><span class="p">)</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">relations</span><span class="p">[</span><span class="n">oth</span><span class="p">][</span><span class="n">fld</span><span class="p">]</span> <span class="o">=</span> <span class="n">AnaRelation</span><span class="p">([</span><span class="n">oth</span><span class="p">,</span> <span class="n">fld</span><span class="p">],</span> <span class="n">dist</span><span class="p">)</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>    <span class="k">def</span> <span class="nf">get_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fld1</span><span class="p">,</span> <span class="n">fld2</span><span class="p">):</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Return AnaRelation between fld1 and fld2.</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a><span class="sd">        - **fld1** : AnaDfield, AnaField, int or str (idfield) - first relation AnaDfield</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a><span class="sd">        - **fld2** : AnaDfield, AnaField, int or str (idfield) - second relation AnaDfield</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>        <span class="n">fl1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">fld1</span><span class="p">)</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>        <span class="n">fl2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">fld2</span><span class="p">)</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="ow">in</span> <span class="p">[</span><span class="n">fl1</span><span class="p">,</span> <span class="n">fl2</span><span class="p">]:</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>            <span class="k">return</span> <span class="n">AnaRelation</span><span class="p">([</span><span class="n">fl1</span><span class="p">,</span> <span class="n">fl2</span><span class="p">],</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">relations</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">fld1</span><span class="p">)][</span><span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">fld2</span><span class="p">)]</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>    <span class="k">def</span> <span class="nf">dfield</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fld</span><span class="p">):</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the AnaDfield matching with fld. Fld is str, int, AnaDfield or AnaField&#39;&#39;&#39;</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>        <span class="k">if</span> <span class="n">fld</span> <span class="ow">in</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ROOT</span><span class="p">):</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fld</span><span class="p">,</span> <span class="n">AnaDfield</span><span class="p">):</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>            <span class="k">return</span> <span class="n">fld</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fld</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">fld</span><span class="p">]</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fld</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>            <span class="k">if</span> <span class="n">fld</span> <span class="ow">in</span> <span class="p">[</span><span class="n">dfld</span><span class="o">.</span><span class="n">idfield</span> <span class="k">for</span> <span class="n">dfld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">]:</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>                <span class="k">return</span> <span class="p">[</span><span class="n">dfld</span> <span class="k">for</span> <span class="n">dfld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">dfld</span><span class="o">.</span><span class="n">idfield</span> <span class="o">==</span> <span class="n">fld</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>            <span class="c1"># return self.root</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a>        <span class="k">return</span> <span class="n">AnaDfield</span><span class="p">(</span><span class="n">fld</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>    <span class="k">def</span> <span class="nf">tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;derived&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">lname</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a string with a tree of derived Field.</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a><span class="sd">        - **lname** : integer (default 20) - length of the names</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a><span class="sd">        - **width** : integer (default 5) - length of the lines</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a><span class="sd">        - **string** : boolean (default True) - if True return str else return dict</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a><span class="sd">        - **mode** : string (default &#39;derived&#39;) - kind of tree :</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a><span class="sd">            &#39;derived&#39; : derived tree</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a><span class="sd">            &#39;distance&#39;: min distance tree</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a><span class="sd">            &#39;distomin&#39;: min distomin tree</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a>        <span class="n">lis</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;root-&#39;</span> <span class="o">+</span> <span class="n">mode</span> <span class="o">+</span> <span class="s1">&#39;*(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">]</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distance&#39;</span><span class="p">:</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">p_distance</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">]</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a>        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distomin&#39;</span><span class="p">:</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">p_distomin</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">]</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a>        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;derived&#39;</span><span class="p">:</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">p_derived</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">]</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>        <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">childs</span><span class="p">:</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a>            <span class="n">lis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fld</span><span class="o">.</span><span class="n">dic_inner_node</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">lname</span><span class="p">))</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a>        <span class="n">tree</span> <span class="o">=</span> <span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">):</span> <span class="n">lis</span><span class="p">}</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a>        <span class="k">if</span> <span class="n">string</span><span class="p">:</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>            <span class="n">tre</span> <span class="o">=</span> <span class="n">pprint</span><span class="o">.</span><span class="n">pformat</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>            <span class="n">tre</span> <span class="o">=</span> <span class="n">tre</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;---&#39;</span><span class="p">,</span> <span class="s1">&#39; - &#39;</span><span class="p">)</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>            <span class="n">tre</span> <span class="o">=</span> <span class="n">tre</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a>            <span class="n">tre</span> <span class="o">=</span> <span class="n">tre</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a>            <span class="k">for</span> <span class="n">car</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">]:</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a>                <span class="n">tre</span> <span class="o">=</span> <span class="n">tre</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">car</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>            <span class="k">return</span> <span class="n">tre</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a>        <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">clean_dic</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relations</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict with fields attributes and optionaly relations attributes.</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a><span class="sd">        (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a><span class="sd">        - **relations** : boolean (default: False) - if False return a list of fields,</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a><span class="sd">        if True return a dict &#39;{&quot;fields&quot;: &lt;list of fields&gt;, &quot;relations&quot;: &lt;list of relations&gt;}&#39;</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a><span class="sd">        - **keys** : string, list or tuple - list of keys or single key to return</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a><span class="sd">        if &#39;all&#39; or None, all keys are returned</span>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a><span class="sd">        if list, only keys in list are returned</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a><span class="sd">        if string, only values associated to the string(key) are returned&#39;&#39;&#39;</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a>        <span class="n">fields</span> <span class="o">=</span> <span class="n">Util</span><span class="o">.</span><span class="n">filter_dic</span><span class="p">([</span><span class="n">fld</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>                                 <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">],</span> <span class="n">keys</span><span class="p">)</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>        <span class="n">leng</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">relations</span><span class="p">:</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>            <span class="k">return</span> <span class="n">fields</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="p">,</span> <span class="s1">&#39;relations&#39;</span><span class="p">:</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_relation</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">full</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>                 <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">leng</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">leng</span><span class="p">)]}</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a>    <span class="k">def</span> <span class="nf">partitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">distributed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a list of available partitions (the first is highest).</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a><span class="sd">        (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a><span class="sd">        - **distributed** : boolean (default True) - Include only distributed fields</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>        <span class="n">partit</span> <span class="o">=</span> <span class="p">[[</span><span class="n">fld</span><span class="p">]</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">ROOTED</span><span class="p">]</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a>        <span class="n">crossed</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ana_relations</span> <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">typecoupl</span> <span class="o">==</span> <span class="n">CROSSED</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>                   <span class="c1"># and rel.relation[1].index &gt; rel.relation[0].index</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>                   <span class="ow">and</span> <span class="n">rel</span><span class="o">.</span><span class="n">parent_child</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>                   <span class="ow">and</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">!=</span> <span class="n">COUPLED</span>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>                   <span class="ow">and</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">!=</span> <span class="n">COUPLED</span><span class="p">]</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a>        <span class="k">if</span> <span class="n">distributed</span><span class="p">:</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a>            <span class="n">crossed</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">crossed</span> <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">distrib</span><span class="p">]</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a>        <span class="k">if</span> <span class="n">crossed</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">crossed</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">crossed</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dist</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a>            <span class="n">partit</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">crossed</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a>        <span class="k">elif</span> <span class="n">crossed</span><span class="p">:</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a>            <span class="k">for</span> <span class="n">repeat</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">crossed</span><span class="p">))):</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>                <span class="n">candidates</span> <span class="o">=</span> <span class="n">combinations</span><span class="p">(</span><span class="n">crossed</span><span class="p">,</span> <span class="n">repeat</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a>                <span class="k">for</span> <span class="n">candidat</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">:</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a>                    <span class="n">flds</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>                                <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">candidat</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a>                    <span class="k">if</span> <span class="p">(</span><span class="n">reduce</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="p">[</span><span class="n">fld</span><span class="o">.</span><span class="n">lencodec</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">flds</span><span class="p">])</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">and</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a>                        <span class="nb">len</span><span class="p">(</span><span class="n">candidat</span><span class="p">)</span> <span class="o">==</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">flds</span><span class="p">)))</span> <span class="ow">and</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a>                            <span class="p">(</span><span class="ow">not</span> <span class="n">distributed</span> <span class="ow">or</span> <span class="nb">min</span><span class="p">(</span><span class="n">rel</span><span class="o">.</span><span class="n">distrib</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">candidat</span><span class="p">))):</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>                        <span class="n">partit</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">flds</span><span class="p">)</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>        <span class="n">partit</span> <span class="o">=</span> <span class="n">Util</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">partit</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>        <span class="k">return</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="k">for</span> <span class="n">tup</span> <span class="ow">in</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>                <span class="nb">sorted</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">({</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">prt</span><span class="p">))</span> <span class="k">for</span> <span class="n">prt</span> <span class="ow">in</span> <span class="n">partit</span><span class="p">})),</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>                       <span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>    <span class="k">def</span> <span class="nf">field_partition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">partition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">distributed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a partition dict with the list of primary, secondary, unique</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a><span class="sd">        and variable fields.</span>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a><span class="sd">        (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a><span class="sd">        - **partition** : list (default None) - if None, partition is the first</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a><span class="sd">        - **distributed** : boolean (default True) - Include only distributed fields</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">partition</span><span class="p">:</span>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>            <span class="n">partitions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">partitions</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="n">distributed</span><span class="p">)</span>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">partitions</span><span class="p">:</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a>                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;primary&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;secondary&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="p">[]}</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a>            <span class="n">partition</span> <span class="o">=</span> <span class="n">partitions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a>            <span class="n">partition</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">fld</span><span class="p">)</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">partition</span><span class="p">]</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a>        <span class="n">secondary</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">partition</span><span class="p">:</span>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_add_child</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">secondary</span><span class="p">)</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a>        <span class="n">secondary</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">secondary</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">partition</span><span class="p">]</span>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a>        <span class="n">unique</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">UNIQUE</span><span class="p">]</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a>        <span class="n">variable</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">partition</span> <span class="o">+</span> <span class="n">secondary</span> <span class="o">+</span> <span class="n">unique</span><span class="p">]</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a>        <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">view</span><span class="p">({</span><span class="s1">&#39;primary&#39;</span><span class="p">:</span> <span class="n">partition</span><span class="p">,</span> <span class="s1">&#39;secondary&#39;</span><span class="p">:</span> <span class="n">secondary</span><span class="p">,</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>                          <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">unique</span><span class="p">,</span> <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="n">variable</span><span class="p">},</span> <span class="n">mode</span><span class="p">)</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>    <span class="k">def</span> <span class="nf">indicator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fullsize</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;generate size indicators: ol (object lightness), ul (unicity level),</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a><span class="sd">        gain (sizegain)</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a><span class="sd">        *Parameters*</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a><span class="sd">        - **fullsize** : int - size with full codec</span>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a><span class="sd">        - **size** : int - size with existing codec</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a><span class="sd">        *Returns* : dict&#39;&#39;&#39;</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a>        <span class="n">lenindex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a>        <span class="n">indexlen</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">fld</span><span class="o">.</span><span class="n">lencodec</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>        <span class="n">nval</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">lenindex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a>        <span class="n">sval</span> <span class="o">=</span> <span class="n">fullsize</span> <span class="o">/</span> <span class="n">nval</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a>        <span class="n">ncod</span> <span class="o">=</span> <span class="n">indexlen</span> <span class="o">+</span> <span class="n">lenindex</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a>        <span class="k">if</span> <span class="n">nval</span> <span class="o">!=</span> <span class="n">ncod</span><span class="p">:</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>            <span class="n">scod</span> <span class="o">=</span> <span class="p">(</span><span class="n">size</span> <span class="o">-</span> <span class="n">ncod</span> <span class="o">*</span> <span class="n">sval</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">nval</span> <span class="o">-</span> <span class="n">ncod</span><span class="p">)</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a>            <span class="n">olight</span> <span class="o">=</span> <span class="n">scod</span> <span class="o">/</span> <span class="n">sval</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>            <span class="n">olight</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;total values&#39;</span><span class="p">:</span> <span class="n">nval</span><span class="p">,</span> <span class="s1">&#39;mean size&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">sval</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a>                <span class="s1">&#39;unique values&#39;</span><span class="p">:</span> <span class="n">ncod</span><span class="p">,</span> <span class="s1">&#39;mean coding size&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">scod</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a>                <span class="s1">&#39;unicity level&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">ncod</span> <span class="o">/</span> <span class="n">nval</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a>                <span class="s1">&#39;optimize level&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="n">fullsize</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>                <span class="s1">&#39;object lightness&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">olight</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>                <span class="s1">&#39;maxgain&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">((</span><span class="n">nval</span> <span class="o">-</span> <span class="n">ncod</span><span class="p">)</span> <span class="o">/</span> <span class="n">nval</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>                <span class="s1">&#39;gain&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">((</span><span class="n">fullsize</span> <span class="o">-</span> <span class="n">size</span><span class="p">)</span> <span class="o">/</span> <span class="n">fullsize</span><span class="p">,</span> <span class="mi">3</span><span class="p">)}</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>    <span class="k">def</span> <span class="nf">_add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">childs</span><span class="p">):</span>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; add derived or coupled fields in the childs list&#39;&#39;&#39;</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>        <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">field</span><span class="o">.</span><span class="n">list_c_derived</span> <span class="o">+</span> <span class="n">field</span><span class="o">.</span><span class="n">list_coupled</span><span class="p">:</span>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>            <span class="n">child</span> <span class="o">=</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">childs</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">child</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">UNIQUE</span><span class="p">:</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>                <span class="n">childs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">child</span><span class="o">.</span><span class="n">category</span> <span class="ow">in</span> <span class="p">(</span><span class="n">COUPLED</span><span class="p">,</span> <span class="n">UNIQUE</span><span class="p">):</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_add_child</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">childs</span><span class="p">)</span>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a><span class="k">class</span> <span class="nc">Util</span><span class="p">:</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39; common functions for analysis package&#39;&#39;&#39;</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a>    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">field_struc</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; return a representation of a AnaDfields structure (fields, id, index).</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a><span class="sd">        - **mode** : str - AnaDfield representation (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a><span class="sd">        - **field_struc** : list or dict - structure to represent</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;field&#39;</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">field_struc</span><span class="p">:</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>            <span class="k">return</span> <span class="n">field_struc</span>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_struc</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a>            <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="p">[</span><span class="n">fld</span><span class="o">.</span><span class="n">idfield</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span> <span class="k">else</span> <span class="n">fld</span><span class="o">.</span><span class="n">index</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">val</span><span class="p">]</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">field_struc</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_struc</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_struc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a>            <span class="k">return</span> <span class="p">[[</span><span class="n">fld</span><span class="o">.</span><span class="n">idfield</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span> <span class="k">else</span> <span class="n">fld</span><span class="o">.</span><span class="n">index</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">val</span><span class="p">]</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>                    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">field_struc</span><span class="p">]</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_struc</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">fld</span><span class="o">.</span><span class="n">idfield</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span> <span class="k">else</span> <span class="n">fld</span><span class="o">.</span><span class="n">index</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">field_struc</span><span class="p">]</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_struc</span><span class="p">,</span> <span class="n">AnaField</span><span class="p">):</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>            <span class="k">return</span> <span class="n">field_struc</span><span class="o">.</span><span class="n">idfield</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span> <span class="k">else</span> <span class="n">field_struc</span><span class="o">.</span><span class="n">index</span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>        <span class="k">return</span> <span class="n">field_struc</span>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a>    <span class="k">def</span> <span class="nf">reduce_dic</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict without empty or None values&#39;&#39;&#39;</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>        <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">}</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>    <span class="k">def</span> <span class="nf">clean_dic</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict or list with updated strings by replacing &quot;old&quot; substring</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a><span class="sd">        with &quot;new&quot; substring&#39;&#39;&#39;</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>            <span class="k">return</span> <span class="p">{</span><span class="n">Util</span><span class="o">.</span><span class="n">clean_dic</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span> <span class="n">Util</span><span class="o">.</span><span class="n">clean_dic</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a>            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">Util</span><span class="o">.</span><span class="n">clean_dic</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">]</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>        <span class="k">return</span> <span class="n">obj</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>    <span class="k">def</span> <span class="nf">filter_dic</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return extract of a list of dict or of a dict</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a><span class="sd">         *Parameters*</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a><span class="sd">        - **keys** : string, list or tuple - list of keys or single key to return</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a><span class="sd">        if &#39;all&#39; or None, all keys are returned</span>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a><span class="sd">        if list, only keys in list are returned</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a><span class="sd">        if string, only values associated to the string(key) are returned&#39;&#39;&#39;</span>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">keys</span> <span class="ow">or</span> <span class="n">keys</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a>            <span class="k">return</span> <span class="n">obj</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">Util</span><span class="o">.</span><span class="n">filter_dic</span><span class="p">(</span><span class="n">dic</span><span class="p">,</span> <span class="n">keys</span><span class="p">)</span> <span class="k">for</span> <span class="n">dic</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">]</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>            <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">}</span>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a>        <span class="k">return</span> <span class="n">obj</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a><span class="k">class</span> <span class="nc">AnaError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39; Analysis Exception&#39;&#39;&#39;</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a>    <span class="c1"># pass</span>
</span></pre></div>


            </section>
                <section id="AnaField">
                            <input id="AnaField-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AnaField</span>:

                <label class="view-source-button" for="AnaField-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaField"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaField-79"><a href="#AnaField-79"><span class="linenos"> 79</span></a><span class="k">class</span> <span class="nc">AnaField</span><span class="p">:</span>
</span><span id="AnaField-80"><a href="#AnaField-80"><span class="linenos"> 80</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;This class analyses field entities.</span>
</span><span id="AnaField-81"><a href="#AnaField-81"><span class="linenos"> 81</span></a>
</span><span id="AnaField-82"><a href="#AnaField-82"><span class="linenos"> 82</span></a><span class="sd">    *Attributes*</span>
</span><span id="AnaField-83"><a href="#AnaField-83"><span class="linenos"> 83</span></a>
</span><span id="AnaField-84"><a href="#AnaField-84"><span class="linenos"> 84</span></a><span class="sd">    - **idfield** : string - name or Id of the field</span>
</span><span id="AnaField-85"><a href="#AnaField-85"><span class="linenos"> 85</span></a><span class="sd">    - **lencodec**: integer - codec length</span>
</span><span id="AnaField-86"><a href="#AnaField-86"><span class="linenos"> 86</span></a><span class="sd">    - **mincodec**: integer - minimal codec length</span>
</span><span id="AnaField-87"><a href="#AnaField-87"><span class="linenos"> 87</span></a><span class="sd">    - **maxcodec**: integer - minimal codec length</span>
</span><span id="AnaField-88"><a href="#AnaField-88"><span class="linenos"> 88</span></a><span class="sd">    - **hashf**: integer - hash value to identify modifications</span>
</span><span id="AnaField-89"><a href="#AnaField-89"><span class="linenos"> 89</span></a>
</span><span id="AnaField-90"><a href="#AnaField-90"><span class="linenos"> 90</span></a><span class="sd">    *characteristic (@property)*</span>
</span><span id="AnaField-91"><a href="#AnaField-91"><span class="linenos"> 91</span></a>
</span><span id="AnaField-92"><a href="#AnaField-92"><span class="linenos"> 92</span></a><span class="sd">    - `iscomplete`</span>
</span><span id="AnaField-93"><a href="#AnaField-93"><span class="linenos"> 93</span></a><span class="sd">    - `ratecodec`</span>
</span><span id="AnaField-94"><a href="#AnaField-94"><span class="linenos"> 94</span></a><span class="sd">    - `dmincodec`</span>
</span><span id="AnaField-95"><a href="#AnaField-95"><span class="linenos"> 95</span></a><span class="sd">    - `dmaxcodec`</span>
</span><span id="AnaField-96"><a href="#AnaField-96"><span class="linenos"> 96</span></a><span class="sd">    - `rancodec`</span>
</span><span id="AnaField-97"><a href="#AnaField-97"><span class="linenos"> 97</span></a><span class="sd">    - `typecodec`</span>
</span><span id="AnaField-98"><a href="#AnaField-98"><span class="linenos"> 98</span></a>
</span><span id="AnaField-99"><a href="#AnaField-99"><span class="linenos"> 99</span></a><span class="sd">    *instance methods*</span>
</span><span id="AnaField-100"><a href="#AnaField-100"><span class="linenos">100</span></a>
</span><span id="AnaField-101"><a href="#AnaField-101"><span class="linenos">101</span></a><span class="sd">    - `to_dict`</span>
</span><span id="AnaField-102"><a href="#AnaField-102"><span class="linenos">102</span></a>
</span><span id="AnaField-103"><a href="#AnaField-103"><span class="linenos">103</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="AnaField-104"><a href="#AnaField-104"><span class="linenos">104</span></a>
</span><span id="AnaField-105"><a href="#AnaField-105"><span class="linenos">105</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idfield</span><span class="p">,</span> <span class="n">lencodec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mincodec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxcodec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hashf</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="AnaField-106"><a href="#AnaField-106"><span class="linenos">106</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Creation mode :</span>
</span><span id="AnaField-107"><a href="#AnaField-107"><span class="linenos">107</span></a><span class="sd">        - single dict attribute where keys are attributes name,</span>
</span><span id="AnaField-108"><a href="#AnaField-108"><span class="linenos">108</span></a><span class="sd">        - single AnaField attribute to make a copy</span>
</span><span id="AnaField-109"><a href="#AnaField-109"><span class="linenos">109</span></a><span class="sd">        - multiple attributes</span>
</span><span id="AnaField-110"><a href="#AnaField-110"><span class="linenos">110</span></a>
</span><span id="AnaField-111"><a href="#AnaField-111"><span class="linenos">111</span></a><span class="sd">        *Parameters (multiple attributes)*</span>
</span><span id="AnaField-112"><a href="#AnaField-112"><span class="linenos">112</span></a>
</span><span id="AnaField-113"><a href="#AnaField-113"><span class="linenos">113</span></a><span class="sd">        - **idfield** : string or integer - Id of the Field</span>
</span><span id="AnaField-114"><a href="#AnaField-114"><span class="linenos">114</span></a><span class="sd">        - **lencodec** : integer (default None) - length of the codec</span>
</span><span id="AnaField-115"><a href="#AnaField-115"><span class="linenos">115</span></a><span class="sd">        - **mincodec** : integer (default None) - number of different values</span>
</span><span id="AnaField-116"><a href="#AnaField-116"><span class="linenos">116</span></a><span class="sd">        - **maxcodec** : integer (default None) - length of the field</span>
</span><span id="AnaField-117"><a href="#AnaField-117"><span class="linenos">117</span></a><span class="sd">        - **hashf** : string (default None) - update identifier</span>
</span><span id="AnaField-118"><a href="#AnaField-118"><span class="linenos">118</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaField-119"><a href="#AnaField-119"><span class="linenos">119</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idfield</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="AnaField-120"><a href="#AnaField-120"><span class="linenos">120</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">IDFIELD</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaField-121"><a href="#AnaField-121"><span class="linenos">121</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">LENCODEC</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaField-122"><a href="#AnaField-122"><span class="linenos">122</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">MINCODEC</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaField-123"><a href="#AnaField-123"><span class="linenos">123</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">MAXCODEC</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaField-124"><a href="#AnaField-124"><span class="linenos">124</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hashf</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">HASHF</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaField-125"><a href="#AnaField-125"><span class="linenos">125</span></a>            <span class="k">return</span>
</span><span id="AnaField-126"><a href="#AnaField-126"><span class="linenos">126</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idfield</span><span class="p">,</span> <span class="p">(</span><span class="n">AnaField</span><span class="p">,</span> <span class="n">AnaDfield</span><span class="p">)):</span>
</span><span id="AnaField-127"><a href="#AnaField-127"><span class="linenos">127</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">idfield</span>
</span><span id="AnaField-128"><a href="#AnaField-128"><span class="linenos">128</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">lencodec</span>
</span><span id="AnaField-129"><a href="#AnaField-129"><span class="linenos">129</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">mincodec</span>
</span><span id="AnaField-130"><a href="#AnaField-130"><span class="linenos">130</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">maxcodec</span>
</span><span id="AnaField-131"><a href="#AnaField-131"><span class="linenos">131</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hashf</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">hashf</span>
</span><span id="AnaField-132"><a href="#AnaField-132"><span class="linenos">132</span></a>            <span class="k">return</span>
</span><span id="AnaField-133"><a href="#AnaField-133"><span class="linenos">133</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">lencodec</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lencodec</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="AnaField-134"><a href="#AnaField-134"><span class="linenos">134</span></a>            <span class="k">raise</span> <span class="n">AnaError</span><span class="p">(</span><span class="s2">&quot;lencodec is not correct&quot;</span><span class="p">)</span>
</span><span id="AnaField-135"><a href="#AnaField-135"><span class="linenos">135</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span> <span class="o">=</span> <span class="n">idfield</span>
</span><span id="AnaField-136"><a href="#AnaField-136"><span class="linenos">136</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">=</span> <span class="n">lencodec</span>
</span><span id="AnaField-137"><a href="#AnaField-137"><span class="linenos">137</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="o">=</span> <span class="n">mincodec</span>
</span><span id="AnaField-138"><a href="#AnaField-138"><span class="linenos">138</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">=</span> <span class="n">maxcodec</span>
</span><span id="AnaField-139"><a href="#AnaField-139"><span class="linenos">139</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hashf</span> <span class="o">=</span> <span class="n">hashf</span>
</span><span id="AnaField-140"><a href="#AnaField-140"><span class="linenos">140</span></a>
</span><span id="AnaField-141"><a href="#AnaField-141"><span class="linenos">141</span></a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaField-142"><a href="#AnaField-142"><span class="linenos">142</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;length of the field (maxcodec)&#39;&#39;&#39;</span>
</span><span id="AnaField-143"><a href="#AnaField-143"><span class="linenos">143</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span>
</span><span id="AnaField-144"><a href="#AnaField-144"><span class="linenos">144</span></a>
</span><span id="AnaField-145"><a href="#AnaField-145"><span class="linenos">145</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaField-146"><a href="#AnaField-146"><span class="linenos">146</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;representation of the field (class name + idfield)&#39;&#39;&#39;</span>
</span><span id="AnaField-147"><a href="#AnaField-147"><span class="linenos">147</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
</span><span id="AnaField-148"><a href="#AnaField-148"><span class="linenos">148</span></a>
</span><span id="AnaField-149"><a href="#AnaField-149"><span class="linenos">149</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="AnaField-150"><a href="#AnaField-150"><span class="linenos">150</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; equal if class and attributes are equal&#39;&#39;&#39;</span>
</span><span id="AnaField-151"><a href="#AnaField-151"><span class="linenos">151</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">and</span> \
</span><span id="AnaField-152"><a href="#AnaField-152"><span class="linenos">152</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">idfield</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">lencodec</span> <span class="ow">and</span> \
</span><span id="AnaField-153"><a href="#AnaField-153"><span class="linenos">153</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">mincodec</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">maxcodec</span> <span class="ow">and</span> \
</span><span id="AnaField-154"><a href="#AnaField-154"><span class="linenos">154</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hashf</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">hashf</span>
</span><span id="AnaField-155"><a href="#AnaField-155"><span class="linenos">155</span></a>
</span><span id="AnaField-156"><a href="#AnaField-156"><span class="linenos">156</span></a>    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="AnaField-157"><a href="#AnaField-157"><span class="linenos">157</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; return a comparison between hash value&#39;&#39;&#39;</span>
</span><span id="AnaField-158"><a href="#AnaField-158"><span class="linenos">158</span></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">hash</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="AnaField-159"><a href="#AnaField-159"><span class="linenos">159</span></a>
</span><span id="AnaField-160"><a href="#AnaField-160"><span class="linenos">160</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaField-161"><a href="#AnaField-161"><span class="linenos">161</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return hash value (sum of attributes hash)&#39;&#39;&#39;</span>
</span><span id="AnaField-162"><a href="#AnaField-162"><span class="linenos">162</span></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idfield</span><span class="p">)</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span><span class="p">)</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span><span class="p">)</span> \
</span><span id="AnaField-163"><a href="#AnaField-163"><span class="linenos">163</span></a>            <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span><span class="p">)</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hashf</span><span class="p">)</span>
</span><span id="AnaField-164"><a href="#AnaField-164"><span class="linenos">164</span></a>
</span><span id="AnaField-165"><a href="#AnaField-165"><span class="linenos">165</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaField-166"><a href="#AnaField-166"><span class="linenos">166</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;json-text build with the attributes dict&#39;&#39;&#39;</span>
</span><span id="AnaField-167"><a href="#AnaField-167"><span class="linenos">167</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">idfield</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</span><span id="AnaField-168"><a href="#AnaField-168"><span class="linenos">168</span></a>
</span><span id="AnaField-169"><a href="#AnaField-169"><span class="linenos">169</span></a>    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaField-170"><a href="#AnaField-170"><span class="linenos">170</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; Copy all the attributes &#39;&#39;&#39;</span>
</span><span id="AnaField-171"><a href="#AnaField-171"><span class="linenos">171</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="AnaField-172"><a href="#AnaField-172"><span class="linenos">172</span></a>
</span><span id="AnaField-173"><a href="#AnaField-173"><span class="linenos">173</span></a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">idfield</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">notnone</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="AnaField-174"><a href="#AnaField-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict with field attributes.</span>
</span><span id="AnaField-175"><a href="#AnaField-175"><span class="linenos">175</span></a>
</span><span id="AnaField-176"><a href="#AnaField-176"><span class="linenos">176</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaField-177"><a href="#AnaField-177"><span class="linenos">177</span></a>
</span><span id="AnaField-178"><a href="#AnaField-178"><span class="linenos">178</span></a><span class="sd">        - **full** : boolean (default False) - if True, all the attributes are included</span>
</span><span id="AnaField-179"><a href="#AnaField-179"><span class="linenos">179</span></a><span class="sd">        - **idfield** : boolean (default False) - if True, idfield is included</span>
</span><span id="AnaField-180"><a href="#AnaField-180"><span class="linenos">180</span></a><span class="sd">        - **notnone** : boolean (default True) - if True, None values are not included</span>
</span><span id="AnaField-181"><a href="#AnaField-181"><span class="linenos">181</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaField-182"><a href="#AnaField-182"><span class="linenos">182</span></a>        <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">LENCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span><span class="p">,</span> <span class="n">MINCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span><span class="p">,</span>
</span><span id="AnaField-183"><a href="#AnaField-183"><span class="linenos">183</span></a>               <span class="n">MAXCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span><span class="p">}</span>
</span><span id="AnaField-184"><a href="#AnaField-184"><span class="linenos">184</span></a>        <span class="k">if</span> <span class="n">idfield</span> <span class="ow">or</span> <span class="n">full</span><span class="p">:</span>
</span><span id="AnaField-185"><a href="#AnaField-185"><span class="linenos">185</span></a>            <span class="n">dic</span><span class="p">[</span><span class="n">IDFIELD</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span>
</span><span id="AnaField-186"><a href="#AnaField-186"><span class="linenos">186</span></a>        <span class="k">if</span> <span class="n">full</span><span class="p">:</span>
</span><span id="AnaField-187"><a href="#AnaField-187"><span class="linenos">187</span></a>            <span class="n">dic</span> <span class="o">|=</span> <span class="p">{</span><span class="n">RATECODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratecodec</span><span class="p">,</span> <span class="n">DMINCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmincodec</span><span class="p">,</span>
</span><span id="AnaField-188"><a href="#AnaField-188"><span class="linenos">188</span></a>                    <span class="n">DMAXCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmaxcodec</span><span class="p">,</span> <span class="n">RANCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rancodec</span><span class="p">,</span>
</span><span id="AnaField-189"><a href="#AnaField-189"><span class="linenos">189</span></a>                    <span class="n">TYPECODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">typecodec</span><span class="p">}</span>
</span><span id="AnaField-190"><a href="#AnaField-190"><span class="linenos">190</span></a>        <span class="k">if</span> <span class="n">notnone</span><span class="p">:</span>
</span><span id="AnaField-191"><a href="#AnaField-191"><span class="linenos">191</span></a>            <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">reduce_dic</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span>
</span><span id="AnaField-192"><a href="#AnaField-192"><span class="linenos">192</span></a>        <span class="k">return</span> <span class="n">dic</span>
</span><span id="AnaField-193"><a href="#AnaField-193"><span class="linenos">193</span></a>
</span><span id="AnaField-194"><a href="#AnaField-194"><span class="linenos">194</span></a>    <span class="nd">@property</span>
</span><span id="AnaField-195"><a href="#AnaField-195"><span class="linenos">195</span></a>    <span class="k">def</span> <span class="nf">iscomplete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaField-196"><a href="#AnaField-196"><span class="linenos">196</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return boolean indicator : True if all attributes are present&#39;&#39;&#39;</span>
</span><span id="AnaField-197"><a href="#AnaField-197"><span class="linenos">197</span></a>        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="AnaField-198"><a href="#AnaField-198"><span class="linenos">198</span></a>
</span><span id="AnaField-199"><a href="#AnaField-199"><span class="linenos">199</span></a>    <span class="nd">@property</span>
</span><span id="AnaField-200"><a href="#AnaField-200"><span class="linenos">200</span></a>    <span class="k">def</span> <span class="nf">ratecodec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaField-201"><a href="#AnaField-201"><span class="linenos">201</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return float ratecodec indicator&#39;&#39;&#39;</span>
</span><span id="AnaField-202"><a href="#AnaField-202"><span class="linenos">202</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iscomplete</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span><span class="p">:</span>
</span><span id="AnaField-203"><a href="#AnaField-203"><span class="linenos">203</span></a>            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span><span class="p">)</span>
</span><span id="AnaField-204"><a href="#AnaField-204"><span class="linenos">204</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="AnaField-205"><a href="#AnaField-205"><span class="linenos">205</span></a>
</span><span id="AnaField-206"><a href="#AnaField-206"><span class="linenos">206</span></a>    <span class="nd">@property</span>
</span><span id="AnaField-207"><a href="#AnaField-207"><span class="linenos">207</span></a>    <span class="k">def</span> <span class="nf">dmincodec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaField-208"><a href="#AnaField-208"><span class="linenos">208</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer dmincodec indicator&#39;&#39;&#39;</span>
</span><span id="AnaField-209"><a href="#AnaField-209"><span class="linenos">209</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iscomplete</span> <span class="k">else</span> <span class="kc">None</span>
</span><span id="AnaField-210"><a href="#AnaField-210"><span class="linenos">210</span></a>
</span><span id="AnaField-211"><a href="#AnaField-211"><span class="linenos">211</span></a>    <span class="nd">@property</span>
</span><span id="AnaField-212"><a href="#AnaField-212"><span class="linenos">212</span></a>    <span class="k">def</span> <span class="nf">dmaxcodec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaField-213"><a href="#AnaField-213"><span class="linenos">213</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer dmaxcodec indicator&#39;&#39;&#39;</span>
</span><span id="AnaField-214"><a href="#AnaField-214"><span class="linenos">214</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iscomplete</span> <span class="k">else</span> <span class="kc">None</span>
</span><span id="AnaField-215"><a href="#AnaField-215"><span class="linenos">215</span></a>
</span><span id="AnaField-216"><a href="#AnaField-216"><span class="linenos">216</span></a>    <span class="nd">@property</span>
</span><span id="AnaField-217"><a href="#AnaField-217"><span class="linenos">217</span></a>    <span class="k">def</span> <span class="nf">rancodec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaField-218"><a href="#AnaField-218"><span class="linenos">218</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer rancodec indicator&#39;&#39;&#39;</span>
</span><span id="AnaField-219"><a href="#AnaField-219"><span class="linenos">219</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iscomplete</span> <span class="k">else</span> <span class="kc">None</span>
</span><span id="AnaField-220"><a href="#AnaField-220"><span class="linenos">220</span></a>
</span><span id="AnaField-221"><a href="#AnaField-221"><span class="linenos">221</span></a>    <span class="nd">@property</span>
</span><span id="AnaField-222"><a href="#AnaField-222"><span class="linenos">222</span></a>    <span class="k">def</span> <span class="nf">typecodec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaField-223"><a href="#AnaField-223"><span class="linenos">223</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return string typecodec indicator</span>
</span><span id="AnaField-224"><a href="#AnaField-224"><span class="linenos">224</span></a><span class="sd">        (null, unique, complete, full, default, mixed)</span>
</span><span id="AnaField-225"><a href="#AnaField-225"><span class="linenos">225</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaField-226"><a href="#AnaField-226"><span class="linenos">226</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AnaField-227"><a href="#AnaField-227"><span class="linenos">227</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="AnaField-228"><a href="#AnaField-228"><span class="linenos">228</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AnaField-229"><a href="#AnaField-229"><span class="linenos">229</span></a>            <span class="k">return</span> <span class="n">NULL</span>
</span><span id="AnaField-230"><a href="#AnaField-230"><span class="linenos">230</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="AnaField-231"><a href="#AnaField-231"><span class="linenos">231</span></a>            <span class="k">return</span> <span class="n">UNIQUE</span>
</span><span id="AnaField-232"><a href="#AnaField-232"><span class="linenos">232</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span><span class="p">:</span>
</span><span id="AnaField-233"><a href="#AnaField-233"><span class="linenos">233</span></a>            <span class="k">return</span> <span class="n">COMPLETE</span>
</span><span id="AnaField-234"><a href="#AnaField-234"><span class="linenos">234</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span><span class="p">:</span>
</span><span id="AnaField-235"><a href="#AnaField-235"><span class="linenos">235</span></a>            <span class="k">return</span> <span class="n">FULL</span>
</span><span id="AnaField-236"><a href="#AnaField-236"><span class="linenos">236</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span><span class="p">:</span>
</span><span id="AnaField-237"><a href="#AnaField-237"><span class="linenos">237</span></a>            <span class="k">return</span> <span class="n">DEFAULT</span>
</span><span id="AnaField-238"><a href="#AnaField-238"><span class="linenos">238</span></a>        <span class="k">return</span> <span class="n">MIXED</span>
</span></pre></div>


            <div class="docstring"><p>This class analyses field entities.</p>

<p><em>Attributes</em></p>

<ul>
<li><strong>idfield</strong> : string - name or Id of the field</li>
<li><strong>lencodec</strong>: integer - codec length</li>
<li><strong>mincodec</strong>: integer - minimal codec length</li>
<li><strong>maxcodec</strong>: integer - minimal codec length</li>
<li><strong>hashf</strong>: integer - hash value to identify modifications</li>
</ul>

<p><em>characteristic (@property)</em></p>

<ul>
<li><code><a href="#AnaField.iscomplete">iscomplete</a></code></li>
<li><code><a href="#AnaField.ratecodec">ratecodec</a></code></li>
<li><code><a href="#AnaField.dmincodec">dmincodec</a></code></li>
<li><code><a href="#AnaField.dmaxcodec">dmaxcodec</a></code></li>
<li><code><a href="#AnaField.rancodec">rancodec</a></code></li>
<li><code><a href="#AnaField.typecodec">typecodec</a></code></li>
</ul>

<p><em>instance methods</em></p>

<ul>
<li><code><a href="#AnaField.to_dict">to_dict</a></code></li>
</ul>
</div>


                            <div id="AnaField.__init__" class="classattr">
                                        <input id="AnaField.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AnaField</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">idfield</span>, </span><span class="param"><span class="n">lencodec</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">mincodec</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">maxcodec</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">hashf</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="AnaField.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaField.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaField.__init__-105"><a href="#AnaField.__init__-105"><span class="linenos">105</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idfield</span><span class="p">,</span> <span class="n">lencodec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mincodec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxcodec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hashf</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="AnaField.__init__-106"><a href="#AnaField.__init__-106"><span class="linenos">106</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Creation mode :</span>
</span><span id="AnaField.__init__-107"><a href="#AnaField.__init__-107"><span class="linenos">107</span></a><span class="sd">        - single dict attribute where keys are attributes name,</span>
</span><span id="AnaField.__init__-108"><a href="#AnaField.__init__-108"><span class="linenos">108</span></a><span class="sd">        - single AnaField attribute to make a copy</span>
</span><span id="AnaField.__init__-109"><a href="#AnaField.__init__-109"><span class="linenos">109</span></a><span class="sd">        - multiple attributes</span>
</span><span id="AnaField.__init__-110"><a href="#AnaField.__init__-110"><span class="linenos">110</span></a>
</span><span id="AnaField.__init__-111"><a href="#AnaField.__init__-111"><span class="linenos">111</span></a><span class="sd">        *Parameters (multiple attributes)*</span>
</span><span id="AnaField.__init__-112"><a href="#AnaField.__init__-112"><span class="linenos">112</span></a>
</span><span id="AnaField.__init__-113"><a href="#AnaField.__init__-113"><span class="linenos">113</span></a><span class="sd">        - **idfield** : string or integer - Id of the Field</span>
</span><span id="AnaField.__init__-114"><a href="#AnaField.__init__-114"><span class="linenos">114</span></a><span class="sd">        - **lencodec** : integer (default None) - length of the codec</span>
</span><span id="AnaField.__init__-115"><a href="#AnaField.__init__-115"><span class="linenos">115</span></a><span class="sd">        - **mincodec** : integer (default None) - number of different values</span>
</span><span id="AnaField.__init__-116"><a href="#AnaField.__init__-116"><span class="linenos">116</span></a><span class="sd">        - **maxcodec** : integer (default None) - length of the field</span>
</span><span id="AnaField.__init__-117"><a href="#AnaField.__init__-117"><span class="linenos">117</span></a><span class="sd">        - **hashf** : string (default None) - update identifier</span>
</span><span id="AnaField.__init__-118"><a href="#AnaField.__init__-118"><span class="linenos">118</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaField.__init__-119"><a href="#AnaField.__init__-119"><span class="linenos">119</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idfield</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="AnaField.__init__-120"><a href="#AnaField.__init__-120"><span class="linenos">120</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">IDFIELD</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaField.__init__-121"><a href="#AnaField.__init__-121"><span class="linenos">121</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">LENCODEC</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaField.__init__-122"><a href="#AnaField.__init__-122"><span class="linenos">122</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">MINCODEC</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaField.__init__-123"><a href="#AnaField.__init__-123"><span class="linenos">123</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">MAXCODEC</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaField.__init__-124"><a href="#AnaField.__init__-124"><span class="linenos">124</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hashf</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">HASHF</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaField.__init__-125"><a href="#AnaField.__init__-125"><span class="linenos">125</span></a>            <span class="k">return</span>
</span><span id="AnaField.__init__-126"><a href="#AnaField.__init__-126"><span class="linenos">126</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idfield</span><span class="p">,</span> <span class="p">(</span><span class="n">AnaField</span><span class="p">,</span> <span class="n">AnaDfield</span><span class="p">)):</span>
</span><span id="AnaField.__init__-127"><a href="#AnaField.__init__-127"><span class="linenos">127</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">idfield</span>
</span><span id="AnaField.__init__-128"><a href="#AnaField.__init__-128"><span class="linenos">128</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">lencodec</span>
</span><span id="AnaField.__init__-129"><a href="#AnaField.__init__-129"><span class="linenos">129</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">mincodec</span>
</span><span id="AnaField.__init__-130"><a href="#AnaField.__init__-130"><span class="linenos">130</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">maxcodec</span>
</span><span id="AnaField.__init__-131"><a href="#AnaField.__init__-131"><span class="linenos">131</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hashf</span> <span class="o">=</span> <span class="n">idfield</span><span class="o">.</span><span class="n">hashf</span>
</span><span id="AnaField.__init__-132"><a href="#AnaField.__init__-132"><span class="linenos">132</span></a>            <span class="k">return</span>
</span><span id="AnaField.__init__-133"><a href="#AnaField.__init__-133"><span class="linenos">133</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">lencodec</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lencodec</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="AnaField.__init__-134"><a href="#AnaField.__init__-134"><span class="linenos">134</span></a>            <span class="k">raise</span> <span class="n">AnaError</span><span class="p">(</span><span class="s2">&quot;lencodec is not correct&quot;</span><span class="p">)</span>
</span><span id="AnaField.__init__-135"><a href="#AnaField.__init__-135"><span class="linenos">135</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span> <span class="o">=</span> <span class="n">idfield</span>
</span><span id="AnaField.__init__-136"><a href="#AnaField.__init__-136"><span class="linenos">136</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">=</span> <span class="n">lencodec</span>
</span><span id="AnaField.__init__-137"><a href="#AnaField.__init__-137"><span class="linenos">137</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span> <span class="o">=</span> <span class="n">mincodec</span>
</span><span id="AnaField.__init__-138"><a href="#AnaField.__init__-138"><span class="linenos">138</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">=</span> <span class="n">maxcodec</span>
</span><span id="AnaField.__init__-139"><a href="#AnaField.__init__-139"><span class="linenos">139</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hashf</span> <span class="o">=</span> <span class="n">hashf</span>
</span></pre></div>


            <div class="docstring"><p>Creation mode :</p>

<ul>
<li>single dict attribute where keys are attributes name,</li>
<li>single AnaField attribute to make a copy</li>
<li>multiple attributes</li>
</ul>

<p><em>Parameters (multiple attributes)</em></p>

<ul>
<li><strong>idfield</strong> : string or integer - Id of the Field</li>
<li><strong>lencodec</strong> : integer (default None) - length of the codec</li>
<li><strong>mincodec</strong> : integer (default None) - number of different values</li>
<li><strong>maxcodec</strong> : integer (default None) - length of the field</li>
<li><strong>hashf</strong> : string (default None) - update identifier</li>
</ul>
</div>


                            </div>
                            <div id="AnaField.to_dict" class="classattr">
                                        <input id="AnaField.to_dict-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">to_dict</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">full</span><span class="o">=</span><span class="kc">False</span>, </span><span class="param"><span class="n">idfield</span><span class="o">=</span><span class="kc">False</span>, </span><span class="param"><span class="n">notnone</span><span class="o">=</span><span class="kc">True</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AnaField.to_dict-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaField.to_dict"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaField.to_dict-173"><a href="#AnaField.to_dict-173"><span class="linenos">173</span></a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">idfield</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">notnone</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="AnaField.to_dict-174"><a href="#AnaField.to_dict-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict with field attributes.</span>
</span><span id="AnaField.to_dict-175"><a href="#AnaField.to_dict-175"><span class="linenos">175</span></a>
</span><span id="AnaField.to_dict-176"><a href="#AnaField.to_dict-176"><span class="linenos">176</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaField.to_dict-177"><a href="#AnaField.to_dict-177"><span class="linenos">177</span></a>
</span><span id="AnaField.to_dict-178"><a href="#AnaField.to_dict-178"><span class="linenos">178</span></a><span class="sd">        - **full** : boolean (default False) - if True, all the attributes are included</span>
</span><span id="AnaField.to_dict-179"><a href="#AnaField.to_dict-179"><span class="linenos">179</span></a><span class="sd">        - **idfield** : boolean (default False) - if True, idfield is included</span>
</span><span id="AnaField.to_dict-180"><a href="#AnaField.to_dict-180"><span class="linenos">180</span></a><span class="sd">        - **notnone** : boolean (default True) - if True, None values are not included</span>
</span><span id="AnaField.to_dict-181"><a href="#AnaField.to_dict-181"><span class="linenos">181</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaField.to_dict-182"><a href="#AnaField.to_dict-182"><span class="linenos">182</span></a>        <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">LENCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span><span class="p">,</span> <span class="n">MINCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">mincodec</span><span class="p">,</span>
</span><span id="AnaField.to_dict-183"><a href="#AnaField.to_dict-183"><span class="linenos">183</span></a>               <span class="n">MAXCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxcodec</span><span class="p">}</span>
</span><span id="AnaField.to_dict-184"><a href="#AnaField.to_dict-184"><span class="linenos">184</span></a>        <span class="k">if</span> <span class="n">idfield</span> <span class="ow">or</span> <span class="n">full</span><span class="p">:</span>
</span><span id="AnaField.to_dict-185"><a href="#AnaField.to_dict-185"><span class="linenos">185</span></a>            <span class="n">dic</span><span class="p">[</span><span class="n">IDFIELD</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span>
</span><span id="AnaField.to_dict-186"><a href="#AnaField.to_dict-186"><span class="linenos">186</span></a>        <span class="k">if</span> <span class="n">full</span><span class="p">:</span>
</span><span id="AnaField.to_dict-187"><a href="#AnaField.to_dict-187"><span class="linenos">187</span></a>            <span class="n">dic</span> <span class="o">|=</span> <span class="p">{</span><span class="n">RATECODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratecodec</span><span class="p">,</span> <span class="n">DMINCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmincodec</span><span class="p">,</span>
</span><span id="AnaField.to_dict-188"><a href="#AnaField.to_dict-188"><span class="linenos">188</span></a>                    <span class="n">DMAXCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmaxcodec</span><span class="p">,</span> <span class="n">RANCODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rancodec</span><span class="p">,</span>
</span><span id="AnaField.to_dict-189"><a href="#AnaField.to_dict-189"><span class="linenos">189</span></a>                    <span class="n">TYPECODEC</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">typecodec</span><span class="p">}</span>
</span><span id="AnaField.to_dict-190"><a href="#AnaField.to_dict-190"><span class="linenos">190</span></a>        <span class="k">if</span> <span class="n">notnone</span><span class="p">:</span>
</span><span id="AnaField.to_dict-191"><a href="#AnaField.to_dict-191"><span class="linenos">191</span></a>            <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">reduce_dic</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span>
</span><span id="AnaField.to_dict-192"><a href="#AnaField.to_dict-192"><span class="linenos">192</span></a>        <span class="k">return</span> <span class="n">dic</span>
</span></pre></div>


            <div class="docstring"><p>return a dict with field attributes.</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>full</strong> : boolean (default False) - if True, all the attributes are included</li>
<li><strong>idfield</strong> : boolean (default False) - if True, idfield is included</li>
<li><strong>notnone</strong> : boolean (default True) - if True, None values are not included</li>
</ul>
</div>


                            </div>
                            <div id="AnaField.iscomplete" class="classattr">
                                <div class="attr variable">
            <span class="name">iscomplete</span>

        
    </div>
    <a class="headerlink" href="#AnaField.iscomplete"></a>
    
            <div class="docstring"><p>return boolean indicator : True if all attributes are present</p>
</div>


                            </div>
                            <div id="AnaField.ratecodec" class="classattr">
                                <div class="attr variable">
            <span class="name">ratecodec</span>

        
    </div>
    <a class="headerlink" href="#AnaField.ratecodec"></a>
    
            <div class="docstring"><p>return float ratecodec indicator</p>
</div>


                            </div>
                            <div id="AnaField.dmincodec" class="classattr">
                                <div class="attr variable">
            <span class="name">dmincodec</span>

        
    </div>
    <a class="headerlink" href="#AnaField.dmincodec"></a>
    
            <div class="docstring"><p>return integer dmincodec indicator</p>
</div>


                            </div>
                            <div id="AnaField.dmaxcodec" class="classattr">
                                <div class="attr variable">
            <span class="name">dmaxcodec</span>

        
    </div>
    <a class="headerlink" href="#AnaField.dmaxcodec"></a>
    
            <div class="docstring"><p>return integer dmaxcodec indicator</p>
</div>


                            </div>
                            <div id="AnaField.rancodec" class="classattr">
                                <div class="attr variable">
            <span class="name">rancodec</span>

        
    </div>
    <a class="headerlink" href="#AnaField.rancodec"></a>
    
            <div class="docstring"><p>return integer rancodec indicator</p>
</div>


                            </div>
                            <div id="AnaField.typecodec" class="classattr">
                                <div class="attr variable">
            <span class="name">typecodec</span>

        
    </div>
    <a class="headerlink" href="#AnaField.typecodec"></a>
    
            <div class="docstring"><p>return string typecodec indicator
(null, unique, complete, full, default, mixed)</p>
</div>


                            </div>
                </section>
                <section id="AnaRelation">
                            <input id="AnaRelation-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AnaRelation</span>:

                <label class="view-source-button" for="AnaRelation-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaRelation"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaRelation-241"><a href="#AnaRelation-241"><span class="linenos">241</span></a><span class="k">class</span> <span class="nc">AnaRelation</span><span class="p">:</span>
</span><span id="AnaRelation-242"><a href="#AnaRelation-242"><span class="linenos">242</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;This class analyses relationship between two fields</span>
</span><span id="AnaRelation-243"><a href="#AnaRelation-243"><span class="linenos">243</span></a>
</span><span id="AnaRelation-244"><a href="#AnaRelation-244"><span class="linenos">244</span></a><span class="sd">    *Attributes* :</span>
</span><span id="AnaRelation-245"><a href="#AnaRelation-245"><span class="linenos">245</span></a>
</span><span id="AnaRelation-246"><a href="#AnaRelation-246"><span class="linenos">246</span></a><span class="sd">    - **relation** : List of the two fields involved in the relationship</span>
</span><span id="AnaRelation-247"><a href="#AnaRelation-247"><span class="linenos">247</span></a><span class="sd">    - **dist** : value of the relationship</span>
</span><span id="AnaRelation-248"><a href="#AnaRelation-248"><span class="linenos">248</span></a><span class="sd">    - **distrib** : boolean True if values are distributed</span>
</span><span id="AnaRelation-249"><a href="#AnaRelation-249"><span class="linenos">249</span></a><span class="sd">    - **hashr**: integer - hash value to identify update</span>
</span><span id="AnaRelation-250"><a href="#AnaRelation-250"><span class="linenos">250</span></a>
</span><span id="AnaRelation-251"><a href="#AnaRelation-251"><span class="linenos">251</span></a><span class="sd">    *global (@property)*</span>
</span><span id="AnaRelation-252"><a href="#AnaRelation-252"><span class="linenos">252</span></a>
</span><span id="AnaRelation-253"><a href="#AnaRelation-253"><span class="linenos">253</span></a><span class="sd">    - `id_relation`</span>
</span><span id="AnaRelation-254"><a href="#AnaRelation-254"><span class="linenos">254</span></a><span class="sd">    - `index_relation`</span>
</span><span id="AnaRelation-255"><a href="#AnaRelation-255"><span class="linenos">255</span></a><span class="sd">    - `parent_child`</span>
</span><span id="AnaRelation-256"><a href="#AnaRelation-256"><span class="linenos">256</span></a><span class="sd">    - `typecoupl`</span>
</span><span id="AnaRelation-257"><a href="#AnaRelation-257"><span class="linenos">257</span></a>
</span><span id="AnaRelation-258"><a href="#AnaRelation-258"><span class="linenos">258</span></a><span class="sd">    *characteristic (@property)*</span>
</span><span id="AnaRelation-259"><a href="#AnaRelation-259"><span class="linenos">259</span></a>
</span><span id="AnaRelation-260"><a href="#AnaRelation-260"><span class="linenos">260</span></a><span class="sd">    - `dmax`</span>
</span><span id="AnaRelation-261"><a href="#AnaRelation-261"><span class="linenos">261</span></a><span class="sd">    - `dmin`</span>
</span><span id="AnaRelation-262"><a href="#AnaRelation-262"><span class="linenos">262</span></a><span class="sd">    - `diff`</span>
</span><span id="AnaRelation-263"><a href="#AnaRelation-263"><span class="linenos">263</span></a><span class="sd">    - `dran`</span>
</span><span id="AnaRelation-264"><a href="#AnaRelation-264"><span class="linenos">264</span></a><span class="sd">    - `distomin`</span>
</span><span id="AnaRelation-265"><a href="#AnaRelation-265"><span class="linenos">265</span></a><span class="sd">    - `distomax`</span>
</span><span id="AnaRelation-266"><a href="#AnaRelation-266"><span class="linenos">266</span></a><span class="sd">    - `distance`</span>
</span><span id="AnaRelation-267"><a href="#AnaRelation-267"><span class="linenos">267</span></a><span class="sd">    - `ratecpl`</span>
</span><span id="AnaRelation-268"><a href="#AnaRelation-268"><span class="linenos">268</span></a><span class="sd">    - `rateder`</span>
</span><span id="AnaRelation-269"><a href="#AnaRelation-269"><span class="linenos">269</span></a>
</span><span id="AnaRelation-270"><a href="#AnaRelation-270"><span class="linenos">270</span></a><span class="sd">    *instance methods*</span>
</span><span id="AnaRelation-271"><a href="#AnaRelation-271"><span class="linenos">271</span></a>
</span><span id="AnaRelation-272"><a href="#AnaRelation-272"><span class="linenos">272</span></a><span class="sd">    - `to_dict`</span>
</span><span id="AnaRelation-273"><a href="#AnaRelation-273"><span class="linenos">273</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="AnaRelation-274"><a href="#AnaRelation-274"><span class="linenos">274</span></a>
</span><span id="AnaRelation-275"><a href="#AnaRelation-275"><span class="linenos">275</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relation</span><span class="p">,</span> <span class="n">dists</span><span class="p">,</span> <span class="n">hashr</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="AnaRelation-276"><a href="#AnaRelation-276"><span class="linenos">276</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Constructor of the relationship :</span>
</span><span id="AnaRelation-277"><a href="#AnaRelation-277"><span class="linenos">277</span></a>
</span><span id="AnaRelation-278"><a href="#AnaRelation-278"><span class="linenos">278</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaRelation-279"><a href="#AnaRelation-279"><span class="linenos">279</span></a>
</span><span id="AnaRelation-280"><a href="#AnaRelation-280"><span class="linenos">280</span></a><span class="sd">        - **relation** : List of the two fields involved in the relationship</span>
</span><span id="AnaRelation-281"><a href="#AnaRelation-281"><span class="linenos">281</span></a><span class="sd">        - **dists** : dist value or list of dist value and distrib boolean</span>
</span><span id="AnaRelation-282"><a href="#AnaRelation-282"><span class="linenos">282</span></a><span class="sd">        - **distrib** : boolean True if values are distributed</span>
</span><span id="AnaRelation-283"><a href="#AnaRelation-283"><span class="linenos">283</span></a><span class="sd">        - **hashr**: integer - hash value to identify update</span>
</span><span id="AnaRelation-284"><a href="#AnaRelation-284"><span class="linenos">284</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaRelation-285"><a href="#AnaRelation-285"><span class="linenos">285</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
</span><span id="AnaRelation-286"><a href="#AnaRelation-286"><span class="linenos">286</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dists</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="AnaRelation-287"><a href="#AnaRelation-287"><span class="linenos">287</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="o">=</span> <span class="n">dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AnaRelation-288"><a href="#AnaRelation-288"><span class="linenos">288</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">distrib</span> <span class="o">=</span> <span class="n">dists</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="AnaRelation-289"><a href="#AnaRelation-289"><span class="linenos">289</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AnaRelation-290"><a href="#AnaRelation-290"><span class="linenos">290</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="o">=</span> <span class="n">dists</span>
</span><span id="AnaRelation-291"><a href="#AnaRelation-291"><span class="linenos">291</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">distrib</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AnaRelation-292"><a href="#AnaRelation-292"><span class="linenos">292</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hashr</span> <span class="o">=</span> <span class="n">hashr</span>
</span><span id="AnaRelation-293"><a href="#AnaRelation-293"><span class="linenos">293</span></a>
</span><span id="AnaRelation-294"><a href="#AnaRelation-294"><span class="linenos">294</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-295"><a href="#AnaRelation-295"><span class="linenos">295</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;representation of the field (class name + idfield)&#39;&#39;&#39;</span>
</span><span id="AnaRelation-296"><a href="#AnaRelation-296"><span class="linenos">296</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id_relation</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
</span><span id="AnaRelation-297"><a href="#AnaRelation-297"><span class="linenos">297</span></a>
</span><span id="AnaRelation-298"><a href="#AnaRelation-298"><span class="linenos">298</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-299"><a href="#AnaRelation-299"><span class="linenos">299</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;json-text build with the attributes dict&#39;&#39;&#39;</span>
</span><span id="AnaRelation-300"><a href="#AnaRelation-300"><span class="linenos">300</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">relation</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</span><span id="AnaRelation-301"><a href="#AnaRelation-301"><span class="linenos">301</span></a>
</span><span id="AnaRelation-302"><a href="#AnaRelation-302"><span class="linenos">302</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="AnaRelation-303"><a href="#AnaRelation-303"><span class="linenos">303</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; equal if class and values are equal&#39;&#39;&#39;</span>
</span><span id="AnaRelation-304"><a href="#AnaRelation-304"><span class="linenos">304</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">and</span> \
</span><span id="AnaRelation-305"><a href="#AnaRelation-305"><span class="linenos">305</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">relation</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">dist</span> <span class="ow">and</span> \
</span><span id="AnaRelation-306"><a href="#AnaRelation-306"><span class="linenos">306</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hashr</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">hashr</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">distrib</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">distrib</span>
</span><span id="AnaRelation-307"><a href="#AnaRelation-307"><span class="linenos">307</span></a>
</span><span id="AnaRelation-308"><a href="#AnaRelation-308"><span class="linenos">308</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-309"><a href="#AnaRelation-309"><span class="linenos">309</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return hash value (sum of attributes hash)&#39;&#39;&#39;</span>
</span><span id="AnaRelation-310"><a href="#AnaRelation-310"><span class="linenos">310</span></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> \
</span><span id="AnaRelation-311"><a href="#AnaRelation-311"><span class="linenos">311</span></a>            <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="p">)</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hashr</span><span class="p">)</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">distrib</span><span class="p">)</span>
</span><span id="AnaRelation-312"><a href="#AnaRelation-312"><span class="linenos">312</span></a>
</span><span id="AnaRelation-313"><a href="#AnaRelation-313"><span class="linenos">313</span></a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distances</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">relation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="AnaRelation-314"><a href="#AnaRelation-314"><span class="linenos">314</span></a>                <span class="n">notnone</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">misc</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="AnaRelation-315"><a href="#AnaRelation-315"><span class="linenos">315</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict with AnaRelation attributes.</span>
</span><span id="AnaRelation-316"><a href="#AnaRelation-316"><span class="linenos">316</span></a>
</span><span id="AnaRelation-317"><a href="#AnaRelation-317"><span class="linenos">317</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaRelation-318"><a href="#AnaRelation-318"><span class="linenos">318</span></a>
</span><span id="AnaRelation-319"><a href="#AnaRelation-319"><span class="linenos">319</span></a><span class="sd">        - **distances** : boolean (default False) - if True, distances indicators are included</span>
</span><span id="AnaRelation-320"><a href="#AnaRelation-320"><span class="linenos">320</span></a><span class="sd">        - **full** : boolean (default False) - if True, all the attributes are included</span>
</span><span id="AnaRelation-321"><a href="#AnaRelation-321"><span class="linenos">321</span></a><span class="sd">        - **relation** : boolean (default False) - if True, idfield are included</span>
</span><span id="AnaRelation-322"><a href="#AnaRelation-322"><span class="linenos">322</span></a><span class="sd">        - **notnone** : boolean (default True) - if True, None values are not included</span>
</span><span id="AnaRelation-323"><a href="#AnaRelation-323"><span class="linenos">323</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="AnaRelation-324"><a href="#AnaRelation-324"><span class="linenos">324</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaRelation-325"><a href="#AnaRelation-325"><span class="linenos">325</span></a>        <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">DIST</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="p">,</span> <span class="n">TYPECOUPL</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">typecoupl</span><span class="p">,</span> <span class="n">HASHR</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashr</span><span class="p">}</span>
</span><span id="AnaRelation-326"><a href="#AnaRelation-326"><span class="linenos">326</span></a>        <span class="k">if</span> <span class="n">relation</span> <span class="ow">or</span> <span class="n">full</span><span class="p">:</span>
</span><span id="AnaRelation-327"><a href="#AnaRelation-327"><span class="linenos">327</span></a>            <span class="n">dic</span><span class="p">[</span><span class="n">RELATION</span><span class="p">]</span> <span class="o">=</span> <span class="n">Util</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</span><span id="AnaRelation-328"><a href="#AnaRelation-328"><span class="linenos">328</span></a>            <span class="c1">#dic[TYPECOUPL] = self.typecoupl</span>
</span><span id="AnaRelation-329"><a href="#AnaRelation-329"><span class="linenos">329</span></a>            <span class="n">dic</span><span class="p">[</span><span class="n">PARENTCHILD</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_child</span>
</span><span id="AnaRelation-330"><a href="#AnaRelation-330"><span class="linenos">330</span></a>        <span class="k">if</span> <span class="n">distances</span> <span class="ow">or</span> <span class="n">full</span><span class="p">:</span>
</span><span id="AnaRelation-331"><a href="#AnaRelation-331"><span class="linenos">331</span></a>            <span class="n">dic</span> <span class="o">|=</span> <span class="p">{</span><span class="n">DISTANCE</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance</span><span class="p">,</span> <span class="n">DISTOMIN</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomin</span><span class="p">,</span>
</span><span id="AnaRelation-332"><a href="#AnaRelation-332"><span class="linenos">332</span></a>                    <span class="n">DISTOMAX</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomax</span><span class="p">,</span> <span class="n">DISTRIBUTED</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">distrib</span><span class="p">,</span>
</span><span id="AnaRelation-333"><a href="#AnaRelation-333"><span class="linenos">333</span></a>                    <span class="n">RATECPL</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratecpl</span><span class="p">,</span> <span class="n">RATEDER</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rateder</span><span class="p">}</span>
</span><span id="AnaRelation-334"><a href="#AnaRelation-334"><span class="linenos">334</span></a>        <span class="k">if</span> <span class="n">misc</span> <span class="ow">or</span> <span class="n">full</span><span class="p">:</span>
</span><span id="AnaRelation-335"><a href="#AnaRelation-335"><span class="linenos">335</span></a>            <span class="n">dic</span> <span class="o">|=</span> <span class="p">{</span><span class="n">DMAX</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmax</span><span class="p">,</span> <span class="n">DMIN</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmin</span><span class="p">,</span>
</span><span id="AnaRelation-336"><a href="#AnaRelation-336"><span class="linenos">336</span></a>                    <span class="n">DIFF</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">diff</span><span class="p">,</span> <span class="n">DRAN</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dran</span><span class="p">}</span>
</span><span id="AnaRelation-337"><a href="#AnaRelation-337"><span class="linenos">337</span></a>        <span class="k">if</span> <span class="n">notnone</span><span class="p">:</span>
</span><span id="AnaRelation-338"><a href="#AnaRelation-338"><span class="linenos">338</span></a>            <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">reduce_dic</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span>
</span><span id="AnaRelation-339"><a href="#AnaRelation-339"><span class="linenos">339</span></a>        <span class="k">return</span> <span class="n">dic</span>
</span><span id="AnaRelation-340"><a href="#AnaRelation-340"><span class="linenos">340</span></a>
</span><span id="AnaRelation-341"><a href="#AnaRelation-341"><span class="linenos">341</span></a>    <span class="nd">@property</span>
</span><span id="AnaRelation-342"><a href="#AnaRelation-342"><span class="linenos">342</span></a>    <span class="k">def</span> <span class="nf">id_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-343"><a href="#AnaRelation-343"><span class="linenos">343</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a list with the id of the two fields involved&#39;&#39;&#39;</span>
</span><span id="AnaRelation-344"><a href="#AnaRelation-344"><span class="linenos">344</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">:</span>
</span><span id="AnaRelation-345"><a href="#AnaRelation-345"><span class="linenos">345</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">fld</span><span class="o">.</span><span class="n">idfield</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">]</span>
</span><span id="AnaRelation-346"><a href="#AnaRelation-346"><span class="linenos">346</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="AnaRelation-347"><a href="#AnaRelation-347"><span class="linenos">347</span></a>
</span><span id="AnaRelation-348"><a href="#AnaRelation-348"><span class="linenos">348</span></a>    <span class="nd">@property</span>
</span><span id="AnaRelation-349"><a href="#AnaRelation-349"><span class="linenos">349</span></a>    <span class="k">def</span> <span class="nf">parent_child</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-350"><a href="#AnaRelation-350"><span class="linenos">350</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;returns the direction of the relationship (True if parent is first)&#39;&#39;&#39;</span>
</span><span id="AnaRelation-351"><a href="#AnaRelation-351"><span class="linenos">351</span></a>        <span class="n">rel0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AnaRelation-352"><a href="#AnaRelation-352"><span class="linenos">352</span></a>        <span class="n">rel1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="AnaRelation-353"><a href="#AnaRelation-353"><span class="linenos">353</span></a>        <span class="c1"># if isinstance(rel0, AnaDfield) and isinstance(rel1, AnaDfield):</span>
</span><span id="AnaRelation-354"><a href="#AnaRelation-354"><span class="linenos">354</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">rel0</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">&gt;</span> <span class="n">rel1</span><span class="o">.</span><span class="n">lencodec</span> <span class="ow">or</span>
</span><span id="AnaRelation-355"><a href="#AnaRelation-355"><span class="linenos">355</span></a>                <span class="p">(</span><span class="n">rel0</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">==</span> <span class="n">rel1</span><span class="o">.</span><span class="n">lencodec</span> <span class="ow">and</span> <span class="n">rel0</span><span class="o">.</span><span class="n">index</span> <span class="o">&lt;</span> <span class="n">rel1</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>
</span><span id="AnaRelation-356"><a href="#AnaRelation-356"><span class="linenos">356</span></a>        <span class="c1"># return None</span>
</span><span id="AnaRelation-357"><a href="#AnaRelation-357"><span class="linenos">357</span></a>
</span><span id="AnaRelation-358"><a href="#AnaRelation-358"><span class="linenos">358</span></a>    <span class="nd">@property</span>
</span><span id="AnaRelation-359"><a href="#AnaRelation-359"><span class="linenos">359</span></a>    <span class="k">def</span> <span class="nf">index_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-360"><a href="#AnaRelation-360"><span class="linenos">360</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a list with the index of the two fields involved&#39;&#39;&#39;</span>
</span><span id="AnaRelation-361"><a href="#AnaRelation-361"><span class="linenos">361</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">:</span>
</span><span id="AnaRelation-362"><a href="#AnaRelation-362"><span class="linenos">362</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">fld</span><span class="o">.</span><span class="n">index</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">]</span>
</span><span id="AnaRelation-363"><a href="#AnaRelation-363"><span class="linenos">363</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="AnaRelation-364"><a href="#AnaRelation-364"><span class="linenos">364</span></a>
</span><span id="AnaRelation-365"><a href="#AnaRelation-365"><span class="linenos">365</span></a>    <span class="nd">@property</span>
</span><span id="AnaRelation-366"><a href="#AnaRelation-366"><span class="linenos">366</span></a>    <span class="k">def</span> <span class="nf">dmax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-367"><a href="#AnaRelation-367"><span class="linenos">367</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer dmax indicator&#39;&#39;&#39;</span>
</span><span id="AnaRelation-368"><a href="#AnaRelation-368"><span class="linenos">368</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lencodec</span>
</span><span id="AnaRelation-369"><a href="#AnaRelation-369"><span class="linenos">369</span></a>
</span><span id="AnaRelation-370"><a href="#AnaRelation-370"><span class="linenos">370</span></a>    <span class="nd">@property</span>
</span><span id="AnaRelation-371"><a href="#AnaRelation-371"><span class="linenos">371</span></a>    <span class="k">def</span> <span class="nf">dmin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-372"><a href="#AnaRelation-372"><span class="linenos">372</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer dmin indicator&#39;&#39;&#39;</span>
</span><span id="AnaRelation-373"><a href="#AnaRelation-373"><span class="linenos">373</span></a>        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lencodec</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lencodec</span><span class="p">)</span>
</span><span id="AnaRelation-374"><a href="#AnaRelation-374"><span class="linenos">374</span></a>
</span><span id="AnaRelation-375"><a href="#AnaRelation-375"><span class="linenos">375</span></a>    <span class="nd">@property</span>
</span><span id="AnaRelation-376"><a href="#AnaRelation-376"><span class="linenos">376</span></a>    <span class="k">def</span> <span class="nf">diff</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-377"><a href="#AnaRelation-377"><span class="linenos">377</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer diff indicator&#39;&#39;&#39;</span>
</span><span id="AnaRelation-378"><a href="#AnaRelation-378"><span class="linenos">378</span></a>        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lencodec</span><span class="p">)</span>
</span><span id="AnaRelation-379"><a href="#AnaRelation-379"><span class="linenos">379</span></a>
</span><span id="AnaRelation-380"><a href="#AnaRelation-380"><span class="linenos">380</span></a>    <span class="nd">@property</span>
</span><span id="AnaRelation-381"><a href="#AnaRelation-381"><span class="linenos">381</span></a>    <span class="k">def</span> <span class="nf">dran</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-382"><a href="#AnaRelation-382"><span class="linenos">382</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer dran indicator&#39;&#39;&#39;</span>
</span><span id="AnaRelation-383"><a href="#AnaRelation-383"><span class="linenos">383</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmax</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmin</span>
</span><span id="AnaRelation-384"><a href="#AnaRelation-384"><span class="linenos">384</span></a>
</span><span id="AnaRelation-385"><a href="#AnaRelation-385"><span class="linenos">385</span></a>    <span class="nd">@property</span>
</span><span id="AnaRelation-386"><a href="#AnaRelation-386"><span class="linenos">386</span></a>    <span class="k">def</span> <span class="nf">distomin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-387"><a href="#AnaRelation-387"><span class="linenos">387</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer distomin indicator&#39;&#39;&#39;</span>
</span><span id="AnaRelation-388"><a href="#AnaRelation-388"><span class="linenos">388</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmin</span>
</span><span id="AnaRelation-389"><a href="#AnaRelation-389"><span class="linenos">389</span></a>
</span><span id="AnaRelation-390"><a href="#AnaRelation-390"><span class="linenos">390</span></a>    <span class="nd">@property</span>
</span><span id="AnaRelation-391"><a href="#AnaRelation-391"><span class="linenos">391</span></a>    <span class="k">def</span> <span class="nf">distomax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-392"><a href="#AnaRelation-392"><span class="linenos">392</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer distomax indicator&#39;&#39;&#39;</span>
</span><span id="AnaRelation-393"><a href="#AnaRelation-393"><span class="linenos">393</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmax</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span>
</span><span id="AnaRelation-394"><a href="#AnaRelation-394"><span class="linenos">394</span></a>
</span><span id="AnaRelation-395"><a href="#AnaRelation-395"><span class="linenos">395</span></a>    <span class="nd">@property</span>
</span><span id="AnaRelation-396"><a href="#AnaRelation-396"><span class="linenos">396</span></a>    <span class="k">def</span> <span class="nf">distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-397"><a href="#AnaRelation-397"><span class="linenos">397</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return integer distance indicator&#39;&#39;&#39;</span>
</span><span id="AnaRelation-398"><a href="#AnaRelation-398"><span class="linenos">398</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomin</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">diff</span>
</span><span id="AnaRelation-399"><a href="#AnaRelation-399"><span class="linenos">399</span></a>
</span><span id="AnaRelation-400"><a href="#AnaRelation-400"><span class="linenos">400</span></a>    <span class="nd">@property</span>
</span><span id="AnaRelation-401"><a href="#AnaRelation-401"><span class="linenos">401</span></a>    <span class="k">def</span> <span class="nf">ratecpl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-402"><a href="#AnaRelation-402"><span class="linenos">402</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return float ratecpl indicator&#39;&#39;&#39;</span>
</span><span id="AnaRelation-403"><a href="#AnaRelation-403"><span class="linenos">403</span></a>        <span class="n">disdis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomax</span>
</span><span id="AnaRelation-404"><a href="#AnaRelation-404"><span class="linenos">404</span></a>        <span class="k">return</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">disdis</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance</span> <span class="o">/</span> <span class="n">disdis</span>
</span><span id="AnaRelation-405"><a href="#AnaRelation-405"><span class="linenos">405</span></a>
</span><span id="AnaRelation-406"><a href="#AnaRelation-406"><span class="linenos">406</span></a>    <span class="nd">@property</span>
</span><span id="AnaRelation-407"><a href="#AnaRelation-407"><span class="linenos">407</span></a>    <span class="k">def</span> <span class="nf">rateder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-408"><a href="#AnaRelation-408"><span class="linenos">408</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return float rateder indicator&#39;&#39;&#39;</span>
</span><span id="AnaRelation-409"><a href="#AnaRelation-409"><span class="linenos">409</span></a>        <span class="k">return</span> <span class="mi">0</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dran</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomin</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">dran</span>
</span><span id="AnaRelation-410"><a href="#AnaRelation-410"><span class="linenos">410</span></a>
</span><span id="AnaRelation-411"><a href="#AnaRelation-411"><span class="linenos">411</span></a>    <span class="nd">@property</span>
</span><span id="AnaRelation-412"><a href="#AnaRelation-412"><span class="linenos">412</span></a>    <span class="k">def</span> <span class="nf">typecoupl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaRelation-413"><a href="#AnaRelation-413"><span class="linenos">413</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return relationship type (coupled, derived, crossed, linked)&#39;&#39;&#39;</span>
</span><span id="AnaRelation-414"><a href="#AnaRelation-414"><span class="linenos">414</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AnaRelation-415"><a href="#AnaRelation-415"><span class="linenos">415</span></a>            <span class="k">return</span> <span class="n">COUPLED</span>
</span><span id="AnaRelation-416"><a href="#AnaRelation-416"><span class="linenos">416</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomin</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AnaRelation-417"><a href="#AnaRelation-417"><span class="linenos">417</span></a>            <span class="k">return</span> <span class="n">DERIVED</span>
</span><span id="AnaRelation-418"><a href="#AnaRelation-418"><span class="linenos">418</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomax</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AnaRelation-419"><a href="#AnaRelation-419"><span class="linenos">419</span></a>            <span class="k">return</span> <span class="n">CROSSED</span>
</span><span id="AnaRelation-420"><a href="#AnaRelation-420"><span class="linenos">420</span></a>        <span class="k">return</span> <span class="n">LINKED</span>
</span></pre></div>


            <div class="docstring"><p>This class analyses relationship between two fields</p>

<p><em>Attributes</em> :</p>

<ul>
<li><strong>relation</strong> : List of the two fields involved in the relationship</li>
<li><strong>dist</strong> : value of the relationship</li>
<li><strong>distrib</strong> : boolean True if values are distributed</li>
<li><strong>hashr</strong>: integer - hash value to identify update</li>
</ul>

<p><em>global (@property)</em></p>

<ul>
<li><code><a href="#AnaRelation.id_relation">id_relation</a></code></li>
<li><code><a href="#AnaRelation.index_relation">index_relation</a></code></li>
<li><code><a href="#AnaRelation.parent_child">parent_child</a></code></li>
<li><code><a href="#AnaRelation.typecoupl">typecoupl</a></code></li>
</ul>

<p><em>characteristic (@property)</em></p>

<ul>
<li><code><a href="#AnaRelation.dmax">dmax</a></code></li>
<li><code><a href="#AnaRelation.dmin">dmin</a></code></li>
<li><code><a href="#AnaRelation.diff">diff</a></code></li>
<li><code><a href="#AnaRelation.dran">dran</a></code></li>
<li><code><a href="#AnaRelation.distomin">distomin</a></code></li>
<li><code><a href="#AnaRelation.distomax">distomax</a></code></li>
<li><code><a href="#AnaRelation.distance">distance</a></code></li>
<li><code><a href="#AnaRelation.ratecpl">ratecpl</a></code></li>
<li><code><a href="#AnaRelation.rateder">rateder</a></code></li>
</ul>

<p><em>instance methods</em></p>

<ul>
<li><code><a href="#AnaRelation.to_dict">to_dict</a></code></li>
</ul>
</div>


                            <div id="AnaRelation.__init__" class="classattr">
                                        <input id="AnaRelation.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AnaRelation</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">relation</span>, </span><span class="param"><span class="n">dists</span>, </span><span class="param"><span class="n">hashr</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="AnaRelation.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaRelation.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaRelation.__init__-275"><a href="#AnaRelation.__init__-275"><span class="linenos">275</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relation</span><span class="p">,</span> <span class="n">dists</span><span class="p">,</span> <span class="n">hashr</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="AnaRelation.__init__-276"><a href="#AnaRelation.__init__-276"><span class="linenos">276</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Constructor of the relationship :</span>
</span><span id="AnaRelation.__init__-277"><a href="#AnaRelation.__init__-277"><span class="linenos">277</span></a>
</span><span id="AnaRelation.__init__-278"><a href="#AnaRelation.__init__-278"><span class="linenos">278</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaRelation.__init__-279"><a href="#AnaRelation.__init__-279"><span class="linenos">279</span></a>
</span><span id="AnaRelation.__init__-280"><a href="#AnaRelation.__init__-280"><span class="linenos">280</span></a><span class="sd">        - **relation** : List of the two fields involved in the relationship</span>
</span><span id="AnaRelation.__init__-281"><a href="#AnaRelation.__init__-281"><span class="linenos">281</span></a><span class="sd">        - **dists** : dist value or list of dist value and distrib boolean</span>
</span><span id="AnaRelation.__init__-282"><a href="#AnaRelation.__init__-282"><span class="linenos">282</span></a><span class="sd">        - **distrib** : boolean True if values are distributed</span>
</span><span id="AnaRelation.__init__-283"><a href="#AnaRelation.__init__-283"><span class="linenos">283</span></a><span class="sd">        - **hashr**: integer - hash value to identify update</span>
</span><span id="AnaRelation.__init__-284"><a href="#AnaRelation.__init__-284"><span class="linenos">284</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaRelation.__init__-285"><a href="#AnaRelation.__init__-285"><span class="linenos">285</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
</span><span id="AnaRelation.__init__-286"><a href="#AnaRelation.__init__-286"><span class="linenos">286</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dists</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="AnaRelation.__init__-287"><a href="#AnaRelation.__init__-287"><span class="linenos">287</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="o">=</span> <span class="n">dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AnaRelation.__init__-288"><a href="#AnaRelation.__init__-288"><span class="linenos">288</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">distrib</span> <span class="o">=</span> <span class="n">dists</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="AnaRelation.__init__-289"><a href="#AnaRelation.__init__-289"><span class="linenos">289</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AnaRelation.__init__-290"><a href="#AnaRelation.__init__-290"><span class="linenos">290</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="o">=</span> <span class="n">dists</span>
</span><span id="AnaRelation.__init__-291"><a href="#AnaRelation.__init__-291"><span class="linenos">291</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">distrib</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AnaRelation.__init__-292"><a href="#AnaRelation.__init__-292"><span class="linenos">292</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hashr</span> <span class="o">=</span> <span class="n">hashr</span>
</span></pre></div>


            <div class="docstring"><p>Constructor of the relationship :</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>relation</strong> : List of the two fields involved in the relationship</li>
<li><strong>dists</strong> : dist value or list of dist value and distrib boolean</li>
<li><strong>distrib</strong> : boolean True if values are distributed</li>
<li><strong>hashr</strong>: integer - hash value to identify update</li>
</ul>
</div>


                            </div>
                            <div id="AnaRelation.to_dict" class="classattr">
                                        <input id="AnaRelation.to_dict-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">to_dict</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">distances</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">full</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span>,</span><span class="param">	<span class="n">relation</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">notnone</span><span class="o">=</span><span class="kc">True</span>,</span><span class="param">	<span class="n">misc</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AnaRelation.to_dict-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaRelation.to_dict"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaRelation.to_dict-313"><a href="#AnaRelation.to_dict-313"><span class="linenos">313</span></a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distances</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">relation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="AnaRelation.to_dict-314"><a href="#AnaRelation.to_dict-314"><span class="linenos">314</span></a>                <span class="n">notnone</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">misc</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="AnaRelation.to_dict-315"><a href="#AnaRelation.to_dict-315"><span class="linenos">315</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict with AnaRelation attributes.</span>
</span><span id="AnaRelation.to_dict-316"><a href="#AnaRelation.to_dict-316"><span class="linenos">316</span></a>
</span><span id="AnaRelation.to_dict-317"><a href="#AnaRelation.to_dict-317"><span class="linenos">317</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaRelation.to_dict-318"><a href="#AnaRelation.to_dict-318"><span class="linenos">318</span></a>
</span><span id="AnaRelation.to_dict-319"><a href="#AnaRelation.to_dict-319"><span class="linenos">319</span></a><span class="sd">        - **distances** : boolean (default False) - if True, distances indicators are included</span>
</span><span id="AnaRelation.to_dict-320"><a href="#AnaRelation.to_dict-320"><span class="linenos">320</span></a><span class="sd">        - **full** : boolean (default False) - if True, all the attributes are included</span>
</span><span id="AnaRelation.to_dict-321"><a href="#AnaRelation.to_dict-321"><span class="linenos">321</span></a><span class="sd">        - **relation** : boolean (default False) - if True, idfield are included</span>
</span><span id="AnaRelation.to_dict-322"><a href="#AnaRelation.to_dict-322"><span class="linenos">322</span></a><span class="sd">        - **notnone** : boolean (default True) - if True, None values are not included</span>
</span><span id="AnaRelation.to_dict-323"><a href="#AnaRelation.to_dict-323"><span class="linenos">323</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="AnaRelation.to_dict-324"><a href="#AnaRelation.to_dict-324"><span class="linenos">324</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaRelation.to_dict-325"><a href="#AnaRelation.to_dict-325"><span class="linenos">325</span></a>        <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">DIST</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="p">,</span> <span class="n">TYPECOUPL</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">typecoupl</span><span class="p">,</span> <span class="n">HASHR</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashr</span><span class="p">}</span>
</span><span id="AnaRelation.to_dict-326"><a href="#AnaRelation.to_dict-326"><span class="linenos">326</span></a>        <span class="k">if</span> <span class="n">relation</span> <span class="ow">or</span> <span class="n">full</span><span class="p">:</span>
</span><span id="AnaRelation.to_dict-327"><a href="#AnaRelation.to_dict-327"><span class="linenos">327</span></a>            <span class="n">dic</span><span class="p">[</span><span class="n">RELATION</span><span class="p">]</span> <span class="o">=</span> <span class="n">Util</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</span><span id="AnaRelation.to_dict-328"><a href="#AnaRelation.to_dict-328"><span class="linenos">328</span></a>            <span class="c1">#dic[TYPECOUPL] = self.typecoupl</span>
</span><span id="AnaRelation.to_dict-329"><a href="#AnaRelation.to_dict-329"><span class="linenos">329</span></a>            <span class="n">dic</span><span class="p">[</span><span class="n">PARENTCHILD</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_child</span>
</span><span id="AnaRelation.to_dict-330"><a href="#AnaRelation.to_dict-330"><span class="linenos">330</span></a>        <span class="k">if</span> <span class="n">distances</span> <span class="ow">or</span> <span class="n">full</span><span class="p">:</span>
</span><span id="AnaRelation.to_dict-331"><a href="#AnaRelation.to_dict-331"><span class="linenos">331</span></a>            <span class="n">dic</span> <span class="o">|=</span> <span class="p">{</span><span class="n">DISTANCE</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance</span><span class="p">,</span> <span class="n">DISTOMIN</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomin</span><span class="p">,</span>
</span><span id="AnaRelation.to_dict-332"><a href="#AnaRelation.to_dict-332"><span class="linenos">332</span></a>                    <span class="n">DISTOMAX</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">distomax</span><span class="p">,</span> <span class="n">DISTRIBUTED</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">distrib</span><span class="p">,</span>
</span><span id="AnaRelation.to_dict-333"><a href="#AnaRelation.to_dict-333"><span class="linenos">333</span></a>                    <span class="n">RATECPL</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratecpl</span><span class="p">,</span> <span class="n">RATEDER</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rateder</span><span class="p">}</span>
</span><span id="AnaRelation.to_dict-334"><a href="#AnaRelation.to_dict-334"><span class="linenos">334</span></a>        <span class="k">if</span> <span class="n">misc</span> <span class="ow">or</span> <span class="n">full</span><span class="p">:</span>
</span><span id="AnaRelation.to_dict-335"><a href="#AnaRelation.to_dict-335"><span class="linenos">335</span></a>            <span class="n">dic</span> <span class="o">|=</span> <span class="p">{</span><span class="n">DMAX</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmax</span><span class="p">,</span> <span class="n">DMIN</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dmin</span><span class="p">,</span>
</span><span id="AnaRelation.to_dict-336"><a href="#AnaRelation.to_dict-336"><span class="linenos">336</span></a>                    <span class="n">DIFF</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">diff</span><span class="p">,</span> <span class="n">DRAN</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dran</span><span class="p">}</span>
</span><span id="AnaRelation.to_dict-337"><a href="#AnaRelation.to_dict-337"><span class="linenos">337</span></a>        <span class="k">if</span> <span class="n">notnone</span><span class="p">:</span>
</span><span id="AnaRelation.to_dict-338"><a href="#AnaRelation.to_dict-338"><span class="linenos">338</span></a>            <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">reduce_dic</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span>
</span><span id="AnaRelation.to_dict-339"><a href="#AnaRelation.to_dict-339"><span class="linenos">339</span></a>        <span class="k">return</span> <span class="n">dic</span>
</span></pre></div>


            <div class="docstring"><p>return a dict with AnaRelation attributes.</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>distances</strong> : boolean (default False) - if True, distances indicators are included</li>
<li><strong>full</strong> : boolean (default False) - if True, all the attributes are included</li>
<li><strong>relation</strong> : boolean (default False) - if True, idfield are included</li>
<li><strong>notnone</strong> : boolean (default True) - if True, None values are not included</li>
<li><strong>mode</strong> : str (default 'field') - AnaDfield representation ('field', 'id', 'index')</li>
</ul>
</div>


                            </div>
                            <div id="AnaRelation.id_relation" class="classattr">
                                <div class="attr variable">
            <span class="name">id_relation</span>

        
    </div>
    <a class="headerlink" href="#AnaRelation.id_relation"></a>
    
            <div class="docstring"><p>return a list with the id of the two fields involved</p>
</div>


                            </div>
                            <div id="AnaRelation.parent_child" class="classattr">
                                <div class="attr variable">
            <span class="name">parent_child</span>

        
    </div>
    <a class="headerlink" href="#AnaRelation.parent_child"></a>
    
            <div class="docstring"><p>returns the direction of the relationship (True if parent is first)</p>
</div>


                            </div>
                            <div id="AnaRelation.index_relation" class="classattr">
                                <div class="attr variable">
            <span class="name">index_relation</span>

        
    </div>
    <a class="headerlink" href="#AnaRelation.index_relation"></a>
    
            <div class="docstring"><p>return a list with the index of the two fields involved</p>
</div>


                            </div>
                            <div id="AnaRelation.dmax" class="classattr">
                                <div class="attr variable">
            <span class="name">dmax</span>

        
    </div>
    <a class="headerlink" href="#AnaRelation.dmax"></a>
    
            <div class="docstring"><p>return integer dmax indicator</p>
</div>


                            </div>
                            <div id="AnaRelation.dmin" class="classattr">
                                <div class="attr variable">
            <span class="name">dmin</span>

        
    </div>
    <a class="headerlink" href="#AnaRelation.dmin"></a>
    
            <div class="docstring"><p>return integer dmin indicator</p>
</div>


                            </div>
                            <div id="AnaRelation.diff" class="classattr">
                                <div class="attr variable">
            <span class="name">diff</span>

        
    </div>
    <a class="headerlink" href="#AnaRelation.diff"></a>
    
            <div class="docstring"><p>return integer diff indicator</p>
</div>


                            </div>
                            <div id="AnaRelation.dran" class="classattr">
                                <div class="attr variable">
            <span class="name">dran</span>

        
    </div>
    <a class="headerlink" href="#AnaRelation.dran"></a>
    
            <div class="docstring"><p>return integer dran indicator</p>
</div>


                            </div>
                            <div id="AnaRelation.distomin" class="classattr">
                                <div class="attr variable">
            <span class="name">distomin</span>

        
    </div>
    <a class="headerlink" href="#AnaRelation.distomin"></a>
    
            <div class="docstring"><p>return integer distomin indicator</p>
</div>


                            </div>
                            <div id="AnaRelation.distomax" class="classattr">
                                <div class="attr variable">
            <span class="name">distomax</span>

        
    </div>
    <a class="headerlink" href="#AnaRelation.distomax"></a>
    
            <div class="docstring"><p>return integer distomax indicator</p>
</div>


                            </div>
                            <div id="AnaRelation.distance" class="classattr">
                                <div class="attr variable">
            <span class="name">distance</span>

        
    </div>
    <a class="headerlink" href="#AnaRelation.distance"></a>
    
            <div class="docstring"><p>return integer distance indicator</p>
</div>


                            </div>
                            <div id="AnaRelation.ratecpl" class="classattr">
                                <div class="attr variable">
            <span class="name">ratecpl</span>

        
    </div>
    <a class="headerlink" href="#AnaRelation.ratecpl"></a>
    
            <div class="docstring"><p>return float ratecpl indicator</p>
</div>


                            </div>
                            <div id="AnaRelation.rateder" class="classattr">
                                <div class="attr variable">
            <span class="name">rateder</span>

        
    </div>
    <a class="headerlink" href="#AnaRelation.rateder"></a>
    
            <div class="docstring"><p>return float rateder indicator</p>
</div>


                            </div>
                            <div id="AnaRelation.typecoupl" class="classattr">
                                <div class="attr variable">
            <span class="name">typecoupl</span>

        
    </div>
    <a class="headerlink" href="#AnaRelation.typecoupl"></a>
    
            <div class="docstring"><p>return relationship type (coupled, derived, crossed, linked)</p>
</div>


                            </div>
                </section>
                <section id="AnaDfield">
                            <input id="AnaDfield-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AnaDfield</span><wbr>(<span class="base"><a href="#AnaField">AnaField</a></span>):

                <label class="view-source-button" for="AnaDfield-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDfield"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDfield-423"><a href="#AnaDfield-423"><span class="linenos">423</span></a><span class="k">class</span> <span class="nc">AnaDfield</span><span class="p">(</span><span class="n">AnaField</span><span class="p">):</span>
</span><span id="AnaDfield-424"><a href="#AnaDfield-424"><span class="linenos">424</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;This class analyses structure and relationships of fields inside a dataset</span>
</span><span id="AnaDfield-425"><a href="#AnaDfield-425"><span class="linenos">425</span></a>
</span><span id="AnaDfield-426"><a href="#AnaDfield-426"><span class="linenos">426</span></a><span class="sd">    *Attributes* :</span>
</span><span id="AnaDfield-427"><a href="#AnaDfield-427"><span class="linenos">427</span></a>
</span><span id="AnaDfield-428"><a href="#AnaDfield-428"><span class="linenos">428</span></a><span class="sd">    - **dataset** : AnaDataset object where AnaDfield is included</span>
</span><span id="AnaDfield-429"><a href="#AnaDfield-429"><span class="linenos">429</span></a><span class="sd">    - **AnaField attributes** : inheritance of AnaField object</span>
</span><span id="AnaDfield-430"><a href="#AnaDfield-430"><span class="linenos">430</span></a>
</span><span id="AnaDfield-431"><a href="#AnaDfield-431"><span class="linenos">431</span></a><span class="sd">    *relationship (@property)*</span>
</span><span id="AnaDfield-432"><a href="#AnaDfield-432"><span class="linenos">432</span></a>
</span><span id="AnaDfield-433"><a href="#AnaDfield-433"><span class="linenos">433</span></a><span class="sd">    - `list_relations`</span>
</span><span id="AnaDfield-434"><a href="#AnaDfield-434"><span class="linenos">434</span></a><span class="sd">    - `list_p_derived`</span>
</span><span id="AnaDfield-435"><a href="#AnaDfield-435"><span class="linenos">435</span></a><span class="sd">    - `list_c_derived`</span>
</span><span id="AnaDfield-436"><a href="#AnaDfield-436"><span class="linenos">436</span></a><span class="sd">    - `list_coupled`</span>
</span><span id="AnaDfield-437"><a href="#AnaDfield-437"><span class="linenos">437</span></a>
</span><span id="AnaDfield-438"><a href="#AnaDfield-438"><span class="linenos">438</span></a><span class="sd">    *field (@property)*</span>
</span><span id="AnaDfield-439"><a href="#AnaDfield-439"><span class="linenos">439</span></a>
</span><span id="AnaDfield-440"><a href="#AnaDfield-440"><span class="linenos">440</span></a><span class="sd">    - `fields`</span>
</span><span id="AnaDfield-441"><a href="#AnaDfield-441"><span class="linenos">441</span></a><span class="sd">    - `p_derived`</span>
</span><span id="AnaDfield-442"><a href="#AnaDfield-442"><span class="linenos">442</span></a><span class="sd">    - `p_distance`</span>
</span><span id="AnaDfield-443"><a href="#AnaDfield-443"><span class="linenos">443</span></a><span class="sd">    - `p_distomin`</span>
</span><span id="AnaDfield-444"><a href="#AnaDfield-444"><span class="linenos">444</span></a>
</span><span id="AnaDfield-445"><a href="#AnaDfield-445"><span class="linenos">445</span></a><span class="sd">    *global (@property)*</span>
</span><span id="AnaDfield-446"><a href="#AnaDfield-446"><span class="linenos">446</span></a>
</span><span id="AnaDfield-447"><a href="#AnaDfield-447"><span class="linenos">447</span></a><span class="sd">    - `index`</span>
</span><span id="AnaDfield-448"><a href="#AnaDfield-448"><span class="linenos">448</span></a><span class="sd">    - `dist_root`</span>
</span><span id="AnaDfield-449"><a href="#AnaDfield-449"><span class="linenos">449</span></a><span class="sd">    - `category`</span>
</span><span id="AnaDfield-450"><a href="#AnaDfield-450"><span class="linenos">450</span></a>
</span><span id="AnaDfield-451"><a href="#AnaDfield-451"><span class="linenos">451</span></a><span class="sd">    *global (instance methods)*</span>
</span><span id="AnaDfield-452"><a href="#AnaDfield-452"><span class="linenos">452</span></a>
</span><span id="AnaDfield-453"><a href="#AnaDfield-453"><span class="linenos">453</span></a><span class="sd">    - `ascendants`</span>
</span><span id="AnaDfield-454"><a href="#AnaDfield-454"><span class="linenos">454</span></a><span class="sd">    - `to_dict`</span>
</span><span id="AnaDfield-455"><a href="#AnaDfield-455"><span class="linenos">455</span></a><span class="sd">    - `view`</span>
</span><span id="AnaDfield-456"><a href="#AnaDfield-456"><span class="linenos">456</span></a>
</span><span id="AnaDfield-457"><a href="#AnaDfield-457"><span class="linenos">457</span></a><span class="sd">    *other instance methods*</span>
</span><span id="AnaDfield-458"><a href="#AnaDfield-458"><span class="linenos">458</span></a>
</span><span id="AnaDfield-459"><a href="#AnaDfield-459"><span class="linenos">459</span></a><span class="sd">    - `dic_inner_node`</span>
</span><span id="AnaDfield-460"><a href="#AnaDfield-460"><span class="linenos">460</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="AnaDfield-461"><a href="#AnaDfield-461"><span class="linenos">461</span></a>    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">dataset</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="AnaDfield-462"><a href="#AnaDfield-462"><span class="linenos">462</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;initialization of attributes from &quot;other&quot;&#39;&#39;&#39;</span>
</span><span id="AnaDfield-463"><a href="#AnaDfield-463"><span class="linenos">463</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">AnaDfield</span><span class="p">):</span>
</span><span id="AnaDfield-464"><a href="#AnaDfield-464"><span class="linenos">464</span></a>            <span class="n">new</span> <span class="o">=</span> <span class="n">AnaDfield</span><span class="o">.</span><span class="n">__copy__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="AnaDfield-465"><a href="#AnaDfield-465"><span class="linenos">465</span></a>            <span class="k">return</span> <span class="n">new</span>
</span><span id="AnaDfield-466"><a href="#AnaDfield-466"><span class="linenos">466</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">AnaField</span><span class="p">):</span>
</span><span id="AnaDfield-467"><a href="#AnaDfield-467"><span class="linenos">467</span></a>            <span class="n">new</span> <span class="o">=</span> <span class="n">AnaField</span><span class="o">.</span><span class="n">__copy__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="AnaDfield-468"><a href="#AnaDfield-468"><span class="linenos">468</span></a>            <span class="n">new</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="n">AnaDfield</span>
</span><span id="AnaDfield-469"><a href="#AnaDfield-469"><span class="linenos">469</span></a>            <span class="k">return</span> <span class="n">new</span>
</span><span id="AnaDfield-470"><a href="#AnaDfield-470"><span class="linenos">470</span></a>        <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
</span><span id="AnaDfield-471"><a href="#AnaDfield-471"><span class="linenos">471</span></a>
</span><span id="AnaDfield-472"><a href="#AnaDfield-472"><span class="linenos">472</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">dataset</span><span class="p">):</span>
</span><span id="AnaDfield-473"><a href="#AnaDfield-473"><span class="linenos">473</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;AnaDfield is created by adding a AnaDataset link to an AnaField object.</span>
</span><span id="AnaDfield-474"><a href="#AnaDfield-474"><span class="linenos">474</span></a>
</span><span id="AnaDfield-475"><a href="#AnaDfield-475"><span class="linenos">475</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDfield-476"><a href="#AnaDfield-476"><span class="linenos">476</span></a>
</span><span id="AnaDfield-477"><a href="#AnaDfield-477"><span class="linenos">477</span></a><span class="sd">        - **other** : AnaField or AnaDfield to initialize attributes</span>
</span><span id="AnaDfield-478"><a href="#AnaDfield-478"><span class="linenos">478</span></a><span class="sd">        - **dataset** : AnaDataset which includes the AnaDfield</span>
</span><span id="AnaDfield-479"><a href="#AnaDfield-479"><span class="linenos">479</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDfield-480"><a href="#AnaDfield-480"><span class="linenos">480</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span> <span class="o">=</span> <span class="n">dataset</span>
</span><span id="AnaDfield-481"><a href="#AnaDfield-481"><span class="linenos">481</span></a>
</span><span id="AnaDfield-482"><a href="#AnaDfield-482"><span class="linenos">482</span></a>    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDfield-483"><a href="#AnaDfield-483"><span class="linenos">483</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; Copy all the data &#39;&#39;&#39;</span>
</span><span id="AnaDfield-484"><a href="#AnaDfield-484"><span class="linenos">484</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">AnaField</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">)</span>
</span><span id="AnaDfield-485"><a href="#AnaDfield-485"><span class="linenos">485</span></a>
</span><span id="AnaDfield-486"><a href="#AnaDfield-486"><span class="linenos">486</span></a>    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="AnaDfield-487"><a href="#AnaDfield-487"><span class="linenos">487</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; return a comparison between field index&#39;&#39;&#39;</span>
</span><span id="AnaDfield-488"><a href="#AnaDfield-488"><span class="linenos">488</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">index</span>
</span><span id="AnaDfield-489"><a href="#AnaDfield-489"><span class="linenos">489</span></a>
</span><span id="AnaDfield-490"><a href="#AnaDfield-490"><span class="linenos">490</span></a>    <span class="nd">@property</span>
</span><span id="AnaDfield-491"><a href="#AnaDfield-491"><span class="linenos">491</span></a>    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDfield-492"><a href="#AnaDfield-492"><span class="linenos">492</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the row of the field in the AnaDataset&#39;&#39;&#39;</span>
</span><span id="AnaDfield-493"><a href="#AnaDfield-493"><span class="linenos">493</span></a>        <span class="k">if</span> <span class="bp">self</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
</span><span id="AnaDfield-494"><a href="#AnaDfield-494"><span class="linenos">494</span></a>            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="AnaDfield-495"><a href="#AnaDfield-495"><span class="linenos">495</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="AnaDfield-496"><a href="#AnaDfield-496"><span class="linenos">496</span></a>
</span><span id="AnaDfield-497"><a href="#AnaDfield-497"><span class="linenos">497</span></a>    <span class="nd">@property</span>
</span><span id="AnaDfield-498"><a href="#AnaDfield-498"><span class="linenos">498</span></a>    <span class="k">def</span> <span class="nf">fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDfield-499"><a href="#AnaDfield-499"><span class="linenos">499</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the list of the fields included in the AnaDataset&#39;&#39;&#39;</span>
</span><span id="AnaDfield-500"><a href="#AnaDfield-500"><span class="linenos">500</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">fields</span>
</span><span id="AnaDfield-501"><a href="#AnaDfield-501"><span class="linenos">501</span></a>
</span><span id="AnaDfield-502"><a href="#AnaDfield-502"><span class="linenos">502</span></a>    <span class="nd">@property</span>
</span><span id="AnaDfield-503"><a href="#AnaDfield-503"><span class="linenos">503</span></a>    <span class="k">def</span> <span class="nf">list_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDfield-504"><a href="#AnaDfield-504"><span class="linenos">504</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the list of the relations with the AnaDfield&#39;&#39;&#39;</span>
</span><span id="AnaDfield-505"><a href="#AnaDfield-505"><span class="linenos">505</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">relations</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="AnaDfield-506"><a href="#AnaDfield-506"><span class="linenos">506</span></a>
</span><span id="AnaDfield-507"><a href="#AnaDfield-507"><span class="linenos">507</span></a>    <span class="nd">@property</span>
</span><span id="AnaDfield-508"><a href="#AnaDfield-508"><span class="linenos">508</span></a>    <span class="k">def</span> <span class="nf">list_p_derived</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDfield-509"><a href="#AnaDfield-509"><span class="linenos">509</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the list of the derived relations with the parents of AnaDfield&#39;&#39;&#39;</span>
</span><span id="AnaDfield-510"><a href="#AnaDfield-510"><span class="linenos">510</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span> <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">typecoupl</span> <span class="o">==</span> <span class="n">DERIVED</span>
</span><span id="AnaDfield-511"><a href="#AnaDfield-511"><span class="linenos">511</span></a>                <span class="ow">and</span> <span class="ow">not</span> <span class="n">rel</span><span class="o">.</span><span class="n">parent_child</span><span class="p">]</span>
</span><span id="AnaDfield-512"><a href="#AnaDfield-512"><span class="linenos">512</span></a>
</span><span id="AnaDfield-513"><a href="#AnaDfield-513"><span class="linenos">513</span></a>    <span class="nd">@property</span>
</span><span id="AnaDfield-514"><a href="#AnaDfield-514"><span class="linenos">514</span></a>    <span class="k">def</span> <span class="nf">list_c_derived</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDfield-515"><a href="#AnaDfield-515"><span class="linenos">515</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the list of the derived relations with the childs of AnaDfield&#39;&#39;&#39;</span>
</span><span id="AnaDfield-516"><a href="#AnaDfield-516"><span class="linenos">516</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span> <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">typecoupl</span> <span class="o">==</span> <span class="n">DERIVED</span>
</span><span id="AnaDfield-517"><a href="#AnaDfield-517"><span class="linenos">517</span></a>                <span class="ow">and</span> <span class="n">rel</span><span class="o">.</span><span class="n">parent_child</span>
</span><span id="AnaDfield-518"><a href="#AnaDfield-518"><span class="linenos">518</span></a>                <span class="ow">and</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">!=</span> <span class="n">UNIQUE</span><span class="p">]</span>
</span><span id="AnaDfield-519"><a href="#AnaDfield-519"><span class="linenos">519</span></a>
</span><span id="AnaDfield-520"><a href="#AnaDfield-520"><span class="linenos">520</span></a>    <span class="nd">@property</span>
</span><span id="AnaDfield-521"><a href="#AnaDfield-521"><span class="linenos">521</span></a>    <span class="k">def</span> <span class="nf">list_coupled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDfield-522"><a href="#AnaDfield-522"><span class="linenos">522</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the list of the coupled relations with the AnaDfield&#39;&#39;&#39;</span>
</span><span id="AnaDfield-523"><a href="#AnaDfield-523"><span class="linenos">523</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span> <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">typecoupl</span> <span class="o">==</span> <span class="n">COUPLED</span><span class="p">]</span>
</span><span id="AnaDfield-524"><a href="#AnaDfield-524"><span class="linenos">524</span></a>
</span><span id="AnaDfield-525"><a href="#AnaDfield-525"><span class="linenos">525</span></a>    <span class="nd">@property</span>
</span><span id="AnaDfield-526"><a href="#AnaDfield-526"><span class="linenos">526</span></a>    <span class="k">def</span> <span class="nf">dist_root</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDfield-527"><a href="#AnaDfield-527"><span class="linenos">527</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the distance to the root field&#39;&#39;&#39;</span>
</span><span id="AnaDfield-528"><a href="#AnaDfield-528"><span class="linenos">528</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span>
</span><span id="AnaDfield-529"><a href="#AnaDfield-529"><span class="linenos">529</span></a>
</span><span id="AnaDfield-530"><a href="#AnaDfield-530"><span class="linenos">530</span></a>    <span class="nd">@property</span>
</span><span id="AnaDfield-531"><a href="#AnaDfield-531"><span class="linenos">531</span></a>    <span class="k">def</span> <span class="nf">category</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDfield-532"><a href="#AnaDfield-532"><span class="linenos">532</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return AnaDfield category (unique, rooted, coupled, derived, mixed)&#39;&#39;&#39;</span>
</span><span id="AnaDfield-533"><a href="#AnaDfield-533"><span class="linenos">533</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">typecodec</span> <span class="o">==</span> <span class="n">UNIQUE</span><span class="p">:</span>
</span><span id="AnaDfield-534"><a href="#AnaDfield-534"><span class="linenos">534</span></a>            <span class="k">return</span> <span class="n">UNIQUE</span>
</span><span id="AnaDfield-535"><a href="#AnaDfield-535"><span class="linenos">535</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">typecodec</span> <span class="ow">in</span> <span class="p">(</span><span class="n">COMPLETE</span><span class="p">,</span> <span class="n">FULL</span><span class="p">):</span>
</span><span id="AnaDfield-536"><a href="#AnaDfield-536"><span class="linenos">536</span></a>            <span class="k">return</span> <span class="n">ROOTED</span>
</span><span id="AnaDfield-537"><a href="#AnaDfield-537"><span class="linenos">537</span></a>        <span class="k">if</span> <span class="n">COUPLED</span> <span class="ow">in</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">typecoupl</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span>
</span><span id="AnaDfield-538"><a href="#AnaDfield-538"><span class="linenos">538</span></a>                       <span class="k">if</span> <span class="ow">not</span> <span class="n">rel</span><span class="o">.</span><span class="n">parent_child</span><span class="p">]:</span>
</span><span id="AnaDfield-539"><a href="#AnaDfield-539"><span class="linenos">539</span></a>            <span class="k">return</span> <span class="n">COUPLED</span>
</span><span id="AnaDfield-540"><a href="#AnaDfield-540"><span class="linenos">540</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_c_derived</span><span class="p">:</span>
</span><span id="AnaDfield-541"><a href="#AnaDfield-541"><span class="linenos">541</span></a>            <span class="k">return</span> <span class="n">DERIVED</span>
</span><span id="AnaDfield-542"><a href="#AnaDfield-542"><span class="linenos">542</span></a>        <span class="k">return</span> <span class="n">MIXED</span>
</span><span id="AnaDfield-543"><a href="#AnaDfield-543"><span class="linenos">543</span></a>
</span><span id="AnaDfield-544"><a href="#AnaDfield-544"><span class="linenos">544</span></a>    <span class="nd">@property</span>
</span><span id="AnaDfield-545"><a href="#AnaDfield-545"><span class="linenos">545</span></a>    <span class="k">def</span> <span class="nf">p_derived</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDfield-546"><a href="#AnaDfield-546"><span class="linenos">546</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the first derived or coupled parent of the AnaDfield&#39;&#39;&#39;</span>
</span><span id="AnaDfield-547"><a href="#AnaDfield-547"><span class="linenos">547</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="ow">in</span> <span class="p">(</span><span class="n">UNIQUE</span><span class="p">,</span> <span class="n">ROOTED</span><span class="p">):</span>
</span><span id="AnaDfield-548"><a href="#AnaDfield-548"><span class="linenos">548</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span>
</span><span id="AnaDfield-549"><a href="#AnaDfield-549"><span class="linenos">549</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">COUPLED</span><span class="p">:</span>
</span><span id="AnaDfield-550"><a href="#AnaDfield-550"><span class="linenos">550</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_coupled</span>
</span><span id="AnaDfield-551"><a href="#AnaDfield-551"><span class="linenos">551</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">COUPLED</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AnaDfield-552"><a href="#AnaDfield-552"><span class="linenos">552</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_p_derived</span><span class="p">:</span>
</span><span id="AnaDfield-553"><a href="#AnaDfield-553"><span class="linenos">553</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span>
</span><span id="AnaDfield-554"><a href="#AnaDfield-554"><span class="linenos">554</span></a>        <span class="n">distance_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">rel</span><span class="o">.</span><span class="n">distance</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_p_derived</span><span class="p">)</span>
</span><span id="AnaDfield-555"><a href="#AnaDfield-555"><span class="linenos">555</span></a>        <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_p_derived</span><span class="p">:</span>
</span><span id="AnaDfield-556"><a href="#AnaDfield-556"><span class="linenos">556</span></a>            <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">distance</span> <span class="o">==</span> <span class="n">distance_min</span><span class="p">:</span>
</span><span id="AnaDfield-557"><a href="#AnaDfield-557"><span class="linenos">557</span></a>                <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">ROOTED</span><span class="p">:</span>
</span><span id="AnaDfield-558"><a href="#AnaDfield-558"><span class="linenos">558</span></a>                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span>
</span><span id="AnaDfield-559"><a href="#AnaDfield-559"><span class="linenos">559</span></a>                <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">MIXED</span><span class="p">:</span>
</span><span id="AnaDfield-560"><a href="#AnaDfield-560"><span class="linenos">560</span></a>                    <span class="k">return</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="AnaDfield-561"><a href="#AnaDfield-561"><span class="linenos">561</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span>
</span><span id="AnaDfield-562"><a href="#AnaDfield-562"><span class="linenos">562</span></a>
</span><span id="AnaDfield-563"><a href="#AnaDfield-563"><span class="linenos">563</span></a>    <span class="nd">@property</span>
</span><span id="AnaDfield-564"><a href="#AnaDfield-564"><span class="linenos">564</span></a>    <span class="k">def</span> <span class="nf">p_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDfield-565"><a href="#AnaDfield-565"><span class="linenos">565</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the first parent with minimal distance of the AnaDfield&#39;&#39;&#39;</span>
</span><span id="AnaDfield-566"><a href="#AnaDfield-566"><span class="linenos">566</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p_min_dist</span><span class="p">()</span>
</span><span id="AnaDfield-567"><a href="#AnaDfield-567"><span class="linenos">567</span></a>
</span><span id="AnaDfield-568"><a href="#AnaDfield-568"><span class="linenos">568</span></a>    <span class="nd">@property</span>
</span><span id="AnaDfield-569"><a href="#AnaDfield-569"><span class="linenos">569</span></a>    <span class="k">def</span> <span class="nf">p_distomin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDfield-570"><a href="#AnaDfield-570"><span class="linenos">570</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the first parent with minimal distomin of the AnaDfield&#39;&#39;&#39;</span>
</span><span id="AnaDfield-571"><a href="#AnaDfield-571"><span class="linenos">571</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p_min_dist</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="AnaDfield-572"><a href="#AnaDfield-572"><span class="linenos">572</span></a>
</span><span id="AnaDfield-573"><a href="#AnaDfield-573"><span class="linenos">573</span></a>    <span class="k">def</span> <span class="nf">_p_min_dist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="AnaDfield-574"><a href="#AnaDfield-574"><span class="linenos">574</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the parent with minimal distance of the AnaDfield&#39;&#39;&#39;</span>
</span><span id="AnaDfield-575"><a href="#AnaDfield-575"><span class="linenos">575</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">UNIQUE</span><span class="p">:</span>
</span><span id="AnaDfield-576"><a href="#AnaDfield-576"><span class="linenos">576</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span>
</span><span id="AnaDfield-577"><a href="#AnaDfield-577"><span class="linenos">577</span></a>        <span class="k">if</span> <span class="n">distance</span><span class="p">:</span>
</span><span id="AnaDfield-578"><a href="#AnaDfield-578"><span class="linenos">578</span></a>            <span class="n">dist_up</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">distance</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span> <span class="k">if</span>
</span><span id="AnaDfield-579"><a href="#AnaDfield-579"><span class="linenos">579</span></a>                       <span class="ow">not</span> <span class="n">rel</span><span class="o">.</span><span class="n">parent_child</span><span class="p">]</span>
</span><span id="AnaDfield-580"><a href="#AnaDfield-580"><span class="linenos">580</span></a>            <span class="c1"># not rel.parent_child and rel.relation[1].category != COUPLED]</span>
</span><span id="AnaDfield-581"><a href="#AnaDfield-581"><span class="linenos">581</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AnaDfield-582"><a href="#AnaDfield-582"><span class="linenos">582</span></a>            <span class="n">dist_up</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">distomin</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span> <span class="k">if</span>
</span><span id="AnaDfield-583"><a href="#AnaDfield-583"><span class="linenos">583</span></a>                       <span class="ow">not</span> <span class="n">rel</span><span class="o">.</span><span class="n">parent_child</span><span class="p">]</span>
</span><span id="AnaDfield-584"><a href="#AnaDfield-584"><span class="linenos">584</span></a>            <span class="c1"># not rel.parent_child and rel.relation[1].category != COUPLED]</span>
</span><span id="AnaDfield-585"><a href="#AnaDfield-585"><span class="linenos">585</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">dist_up</span> <span class="ow">or</span> <span class="nb">min</span><span class="p">(</span><span class="n">dist_up</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_root</span><span class="p">:</span>
</span><span id="AnaDfield-586"><a href="#AnaDfield-586"><span class="linenos">586</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span>
</span><span id="AnaDfield-587"><a href="#AnaDfield-587"><span class="linenos">587</span></a>        <span class="n">dist_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">dist_up</span><span class="p">)</span>
</span><span id="AnaDfield-588"><a href="#AnaDfield-588"><span class="linenos">588</span></a>        <span class="k">if</span> <span class="n">distance</span><span class="p">:</span>
</span><span id="AnaDfield-589"><a href="#AnaDfield-589"><span class="linenos">589</span></a>            <span class="n">list_dmin</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span>
</span><span id="AnaDfield-590"><a href="#AnaDfield-590"><span class="linenos">590</span></a>                         <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">distance</span> <span class="o">==</span> <span class="n">dist_min</span><span class="p">]</span>
</span><span id="AnaDfield-591"><a href="#AnaDfield-591"><span class="linenos">591</span></a>            <span class="c1"># if rel.distance == dist_min and not rel.parent_child]</span>
</span><span id="AnaDfield-592"><a href="#AnaDfield-592"><span class="linenos">592</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AnaDfield-593"><a href="#AnaDfield-593"><span class="linenos">593</span></a>            <span class="n">list_dmin</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span>
</span><span id="AnaDfield-594"><a href="#AnaDfield-594"><span class="linenos">594</span></a>                         <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">distomin</span> <span class="o">==</span> <span class="n">dist_min</span><span class="p">]</span>
</span><span id="AnaDfield-595"><a href="#AnaDfield-595"><span class="linenos">595</span></a>            <span class="c1"># if rel.distomin == dist_min and not rel.parent_child]</span>
</span><span id="AnaDfield-596"><a href="#AnaDfield-596"><span class="linenos">596</span></a>        <span class="n">max_lencodec</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">fld</span><span class="o">.</span><span class="n">lencodec</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">list_dmin</span><span class="p">)</span>
</span><span id="AnaDfield-597"><a href="#AnaDfield-597"><span class="linenos">597</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">list_dmin</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">lencodec</span> <span class="o">==</span> <span class="n">max_lencodec</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AnaDfield-598"><a href="#AnaDfield-598"><span class="linenos">598</span></a>
</span><span id="AnaDfield-599"><a href="#AnaDfield-599"><span class="linenos">599</span></a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">):</span>
</span><span id="AnaDfield-600"><a href="#AnaDfield-600"><span class="linenos">600</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict with field attributes.</span>
</span><span id="AnaDfield-601"><a href="#AnaDfield-601"><span class="linenos">601</span></a>
</span><span id="AnaDfield-602"><a href="#AnaDfield-602"><span class="linenos">602</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDfield-603"><a href="#AnaDfield-603"><span class="linenos">603</span></a>
</span><span id="AnaDfield-604"><a href="#AnaDfield-604"><span class="linenos">604</span></a><span class="sd">        - **mode** : str (default &#39;id&#39;) - AnaDfield representation (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="AnaDfield-605"><a href="#AnaDfield-605"><span class="linenos">605</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDfield-606"><a href="#AnaDfield-606"><span class="linenos">606</span></a>        <span class="n">dic</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">full</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">notnone</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="AnaDfield-607"><a href="#AnaDfield-607"><span class="linenos">607</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">DISTROOT</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_root</span>
</span><span id="AnaDfield-608"><a href="#AnaDfield-608"><span class="linenos">608</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">NUM</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span>
</span><span id="AnaDfield-609"><a href="#AnaDfield-609"><span class="linenos">609</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">CATEGORY</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span>
</span><span id="AnaDfield-610"><a href="#AnaDfield-610"><span class="linenos">610</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">PDISTANCE</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_distance</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
</span><span id="AnaDfield-611"><a href="#AnaDfield-611"><span class="linenos">611</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">PDISTOMIN</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_distomin</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
</span><span id="AnaDfield-612"><a href="#AnaDfield-612"><span class="linenos">612</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">PDERIVED</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_derived</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
</span><span id="AnaDfield-613"><a href="#AnaDfield-613"><span class="linenos">613</span></a>        <span class="k">return</span> <span class="n">dic</span>
</span><span id="AnaDfield-614"><a href="#AnaDfield-614"><span class="linenos">614</span></a>
</span><span id="AnaDfield-615"><a href="#AnaDfield-615"><span class="linenos">615</span></a>    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">):</span>
</span><span id="AnaDfield-616"><a href="#AnaDfield-616"><span class="linenos">616</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; return a representation of the AnaDfield</span>
</span><span id="AnaDfield-617"><a href="#AnaDfield-617"><span class="linenos">617</span></a>
</span><span id="AnaDfield-618"><a href="#AnaDfield-618"><span class="linenos">618</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDfield-619"><a href="#AnaDfield-619"><span class="linenos">619</span></a>
</span><span id="AnaDfield-620"><a href="#AnaDfield-620"><span class="linenos">620</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="AnaDfield-621"><a href="#AnaDfield-621"><span class="linenos">621</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDfield-622"><a href="#AnaDfield-622"><span class="linenos">622</span></a>        <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</span><span id="AnaDfield-623"><a href="#AnaDfield-623"><span class="linenos">623</span></a>
</span><span id="AnaDfield-624"><a href="#AnaDfield-624"><span class="linenos">624</span></a>    <span class="k">def</span> <span class="nf">ascendants</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">typeparent</span><span class="o">=</span><span class="s1">&#39;derived&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">):</span>
</span><span id="AnaDfield-625"><a href="#AnaDfield-625"><span class="linenos">625</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; return the list of the AnaDfield&#39;s ascendants in the family tree up to</span>
</span><span id="AnaDfield-626"><a href="#AnaDfield-626"><span class="linenos">626</span></a><span class="sd">        the root AnaDfield.</span>
</span><span id="AnaDfield-627"><a href="#AnaDfield-627"><span class="linenos">627</span></a>
</span><span id="AnaDfield-628"><a href="#AnaDfield-628"><span class="linenos">628</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDfield-629"><a href="#AnaDfield-629"><span class="linenos">629</span></a>
</span><span id="AnaDfield-630"><a href="#AnaDfield-630"><span class="linenos">630</span></a><span class="sd">        - **typeparent** : str (default &#39;derived&#39;) - &#39;derived&#39;, &#39;distance&#39; or &#39;distomin&#39;</span>
</span><span id="AnaDfield-631"><a href="#AnaDfield-631"><span class="linenos">631</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation</span>
</span><span id="AnaDfield-632"><a href="#AnaDfield-632"><span class="linenos">632</span></a><span class="sd">        (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="AnaDfield-633"><a href="#AnaDfield-633"><span class="linenos">633</span></a>
</span><span id="AnaDfield-634"><a href="#AnaDfield-634"><span class="linenos">634</span></a><span class="sd">        *Returns* : list of parents from closest to the most distant. Parents</span>
</span><span id="AnaDfield-635"><a href="#AnaDfield-635"><span class="linenos">635</span></a><span class="sd">        are represented with index, idfield, or object</span>
</span><span id="AnaDfield-636"><a href="#AnaDfield-636"><span class="linenos">636</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDfield-637"><a href="#AnaDfield-637"><span class="linenos">637</span></a>        <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span>
</span><span id="AnaDfield-638"><a href="#AnaDfield-638"><span class="linenos">638</span></a>        <span class="n">listparent</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AnaDfield-639"><a href="#AnaDfield-639"><span class="linenos">639</span></a>        <span class="k">while</span> <span class="n">parent</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
</span><span id="AnaDfield-640"><a href="#AnaDfield-640"><span class="linenos">640</span></a>            <span class="k">if</span> <span class="n">typeparent</span> <span class="o">==</span> <span class="s1">&#39;derived&#39;</span><span class="p">:</span>
</span><span id="AnaDfield-641"><a href="#AnaDfield-641"><span class="linenos">641</span></a>                <span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">p_derived</span>
</span><span id="AnaDfield-642"><a href="#AnaDfield-642"><span class="linenos">642</span></a>            <span class="k">elif</span> <span class="n">typeparent</span> <span class="o">==</span> <span class="s1">&#39;distance&#39;</span><span class="p">:</span>
</span><span id="AnaDfield-643"><a href="#AnaDfield-643"><span class="linenos">643</span></a>                <span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">p_distance</span>
</span><span id="AnaDfield-644"><a href="#AnaDfield-644"><span class="linenos">644</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AnaDfield-645"><a href="#AnaDfield-645"><span class="linenos">645</span></a>                <span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">p_distomin</span>
</span><span id="AnaDfield-646"><a href="#AnaDfield-646"><span class="linenos">646</span></a>            <span class="k">if</span> <span class="n">parent</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
</span><span id="AnaDfield-647"><a href="#AnaDfield-647"><span class="linenos">647</span></a>                <span class="n">listparent</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
</span><span id="AnaDfield-648"><a href="#AnaDfield-648"><span class="linenos">648</span></a>        <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">listparent</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</span><span id="AnaDfield-649"><a href="#AnaDfield-649"><span class="linenos">649</span></a>
</span><span id="AnaDfield-650"><a href="#AnaDfield-650"><span class="linenos">650</span></a>    <span class="k">def</span> <span class="nf">dic_inner_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">lname</span><span class="p">):</span>
</span><span id="AnaDfield-651"><a href="#AnaDfield-651"><span class="linenos">651</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a child AnaDfield tree.</span>
</span><span id="AnaDfield-652"><a href="#AnaDfield-652"><span class="linenos">652</span></a>
</span><span id="AnaDfield-653"><a href="#AnaDfield-653"><span class="linenos">653</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDfield-654"><a href="#AnaDfield-654"><span class="linenos">654</span></a>
</span><span id="AnaDfield-655"><a href="#AnaDfield-655"><span class="linenos">655</span></a><span class="sd">        - **lname** : integer - maximal length of the names</span>
</span><span id="AnaDfield-656"><a href="#AnaDfield-656"><span class="linenos">656</span></a><span class="sd">        - **mode** : string (default &#39;derived&#39;) - kind of tree :</span>
</span><span id="AnaDfield-657"><a href="#AnaDfield-657"><span class="linenos">657</span></a><span class="sd">            &#39;derived&#39; : derived tree</span>
</span><span id="AnaDfield-658"><a href="#AnaDfield-658"><span class="linenos">658</span></a><span class="sd">            &#39;distance&#39;: min distance tree</span>
</span><span id="AnaDfield-659"><a href="#AnaDfield-659"><span class="linenos">659</span></a><span class="sd">            &#39;distomin&#39;: min distomin tree</span>
</span><span id="AnaDfield-660"><a href="#AnaDfield-660"><span class="linenos">660</span></a>
</span><span id="AnaDfield-661"><a href="#AnaDfield-661"><span class="linenos">661</span></a><span class="sd">        *Returns* : dict where key is a AnaDfield and value is the list of</span>
</span><span id="AnaDfield-662"><a href="#AnaDfield-662"><span class="linenos">662</span></a><span class="sd">        the childs.</span>
</span><span id="AnaDfield-663"><a href="#AnaDfield-663"><span class="linenos">663</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDfield-664"><a href="#AnaDfield-664"><span class="linenos">664</span></a>        <span class="n">adding</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="AnaDfield-665"><a href="#AnaDfield-665"><span class="linenos">665</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distance&#39;</span><span class="p">:</span>
</span><span id="AnaDfield-666"><a href="#AnaDfield-666"><span class="linenos">666</span></a>            <span class="n">rel_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_distance</span><span class="p">)</span>
</span><span id="AnaDfield-667"><a href="#AnaDfield-667"><span class="linenos">667</span></a>            <span class="n">adding</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rel_parent</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span>
</span><span id="AnaDfield-668"><a href="#AnaDfield-668"><span class="linenos">668</span></a>        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distomin&#39;</span><span class="p">:</span>
</span><span id="AnaDfield-669"><a href="#AnaDfield-669"><span class="linenos">669</span></a>            <span class="n">rel_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_distomin</span><span class="p">)</span>
</span><span id="AnaDfield-670"><a href="#AnaDfield-670"><span class="linenos">670</span></a>            <span class="n">adding</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rel_parent</span><span class="o">.</span><span class="n">distomin</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span>
</span><span id="AnaDfield-671"><a href="#AnaDfield-671"><span class="linenos">671</span></a>        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;derived&#39;</span><span class="p">:</span>
</span><span id="AnaDfield-672"><a href="#AnaDfield-672"><span class="linenos">672</span></a>            <span class="n">rel_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_derived</span><span class="p">)</span>
</span><span id="AnaDfield-673"><a href="#AnaDfield-673"><span class="linenos">673</span></a>            <span class="n">adding</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rel_parent</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span>
</span><span id="AnaDfield-674"><a href="#AnaDfield-674"><span class="linenos">674</span></a>        <span class="n">adding</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span><span class="p">)</span>
</span><span id="AnaDfield-675"><a href="#AnaDfield-675"><span class="linenos">675</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span><span class="p">[:</span><span class="n">lname</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; (&#39;</span> <span class="o">+</span> <span class="n">adding</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
</span><span id="AnaDfield-676"><a href="#AnaDfield-676"><span class="linenos">676</span></a>        <span class="n">lis</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)]</span>
</span><span id="AnaDfield-677"><a href="#AnaDfield-677"><span class="linenos">677</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;derived&#39;</span><span class="p">:</span>
</span><span id="AnaDfield-678"><a href="#AnaDfield-678"><span class="linenos">678</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AnaDfield-679"><a href="#AnaDfield-679"><span class="linenos">679</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ROOTED</span><span class="p">,</span> <span class="n">COUPLED</span><span class="p">):</span>
</span><span id="AnaDfield-680"><a href="#AnaDfield-680"><span class="linenos">680</span></a>                <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_coupled</span><span class="p">:</span>
</span><span id="AnaDfield-681"><a href="#AnaDfield-681"><span class="linenos">681</span></a>                    <span class="n">lis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dic_inner_node</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">lname</span><span class="p">))</span>
</span><span id="AnaDfield-682"><a href="#AnaDfield-682"><span class="linenos">682</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ROOTED</span><span class="p">,</span> <span class="n">UNIQUE</span><span class="p">):</span>
</span><span id="AnaDfield-683"><a href="#AnaDfield-683"><span class="linenos">683</span></a>                <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span>
</span><span id="AnaDfield-684"><a href="#AnaDfield-684"><span class="linenos">684</span></a>                          <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">p_derived</span> <span class="o">==</span> <span class="bp">self</span> <span class="ow">and</span>
</span><span id="AnaDfield-685"><a href="#AnaDfield-685"><span class="linenos">685</span></a>                          <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">!=</span> <span class="n">COUPLED</span><span class="p">]</span>
</span><span id="AnaDfield-686"><a href="#AnaDfield-686"><span class="linenos">686</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distomin&#39;</span><span class="p">:</span>
</span><span id="AnaDfield-687"><a href="#AnaDfield-687"><span class="linenos">687</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span>
</span><span id="AnaDfield-688"><a href="#AnaDfield-688"><span class="linenos">688</span></a>                      <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">p_distomin</span> <span class="o">==</span> <span class="bp">self</span><span class="p">]</span>
</span><span id="AnaDfield-689"><a href="#AnaDfield-689"><span class="linenos">689</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distance&#39;</span><span class="p">:</span>
</span><span id="AnaDfield-690"><a href="#AnaDfield-690"><span class="linenos">690</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span>
</span><span id="AnaDfield-691"><a href="#AnaDfield-691"><span class="linenos">691</span></a>                      <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">p_distance</span> <span class="o">==</span> <span class="bp">self</span><span class="p">]</span>
</span><span id="AnaDfield-692"><a href="#AnaDfield-692"><span class="linenos">692</span></a>        <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">childs</span><span class="p">:</span>
</span><span id="AnaDfield-693"><a href="#AnaDfield-693"><span class="linenos">693</span></a>            <span class="n">lis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fld</span><span class="o">.</span><span class="n">dic_inner_node</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">lname</span><span class="p">))</span>
</span><span id="AnaDfield-694"><a href="#AnaDfield-694"><span class="linenos">694</span></a>        <span class="k">return</span> <span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">):</span> <span class="n">lis</span><span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>This class analyses structure and relationships of fields inside a dataset</p>

<p><em>Attributes</em> :</p>

<ul>
<li><strong>dataset</strong> : AnaDataset object where AnaDfield is included</li>
<li><strong>AnaField attributes</strong> : inheritance of AnaField object</li>
</ul>

<p><em>relationship (@property)</em></p>

<ul>
<li><code><a href="#AnaDfield.list_relations">list_relations</a></code></li>
<li><code><a href="#AnaDfield.list_p_derived">list_p_derived</a></code></li>
<li><code><a href="#AnaDfield.list_c_derived">list_c_derived</a></code></li>
<li><code><a href="#AnaDfield.list_coupled">list_coupled</a></code></li>
</ul>

<p><em>field (@property)</em></p>

<ul>
<li><code><a href="#AnaDfield.fields">fields</a></code></li>
<li><code><a href="#AnaDfield.p_derived">p_derived</a></code></li>
<li><code><a href="#AnaDfield.p_distance">p_distance</a></code></li>
<li><code><a href="#AnaDfield.p_distomin">p_distomin</a></code></li>
</ul>

<p><em>global (@property)</em></p>

<ul>
<li><code><a href="#AnaDfield.index">index</a></code></li>
<li><code><a href="#AnaDfield.dist_root">dist_root</a></code></li>
<li><code><a href="#AnaDfield.category">category</a></code></li>
</ul>

<p><em>global (instance methods)</em></p>

<ul>
<li><code><a href="#AnaDfield.ascendants">ascendants</a></code></li>
<li><code><a href="#AnaDfield.to_dict">to_dict</a></code></li>
<li><code><a href="#AnaDfield.view">view</a></code></li>
</ul>

<p><em>other instance methods</em></p>

<ul>
<li><code><a href="#AnaDfield.dic_inner_node">dic_inner_node</a></code></li>
</ul>
</div>


                            <div id="AnaDfield.__init__" class="classattr">
                                        <input id="AnaDfield.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AnaDfield</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">other</span>, </span><span class="param"><span class="n">dataset</span></span>)</span>

                <label class="view-source-button" for="AnaDfield.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDfield.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDfield.__init__-472"><a href="#AnaDfield.__init__-472"><span class="linenos">472</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">dataset</span><span class="p">):</span>
</span><span id="AnaDfield.__init__-473"><a href="#AnaDfield.__init__-473"><span class="linenos">473</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;AnaDfield is created by adding a AnaDataset link to an AnaField object.</span>
</span><span id="AnaDfield.__init__-474"><a href="#AnaDfield.__init__-474"><span class="linenos">474</span></a>
</span><span id="AnaDfield.__init__-475"><a href="#AnaDfield.__init__-475"><span class="linenos">475</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDfield.__init__-476"><a href="#AnaDfield.__init__-476"><span class="linenos">476</span></a>
</span><span id="AnaDfield.__init__-477"><a href="#AnaDfield.__init__-477"><span class="linenos">477</span></a><span class="sd">        - **other** : AnaField or AnaDfield to initialize attributes</span>
</span><span id="AnaDfield.__init__-478"><a href="#AnaDfield.__init__-478"><span class="linenos">478</span></a><span class="sd">        - **dataset** : AnaDataset which includes the AnaDfield</span>
</span><span id="AnaDfield.__init__-479"><a href="#AnaDfield.__init__-479"><span class="linenos">479</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDfield.__init__-480"><a href="#AnaDfield.__init__-480"><span class="linenos">480</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span> <span class="o">=</span> <span class="n">dataset</span>
</span></pre></div>


            <div class="docstring"><p>AnaDfield is created by adding a AnaDataset link to an AnaField object.</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>other</strong> : AnaField or AnaDfield to initialize attributes</li>
<li><strong>dataset</strong> : AnaDataset which includes the AnaDfield</li>
</ul>
</div>


                            </div>
                            <div id="AnaDfield.index" class="classattr">
                                <div class="attr variable">
            <span class="name">index</span>

        
    </div>
    <a class="headerlink" href="#AnaDfield.index"></a>
    
            <div class="docstring"><p>return the row of the field in the AnaDataset</p>
</div>


                            </div>
                            <div id="AnaDfield.fields" class="classattr">
                                <div class="attr variable">
            <span class="name">fields</span>

        
    </div>
    <a class="headerlink" href="#AnaDfield.fields"></a>
    
            <div class="docstring"><p>return the list of the fields included in the AnaDataset</p>
</div>


                            </div>
                            <div id="AnaDfield.list_relations" class="classattr">
                                <div class="attr variable">
            <span class="name">list_relations</span>

        
    </div>
    <a class="headerlink" href="#AnaDfield.list_relations"></a>
    
            <div class="docstring"><p>return the list of the relations with the AnaDfield</p>
</div>


                            </div>
                            <div id="AnaDfield.list_p_derived" class="classattr">
                                <div class="attr variable">
            <span class="name">list_p_derived</span>

        
    </div>
    <a class="headerlink" href="#AnaDfield.list_p_derived"></a>
    
            <div class="docstring"><p>return the list of the derived relations with the parents of AnaDfield</p>
</div>


                            </div>
                            <div id="AnaDfield.list_c_derived" class="classattr">
                                <div class="attr variable">
            <span class="name">list_c_derived</span>

        
    </div>
    <a class="headerlink" href="#AnaDfield.list_c_derived"></a>
    
            <div class="docstring"><p>return the list of the derived relations with the childs of AnaDfield</p>
</div>


                            </div>
                            <div id="AnaDfield.list_coupled" class="classattr">
                                <div class="attr variable">
            <span class="name">list_coupled</span>

        
    </div>
    <a class="headerlink" href="#AnaDfield.list_coupled"></a>
    
            <div class="docstring"><p>return the list of the coupled relations with the AnaDfield</p>
</div>


                            </div>
                            <div id="AnaDfield.dist_root" class="classattr">
                                <div class="attr variable">
            <span class="name">dist_root</span>

        
    </div>
    <a class="headerlink" href="#AnaDfield.dist_root"></a>
    
            <div class="docstring"><p>return the distance to the root field</p>
</div>


                            </div>
                            <div id="AnaDfield.category" class="classattr">
                                <div class="attr variable">
            <span class="name">category</span>

        
    </div>
    <a class="headerlink" href="#AnaDfield.category"></a>
    
            <div class="docstring"><p>return AnaDfield category (unique, rooted, coupled, derived, mixed)</p>
</div>


                            </div>
                            <div id="AnaDfield.p_derived" class="classattr">
                                <div class="attr variable">
            <span class="name">p_derived</span>

        
    </div>
    <a class="headerlink" href="#AnaDfield.p_derived"></a>
    
            <div class="docstring"><p>return the first derived or coupled parent of the AnaDfield</p>
</div>


                            </div>
                            <div id="AnaDfield.p_distance" class="classattr">
                                <div class="attr variable">
            <span class="name">p_distance</span>

        
    </div>
    <a class="headerlink" href="#AnaDfield.p_distance"></a>
    
            <div class="docstring"><p>return the first parent with minimal distance of the AnaDfield</p>
</div>


                            </div>
                            <div id="AnaDfield.p_distomin" class="classattr">
                                <div class="attr variable">
            <span class="name">p_distomin</span>

        
    </div>
    <a class="headerlink" href="#AnaDfield.p_distomin"></a>
    
            <div class="docstring"><p>return the first parent with minimal distomin of the AnaDfield</p>
</div>


                            </div>
                            <div id="AnaDfield.to_dict" class="classattr">
                                        <input id="AnaDfield.to_dict-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">to_dict</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;id&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AnaDfield.to_dict-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDfield.to_dict"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDfield.to_dict-599"><a href="#AnaDfield.to_dict-599"><span class="linenos">599</span></a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">):</span>
</span><span id="AnaDfield.to_dict-600"><a href="#AnaDfield.to_dict-600"><span class="linenos">600</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict with field attributes.</span>
</span><span id="AnaDfield.to_dict-601"><a href="#AnaDfield.to_dict-601"><span class="linenos">601</span></a>
</span><span id="AnaDfield.to_dict-602"><a href="#AnaDfield.to_dict-602"><span class="linenos">602</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDfield.to_dict-603"><a href="#AnaDfield.to_dict-603"><span class="linenos">603</span></a>
</span><span id="AnaDfield.to_dict-604"><a href="#AnaDfield.to_dict-604"><span class="linenos">604</span></a><span class="sd">        - **mode** : str (default &#39;id&#39;) - AnaDfield representation (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="AnaDfield.to_dict-605"><a href="#AnaDfield.to_dict-605"><span class="linenos">605</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDfield.to_dict-606"><a href="#AnaDfield.to_dict-606"><span class="linenos">606</span></a>        <span class="n">dic</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">full</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">notnone</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="AnaDfield.to_dict-607"><a href="#AnaDfield.to_dict-607"><span class="linenos">607</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">DISTROOT</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_root</span>
</span><span id="AnaDfield.to_dict-608"><a href="#AnaDfield.to_dict-608"><span class="linenos">608</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">NUM</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span>
</span><span id="AnaDfield.to_dict-609"><a href="#AnaDfield.to_dict-609"><span class="linenos">609</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">CATEGORY</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span>
</span><span id="AnaDfield.to_dict-610"><a href="#AnaDfield.to_dict-610"><span class="linenos">610</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">PDISTANCE</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_distance</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
</span><span id="AnaDfield.to_dict-611"><a href="#AnaDfield.to_dict-611"><span class="linenos">611</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">PDISTOMIN</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_distomin</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
</span><span id="AnaDfield.to_dict-612"><a href="#AnaDfield.to_dict-612"><span class="linenos">612</span></a>        <span class="n">dic</span><span class="p">[</span><span class="n">PDERIVED</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_derived</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
</span><span id="AnaDfield.to_dict-613"><a href="#AnaDfield.to_dict-613"><span class="linenos">613</span></a>        <span class="k">return</span> <span class="n">dic</span>
</span></pre></div>


            <div class="docstring"><p>return a dict with field attributes.</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>mode</strong> : str (default 'id') - AnaDfield representation ('field', 'id', 'index')</li>
</ul>
</div>


                            </div>
                            <div id="AnaDfield.view" class="classattr">
                                        <input id="AnaDfield.view-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">view</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AnaDfield.view-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDfield.view"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDfield.view-615"><a href="#AnaDfield.view-615"><span class="linenos">615</span></a>    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">):</span>
</span><span id="AnaDfield.view-616"><a href="#AnaDfield.view-616"><span class="linenos">616</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; return a representation of the AnaDfield</span>
</span><span id="AnaDfield.view-617"><a href="#AnaDfield.view-617"><span class="linenos">617</span></a>
</span><span id="AnaDfield.view-618"><a href="#AnaDfield.view-618"><span class="linenos">618</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDfield.view-619"><a href="#AnaDfield.view-619"><span class="linenos">619</span></a>
</span><span id="AnaDfield.view-620"><a href="#AnaDfield.view-620"><span class="linenos">620</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="AnaDfield.view-621"><a href="#AnaDfield.view-621"><span class="linenos">621</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDfield.view-622"><a href="#AnaDfield.view-622"><span class="linenos">622</span></a>        <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>return a representation of the AnaDfield</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>mode</strong> : str (default 'field') - AnaDfield representation ('field', 'id', 'index')</li>
</ul>
</div>


                            </div>
                            <div id="AnaDfield.ascendants" class="classattr">
                                        <input id="AnaDfield.ascendants-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ascendants</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">typeparent</span><span class="o">=</span><span class="s1">&#39;derived&#39;</span>, </span><span class="param"><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AnaDfield.ascendants-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDfield.ascendants"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDfield.ascendants-624"><a href="#AnaDfield.ascendants-624"><span class="linenos">624</span></a>    <span class="k">def</span> <span class="nf">ascendants</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">typeparent</span><span class="o">=</span><span class="s1">&#39;derived&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">):</span>
</span><span id="AnaDfield.ascendants-625"><a href="#AnaDfield.ascendants-625"><span class="linenos">625</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; return the list of the AnaDfield&#39;s ascendants in the family tree up to</span>
</span><span id="AnaDfield.ascendants-626"><a href="#AnaDfield.ascendants-626"><span class="linenos">626</span></a><span class="sd">        the root AnaDfield.</span>
</span><span id="AnaDfield.ascendants-627"><a href="#AnaDfield.ascendants-627"><span class="linenos">627</span></a>
</span><span id="AnaDfield.ascendants-628"><a href="#AnaDfield.ascendants-628"><span class="linenos">628</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDfield.ascendants-629"><a href="#AnaDfield.ascendants-629"><span class="linenos">629</span></a>
</span><span id="AnaDfield.ascendants-630"><a href="#AnaDfield.ascendants-630"><span class="linenos">630</span></a><span class="sd">        - **typeparent** : str (default &#39;derived&#39;) - &#39;derived&#39;, &#39;distance&#39; or &#39;distomin&#39;</span>
</span><span id="AnaDfield.ascendants-631"><a href="#AnaDfield.ascendants-631"><span class="linenos">631</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation</span>
</span><span id="AnaDfield.ascendants-632"><a href="#AnaDfield.ascendants-632"><span class="linenos">632</span></a><span class="sd">        (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="AnaDfield.ascendants-633"><a href="#AnaDfield.ascendants-633"><span class="linenos">633</span></a>
</span><span id="AnaDfield.ascendants-634"><a href="#AnaDfield.ascendants-634"><span class="linenos">634</span></a><span class="sd">        *Returns* : list of parents from closest to the most distant. Parents</span>
</span><span id="AnaDfield.ascendants-635"><a href="#AnaDfield.ascendants-635"><span class="linenos">635</span></a><span class="sd">        are represented with index, idfield, or object</span>
</span><span id="AnaDfield.ascendants-636"><a href="#AnaDfield.ascendants-636"><span class="linenos">636</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDfield.ascendants-637"><a href="#AnaDfield.ascendants-637"><span class="linenos">637</span></a>        <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span>
</span><span id="AnaDfield.ascendants-638"><a href="#AnaDfield.ascendants-638"><span class="linenos">638</span></a>        <span class="n">listparent</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AnaDfield.ascendants-639"><a href="#AnaDfield.ascendants-639"><span class="linenos">639</span></a>        <span class="k">while</span> <span class="n">parent</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
</span><span id="AnaDfield.ascendants-640"><a href="#AnaDfield.ascendants-640"><span class="linenos">640</span></a>            <span class="k">if</span> <span class="n">typeparent</span> <span class="o">==</span> <span class="s1">&#39;derived&#39;</span><span class="p">:</span>
</span><span id="AnaDfield.ascendants-641"><a href="#AnaDfield.ascendants-641"><span class="linenos">641</span></a>                <span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">p_derived</span>
</span><span id="AnaDfield.ascendants-642"><a href="#AnaDfield.ascendants-642"><span class="linenos">642</span></a>            <span class="k">elif</span> <span class="n">typeparent</span> <span class="o">==</span> <span class="s1">&#39;distance&#39;</span><span class="p">:</span>
</span><span id="AnaDfield.ascendants-643"><a href="#AnaDfield.ascendants-643"><span class="linenos">643</span></a>                <span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">p_distance</span>
</span><span id="AnaDfield.ascendants-644"><a href="#AnaDfield.ascendants-644"><span class="linenos">644</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AnaDfield.ascendants-645"><a href="#AnaDfield.ascendants-645"><span class="linenos">645</span></a>                <span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">p_distomin</span>
</span><span id="AnaDfield.ascendants-646"><a href="#AnaDfield.ascendants-646"><span class="linenos">646</span></a>            <span class="k">if</span> <span class="n">parent</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
</span><span id="AnaDfield.ascendants-647"><a href="#AnaDfield.ascendants-647"><span class="linenos">647</span></a>                <span class="n">listparent</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
</span><span id="AnaDfield.ascendants-648"><a href="#AnaDfield.ascendants-648"><span class="linenos">648</span></a>        <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">listparent</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>return the list of the AnaDfield's ascendants in the family tree up to
the root AnaDfield.</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>typeparent</strong> : str (default 'derived') - 'derived', 'distance' or 'distomin'</li>
<li><strong>mode</strong> : str (default 'field') - AnaDfield representation
('field', 'id', 'index')</li>
</ul>

<p><em>Returns</em> : list of parents from closest to the most distant. Parents
are represented with index, idfield, or object</p>
</div>


                            </div>
                            <div id="AnaDfield.dic_inner_node" class="classattr">
                                        <input id="AnaDfield.dic_inner_node-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">dic_inner_node</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">mode</span>, </span><span class="param"><span class="n">lname</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AnaDfield.dic_inner_node-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDfield.dic_inner_node"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDfield.dic_inner_node-650"><a href="#AnaDfield.dic_inner_node-650"><span class="linenos">650</span></a>    <span class="k">def</span> <span class="nf">dic_inner_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">lname</span><span class="p">):</span>
</span><span id="AnaDfield.dic_inner_node-651"><a href="#AnaDfield.dic_inner_node-651"><span class="linenos">651</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a child AnaDfield tree.</span>
</span><span id="AnaDfield.dic_inner_node-652"><a href="#AnaDfield.dic_inner_node-652"><span class="linenos">652</span></a>
</span><span id="AnaDfield.dic_inner_node-653"><a href="#AnaDfield.dic_inner_node-653"><span class="linenos">653</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDfield.dic_inner_node-654"><a href="#AnaDfield.dic_inner_node-654"><span class="linenos">654</span></a>
</span><span id="AnaDfield.dic_inner_node-655"><a href="#AnaDfield.dic_inner_node-655"><span class="linenos">655</span></a><span class="sd">        - **lname** : integer - maximal length of the names</span>
</span><span id="AnaDfield.dic_inner_node-656"><a href="#AnaDfield.dic_inner_node-656"><span class="linenos">656</span></a><span class="sd">        - **mode** : string (default &#39;derived&#39;) - kind of tree :</span>
</span><span id="AnaDfield.dic_inner_node-657"><a href="#AnaDfield.dic_inner_node-657"><span class="linenos">657</span></a><span class="sd">            &#39;derived&#39; : derived tree</span>
</span><span id="AnaDfield.dic_inner_node-658"><a href="#AnaDfield.dic_inner_node-658"><span class="linenos">658</span></a><span class="sd">            &#39;distance&#39;: min distance tree</span>
</span><span id="AnaDfield.dic_inner_node-659"><a href="#AnaDfield.dic_inner_node-659"><span class="linenos">659</span></a><span class="sd">            &#39;distomin&#39;: min distomin tree</span>
</span><span id="AnaDfield.dic_inner_node-660"><a href="#AnaDfield.dic_inner_node-660"><span class="linenos">660</span></a>
</span><span id="AnaDfield.dic_inner_node-661"><a href="#AnaDfield.dic_inner_node-661"><span class="linenos">661</span></a><span class="sd">        *Returns* : dict where key is a AnaDfield and value is the list of</span>
</span><span id="AnaDfield.dic_inner_node-662"><a href="#AnaDfield.dic_inner_node-662"><span class="linenos">662</span></a><span class="sd">        the childs.</span>
</span><span id="AnaDfield.dic_inner_node-663"><a href="#AnaDfield.dic_inner_node-663"><span class="linenos">663</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDfield.dic_inner_node-664"><a href="#AnaDfield.dic_inner_node-664"><span class="linenos">664</span></a>        <span class="n">adding</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="AnaDfield.dic_inner_node-665"><a href="#AnaDfield.dic_inner_node-665"><span class="linenos">665</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distance&#39;</span><span class="p">:</span>
</span><span id="AnaDfield.dic_inner_node-666"><a href="#AnaDfield.dic_inner_node-666"><span class="linenos">666</span></a>            <span class="n">rel_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_distance</span><span class="p">)</span>
</span><span id="AnaDfield.dic_inner_node-667"><a href="#AnaDfield.dic_inner_node-667"><span class="linenos">667</span></a>            <span class="n">adding</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rel_parent</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span>
</span><span id="AnaDfield.dic_inner_node-668"><a href="#AnaDfield.dic_inner_node-668"><span class="linenos">668</span></a>        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distomin&#39;</span><span class="p">:</span>
</span><span id="AnaDfield.dic_inner_node-669"><a href="#AnaDfield.dic_inner_node-669"><span class="linenos">669</span></a>            <span class="n">rel_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_distomin</span><span class="p">)</span>
</span><span id="AnaDfield.dic_inner_node-670"><a href="#AnaDfield.dic_inner_node-670"><span class="linenos">670</span></a>            <span class="n">adding</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rel_parent</span><span class="o">.</span><span class="n">distomin</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span>
</span><span id="AnaDfield.dic_inner_node-671"><a href="#AnaDfield.dic_inner_node-671"><span class="linenos">671</span></a>        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;derived&#39;</span><span class="p">:</span>
</span><span id="AnaDfield.dic_inner_node-672"><a href="#AnaDfield.dic_inner_node-672"><span class="linenos">672</span></a>            <span class="n">rel_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_derived</span><span class="p">)</span>
</span><span id="AnaDfield.dic_inner_node-673"><a href="#AnaDfield.dic_inner_node-673"><span class="linenos">673</span></a>            <span class="n">adding</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rel_parent</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span>
</span><span id="AnaDfield.dic_inner_node-674"><a href="#AnaDfield.dic_inner_node-674"><span class="linenos">674</span></a>        <span class="n">adding</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lencodec</span><span class="p">)</span>
</span><span id="AnaDfield.dic_inner_node-675"><a href="#AnaDfield.dic_inner_node-675"><span class="linenos">675</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idfield</span><span class="p">[:</span><span class="n">lname</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; (&#39;</span> <span class="o">+</span> <span class="n">adding</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
</span><span id="AnaDfield.dic_inner_node-676"><a href="#AnaDfield.dic_inner_node-676"><span class="linenos">676</span></a>        <span class="n">lis</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)]</span>
</span><span id="AnaDfield.dic_inner_node-677"><a href="#AnaDfield.dic_inner_node-677"><span class="linenos">677</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;derived&#39;</span><span class="p">:</span>
</span><span id="AnaDfield.dic_inner_node-678"><a href="#AnaDfield.dic_inner_node-678"><span class="linenos">678</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AnaDfield.dic_inner_node-679"><a href="#AnaDfield.dic_inner_node-679"><span class="linenos">679</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ROOTED</span><span class="p">,</span> <span class="n">COUPLED</span><span class="p">):</span>
</span><span id="AnaDfield.dic_inner_node-680"><a href="#AnaDfield.dic_inner_node-680"><span class="linenos">680</span></a>                <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_coupled</span><span class="p">:</span>
</span><span id="AnaDfield.dic_inner_node-681"><a href="#AnaDfield.dic_inner_node-681"><span class="linenos">681</span></a>                    <span class="n">lis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dic_inner_node</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">lname</span><span class="p">))</span>
</span><span id="AnaDfield.dic_inner_node-682"><a href="#AnaDfield.dic_inner_node-682"><span class="linenos">682</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ROOTED</span><span class="p">,</span> <span class="n">UNIQUE</span><span class="p">):</span>
</span><span id="AnaDfield.dic_inner_node-683"><a href="#AnaDfield.dic_inner_node-683"><span class="linenos">683</span></a>                <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span>
</span><span id="AnaDfield.dic_inner_node-684"><a href="#AnaDfield.dic_inner_node-684"><span class="linenos">684</span></a>                          <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">p_derived</span> <span class="o">==</span> <span class="bp">self</span> <span class="ow">and</span>
</span><span id="AnaDfield.dic_inner_node-685"><a href="#AnaDfield.dic_inner_node-685"><span class="linenos">685</span></a>                          <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">!=</span> <span class="n">COUPLED</span><span class="p">]</span>
</span><span id="AnaDfield.dic_inner_node-686"><a href="#AnaDfield.dic_inner_node-686"><span class="linenos">686</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distomin&#39;</span><span class="p">:</span>
</span><span id="AnaDfield.dic_inner_node-687"><a href="#AnaDfield.dic_inner_node-687"><span class="linenos">687</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span>
</span><span id="AnaDfield.dic_inner_node-688"><a href="#AnaDfield.dic_inner_node-688"><span class="linenos">688</span></a>                      <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">p_distomin</span> <span class="o">==</span> <span class="bp">self</span><span class="p">]</span>
</span><span id="AnaDfield.dic_inner_node-689"><a href="#AnaDfield.dic_inner_node-689"><span class="linenos">689</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distance&#39;</span><span class="p">:</span>
</span><span id="AnaDfield.dic_inner_node-690"><a href="#AnaDfield.dic_inner_node-690"><span class="linenos">690</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_relations</span>
</span><span id="AnaDfield.dic_inner_node-691"><a href="#AnaDfield.dic_inner_node-691"><span class="linenos">691</span></a>                      <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">p_distance</span> <span class="o">==</span> <span class="bp">self</span><span class="p">]</span>
</span><span id="AnaDfield.dic_inner_node-692"><a href="#AnaDfield.dic_inner_node-692"><span class="linenos">692</span></a>        <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">childs</span><span class="p">:</span>
</span><span id="AnaDfield.dic_inner_node-693"><a href="#AnaDfield.dic_inner_node-693"><span class="linenos">693</span></a>            <span class="n">lis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fld</span><span class="o">.</span><span class="n">dic_inner_node</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">lname</span><span class="p">))</span>
</span><span id="AnaDfield.dic_inner_node-694"><a href="#AnaDfield.dic_inner_node-694"><span class="linenos">694</span></a>        <span class="k">return</span> <span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">):</span> <span class="n">lis</span><span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>return a child AnaDfield tree.</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>lname</strong> : integer - maximal length of the names</li>
<li><strong>mode</strong> : string (default 'derived') - kind of tree :
'derived' : derived tree
'distance': min distance tree
'distomin': min distomin tree</li>
</ul>

<p><em>Returns</em> : dict where key is a AnaDfield and value is the list of
the childs.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#AnaField">AnaField</a></dt>
                                <dd id="AnaDfield.iscomplete" class="variable"><a href="#AnaField.iscomplete">iscomplete</a></dd>
                <dd id="AnaDfield.ratecodec" class="variable"><a href="#AnaField.ratecodec">ratecodec</a></dd>
                <dd id="AnaDfield.dmincodec" class="variable"><a href="#AnaField.dmincodec">dmincodec</a></dd>
                <dd id="AnaDfield.dmaxcodec" class="variable"><a href="#AnaField.dmaxcodec">dmaxcodec</a></dd>
                <dd id="AnaDfield.rancodec" class="variable"><a href="#AnaField.rancodec">rancodec</a></dd>
                <dd id="AnaDfield.typecodec" class="variable"><a href="#AnaField.typecodec">typecodec</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="AnaDataset">
                            <input id="AnaDataset-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AnaDataset</span>:

                <label class="view-source-button" for="AnaDataset-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDataset"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDataset-697"><a href="#AnaDataset-697"><span class="linenos"> 697</span></a><span class="k">class</span> <span class="nc">AnaDataset</span><span class="p">:</span>
</span><span id="AnaDataset-698"><a href="#AnaDataset-698"><span class="linenos"> 698</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;This class analyses the structure of a dataset.</span>
</span><span id="AnaDataset-699"><a href="#AnaDataset-699"><span class="linenos"> 699</span></a>
</span><span id="AnaDataset-700"><a href="#AnaDataset-700"><span class="linenos"> 700</span></a><span class="sd">    *Attributes* :</span>
</span><span id="AnaDataset-701"><a href="#AnaDataset-701"><span class="linenos"> 701</span></a>
</span><span id="AnaDataset-702"><a href="#AnaDataset-702"><span class="linenos"> 702</span></a><span class="sd">    - **iddataset** : string or integer - Id of the Dataset</span>
</span><span id="AnaDataset-703"><a href="#AnaDataset-703"><span class="linenos"> 703</span></a><span class="sd">    - **fields** : list of the AnaDfields included</span>
</span><span id="AnaDataset-704"><a href="#AnaDataset-704"><span class="linenos"> 704</span></a><span class="sd">    - **relations** : dict of the AnaRelations between two AnaDfields</span>
</span><span id="AnaDataset-705"><a href="#AnaDataset-705"><span class="linenos"> 705</span></a><span class="sd">    - **hashd** : string - update identifier</span>
</span><span id="AnaDataset-706"><a href="#AnaDataset-706"><span class="linenos"> 706</span></a>
</span><span id="AnaDataset-707"><a href="#AnaDataset-707"><span class="linenos"> 707</span></a><span class="sd">    *relationship (@property)*</span>
</span><span id="AnaDataset-708"><a href="#AnaDataset-708"><span class="linenos"> 708</span></a>
</span><span id="AnaDataset-709"><a href="#AnaDataset-709"><span class="linenos"> 709</span></a><span class="sd">    - `ana_relations`</span>
</span><span id="AnaDataset-710"><a href="#AnaDataset-710"><span class="linenos"> 710</span></a><span class="sd">    - `p_relations`</span>
</span><span id="AnaDataset-711"><a href="#AnaDataset-711"><span class="linenos"> 711</span></a>
</span><span id="AnaDataset-712"><a href="#AnaDataset-712"><span class="linenos"> 712</span></a><span class="sd">    *field (@property)*</span>
</span><span id="AnaDataset-713"><a href="#AnaDataset-713"><span class="linenos"> 713</span></a>
</span><span id="AnaDataset-714"><a href="#AnaDataset-714"><span class="linenos"> 714</span></a><span class="sd">    - `root`</span>
</span><span id="AnaDataset-715"><a href="#AnaDataset-715"><span class="linenos"> 715</span></a><span class="sd">    - `primary`</span>
</span><span id="AnaDataset-716"><a href="#AnaDataset-716"><span class="linenos"> 716</span></a><span class="sd">    - `secondary`</span>
</span><span id="AnaDataset-717"><a href="#AnaDataset-717"><span class="linenos"> 717</span></a><span class="sd">    - `unique`</span>
</span><span id="AnaDataset-718"><a href="#AnaDataset-718"><span class="linenos"> 718</span></a><span class="sd">    - `variable`</span>
</span><span id="AnaDataset-719"><a href="#AnaDataset-719"><span class="linenos"> 719</span></a>
</span><span id="AnaDataset-720"><a href="#AnaDataset-720"><span class="linenos"> 720</span></a><span class="sd">    *global (@property)*</span>
</span><span id="AnaDataset-721"><a href="#AnaDataset-721"><span class="linenos"> 721</span></a>
</span><span id="AnaDataset-722"><a href="#AnaDataset-722"><span class="linenos"> 722</span></a><span class="sd">    - `category`</span>
</span><span id="AnaDataset-723"><a href="#AnaDataset-723"><span class="linenos"> 723</span></a><span class="sd">    - `complete`</span>
</span><span id="AnaDataset-724"><a href="#AnaDataset-724"><span class="linenos"> 724</span></a><span class="sd">    - `dimension`</span>
</span><span id="AnaDataset-725"><a href="#AnaDataset-725"><span class="linenos"> 725</span></a>
</span><span id="AnaDataset-726"><a href="#AnaDataset-726"><span class="linenos"> 726</span></a><span class="sd">    *update (instance methods)*</span>
</span><span id="AnaDataset-727"><a href="#AnaDataset-727"><span class="linenos"> 727</span></a>
</span><span id="AnaDataset-728"><a href="#AnaDataset-728"><span class="linenos"> 728</span></a><span class="sd">    - `set_relations`</span>
</span><span id="AnaDataset-729"><a href="#AnaDataset-729"><span class="linenos"> 729</span></a>
</span><span id="AnaDataset-730"><a href="#AnaDataset-730"><span class="linenos"> 730</span></a>
</span><span id="AnaDataset-731"><a href="#AnaDataset-731"><span class="linenos"> 731</span></a><span class="sd">    *access (instance methods)*</span>
</span><span id="AnaDataset-732"><a href="#AnaDataset-732"><span class="linenos"> 732</span></a>
</span><span id="AnaDataset-733"><a href="#AnaDataset-733"><span class="linenos"> 733</span></a><span class="sd">    - `get_relation`</span>
</span><span id="AnaDataset-734"><a href="#AnaDataset-734"><span class="linenos"> 734</span></a><span class="sd">    - `dfield`</span>
</span><span id="AnaDataset-735"><a href="#AnaDataset-735"><span class="linenos"> 735</span></a>
</span><span id="AnaDataset-736"><a href="#AnaDataset-736"><span class="linenos"> 736</span></a><span class="sd">    *synthesis (instance methods)*</span>
</span><span id="AnaDataset-737"><a href="#AnaDataset-737"><span class="linenos"> 737</span></a>
</span><span id="AnaDataset-738"><a href="#AnaDataset-738"><span class="linenos"> 738</span></a><span class="sd">    - `tree`</span>
</span><span id="AnaDataset-739"><a href="#AnaDataset-739"><span class="linenos"> 739</span></a><span class="sd">    - `to_dict`</span>
</span><span id="AnaDataset-740"><a href="#AnaDataset-740"><span class="linenos"> 740</span></a><span class="sd">    - `indicator`</span>
</span><span id="AnaDataset-741"><a href="#AnaDataset-741"><span class="linenos"> 741</span></a><span class="sd">    - `partitions`</span>
</span><span id="AnaDataset-742"><a href="#AnaDataset-742"><span class="linenos"> 742</span></a><span class="sd">    - `field_partition`</span>
</span><span id="AnaDataset-743"><a href="#AnaDataset-743"><span class="linenos"> 743</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="AnaDataset-744"><a href="#AnaDataset-744"><span class="linenos"> 744</span></a>
</span><span id="AnaDataset-745"><a href="#AnaDataset-745"><span class="linenos"> 745</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">iddataset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="AnaDataset-746"><a href="#AnaDataset-746"><span class="linenos"> 746</span></a>                 <span class="n">leng</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hashd</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="AnaDataset-747"><a href="#AnaDataset-747"><span class="linenos"> 747</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Creation mode :</span>
</span><span id="AnaDataset-748"><a href="#AnaDataset-748"><span class="linenos"> 748</span></a><span class="sd">        - single dict attribute where keys are attributes name,</span>
</span><span id="AnaDataset-749"><a href="#AnaDataset-749"><span class="linenos"> 749</span></a><span class="sd">        - single AnaDataset attribute to make a copy</span>
</span><span id="AnaDataset-750"><a href="#AnaDataset-750"><span class="linenos"> 750</span></a><span class="sd">        - multiple attributes</span>
</span><span id="AnaDataset-751"><a href="#AnaDataset-751"><span class="linenos"> 751</span></a>
</span><span id="AnaDataset-752"><a href="#AnaDataset-752"><span class="linenos"> 752</span></a><span class="sd">         *Parameters (multiple attributes)*</span>
</span><span id="AnaDataset-753"><a href="#AnaDataset-753"><span class="linenos"> 753</span></a>
</span><span id="AnaDataset-754"><a href="#AnaDataset-754"><span class="linenos"> 754</span></a><span class="sd">        - **idfield** : string or integer - Id of the Field</span>
</span><span id="AnaDataset-755"><a href="#AnaDataset-755"><span class="linenos"> 755</span></a><span class="sd">        - **lencodec** : integer (default None) - length of the codec</span>
</span><span id="AnaDataset-756"><a href="#AnaDataset-756"><span class="linenos"> 756</span></a><span class="sd">        - **mincodec** : integer (default None) - number of different values</span>
</span><span id="AnaDataset-757"><a href="#AnaDataset-757"><span class="linenos"> 757</span></a><span class="sd">        - **maxcodec** : integer (default None) - length of the field</span>
</span><span id="AnaDataset-758"><a href="#AnaDataset-758"><span class="linenos"> 758</span></a><span class="sd">        - **hashf** : string (default None) - update identifier</span>
</span><span id="AnaDataset-759"><a href="#AnaDataset-759"><span class="linenos"> 759</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDataset-760"><a href="#AnaDataset-760"><span class="linenos"> 760</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="n">AnaDataset</span><span class="p">):</span>
</span><span id="AnaDataset-761"><a href="#AnaDataset-761"><span class="linenos"> 761</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">iddataset</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">iddataset</span>
</span><span id="AnaDataset-762"><a href="#AnaDataset-762"><span class="linenos"> 762</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">fields</span>
</span><span id="AnaDataset-763"><a href="#AnaDataset-763"><span class="linenos"> 763</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">relations</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">relations</span>
</span><span id="AnaDataset-764"><a href="#AnaDataset-764"><span class="linenos"> 764</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hashd</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">hashd</span>
</span><span id="AnaDataset-765"><a href="#AnaDataset-765"><span class="linenos"> 765</span></a>            <span class="k">return</span>
</span><span id="AnaDataset-766"><a href="#AnaDataset-766"><span class="linenos"> 766</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="AnaDataset-767"><a href="#AnaDataset-767"><span class="linenos"> 767</span></a>            <span class="n">iddataset</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">IDDATASET</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaDataset-768"><a href="#AnaDataset-768"><span class="linenos"> 768</span></a>            <span class="n">leng</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">LENGTH</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaDataset-769"><a href="#AnaDataset-769"><span class="linenos"> 769</span></a>            <span class="n">relations</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">RELATIONS</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaDataset-770"><a href="#AnaDataset-770"><span class="linenos"> 770</span></a>            <span class="n">hashd</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">HASHD</span><span class="p">)</span>
</span><span id="AnaDataset-771"><a href="#AnaDataset-771"><span class="linenos"> 771</span></a>            <span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">FIELDS</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaDataset-772"><a href="#AnaDataset-772"><span class="linenos"> 772</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">iddataset</span> <span class="o">=</span> <span class="n">iddataset</span>
</span><span id="AnaDataset-773"><a href="#AnaDataset-773"><span class="linenos"> 773</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">AnaDfield</span><span class="p">(</span><span class="n">AnaField</span><span class="p">(</span><span class="n">field</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="AnaDataset-774"><a href="#AnaDataset-774"><span class="linenos"> 774</span></a>                       <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">]</span> <span class="k">if</span> <span class="n">fields</span> <span class="k">else</span> <span class="p">[]</span>
</span><span id="AnaDataset-775"><a href="#AnaDataset-775"><span class="linenos"> 775</span></a>        <span class="k">if</span> <span class="n">leng</span><span class="p">:</span>
</span><span id="AnaDataset-776"><a href="#AnaDataset-776"><span class="linenos"> 776</span></a>            <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
</span><span id="AnaDataset-777"><a href="#AnaDataset-777"><span class="linenos"> 777</span></a>                <span class="n">fld</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">=</span> <span class="n">leng</span>
</span><span id="AnaDataset-778"><a href="#AnaDataset-778"><span class="linenos"> 778</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">relations</span> <span class="o">=</span> <span class="p">{</span><span class="n">field</span><span class="p">:</span> <span class="p">{}</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">}</span>
</span><span id="AnaDataset-779"><a href="#AnaDataset-779"><span class="linenos"> 779</span></a>        <span class="k">if</span> <span class="n">relations</span><span class="p">:</span>
</span><span id="AnaDataset-780"><a href="#AnaDataset-780"><span class="linenos"> 780</span></a>            <span class="k">for</span> <span class="n">fld</span><span class="p">,</span> <span class="n">dic_relation</span> <span class="ow">in</span> <span class="n">relations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="AnaDataset-781"><a href="#AnaDataset-781"><span class="linenos"> 781</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">set_relations</span><span class="p">(</span><span class="n">fld</span><span class="p">,</span> <span class="n">dic_relation</span><span class="p">)</span>
</span><span id="AnaDataset-782"><a href="#AnaDataset-782"><span class="linenos"> 782</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hashd</span> <span class="o">=</span> <span class="n">hashd</span>
</span><span id="AnaDataset-783"><a href="#AnaDataset-783"><span class="linenos"> 783</span></a>
</span><span id="AnaDataset-784"><a href="#AnaDataset-784"><span class="linenos"> 784</span></a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDataset-785"><a href="#AnaDataset-785"><span class="linenos"> 785</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;length of the AnaDataset (len of the AnaDfields included)&#39;&#39;&#39;</span>
</span><span id="AnaDataset-786"><a href="#AnaDataset-786"><span class="linenos"> 786</span></a>        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fld</span><span class="p">)</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
</span><span id="AnaDataset-787"><a href="#AnaDataset-787"><span class="linenos"> 787</span></a>
</span><span id="AnaDataset-788"><a href="#AnaDataset-788"><span class="linenos"> 788</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="AnaDataset-789"><a href="#AnaDataset-789"><span class="linenos"> 789</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; equal if class and values are equal&#39;&#39;&#39;</span>
</span><span id="AnaDataset-790"><a href="#AnaDataset-790"><span class="linenos"> 790</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">and</span> \
</span><span id="AnaDataset-791"><a href="#AnaDataset-791"><span class="linenos"> 791</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">fields</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">relations</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">relations</span> <span class="ow">and</span> \
</span><span id="AnaDataset-792"><a href="#AnaDataset-792"><span class="linenos"> 792</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">iddataset</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">iddataset</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashd</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">hashd</span>
</span><span id="AnaDataset-793"><a href="#AnaDataset-793"><span class="linenos"> 793</span></a>
</span><span id="AnaDataset-794"><a href="#AnaDataset-794"><span class="linenos"> 794</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDataset-795"><a href="#AnaDataset-795"><span class="linenos"> 795</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return hash value (sum of attributes hash)&#39;&#39;&#39;</span>
</span><span id="AnaDataset-796"><a href="#AnaDataset-796"><span class="linenos"> 796</span></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iddataset</span><span class="p">)</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">fld</span><span class="p">)</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span> <span class="o">+</span> \
</span><span id="AnaDataset-797"><a href="#AnaDataset-797"><span class="linenos"> 797</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">rel</span><span class="p">)</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">relations</span><span class="p">)</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hashd</span><span class="p">)</span>
</span><span id="AnaDataset-798"><a href="#AnaDataset-798"><span class="linenos"> 798</span></a>
</span><span id="AnaDataset-799"><a href="#AnaDataset-799"><span class="linenos"> 799</span></a>    <span class="nd">@property</span>
</span><span id="AnaDataset-800"><a href="#AnaDataset-800"><span class="linenos"> 800</span></a>    <span class="k">def</span> <span class="nf">category</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDataset-801"><a href="#AnaDataset-801"><span class="linenos"> 801</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a list of AnaDfield category (unique, rooted, coupled, derived, mixed)&#39;&#39;&#39;</span>
</span><span id="AnaDataset-802"><a href="#AnaDataset-802"><span class="linenos"> 802</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">fld</span><span class="o">.</span><span class="n">category</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">]</span>
</span><span id="AnaDataset-803"><a href="#AnaDataset-803"><span class="linenos"> 803</span></a>
</span><span id="AnaDataset-804"><a href="#AnaDataset-804"><span class="linenos"> 804</span></a>    <span class="nd">@property</span>
</span><span id="AnaDataset-805"><a href="#AnaDataset-805"><span class="linenos"> 805</span></a>    <span class="k">def</span> <span class="nf">ana_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDataset-806"><a href="#AnaDataset-806"><span class="linenos"> 806</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the list of AnaRelation included&#39;&#39;&#39;</span>
</span><span id="AnaDataset-807"><a href="#AnaDataset-807"><span class="linenos"> 807</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">fldrel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">fldrel</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
</span><span id="AnaDataset-808"><a href="#AnaDataset-808"><span class="linenos"> 808</span></a>
</span><span id="AnaDataset-809"><a href="#AnaDataset-809"><span class="linenos"> 809</span></a>    <span class="nd">@property</span>
</span><span id="AnaDataset-810"><a href="#AnaDataset-810"><span class="linenos"> 810</span></a>    <span class="k">def</span> <span class="nf">p_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDataset-811"><a href="#AnaDataset-811"><span class="linenos"> 811</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the list of oriented AnaRelation (parent first, child second)&#39;&#39;&#39;</span>
</span><span id="AnaDataset-812"><a href="#AnaDataset-812"><span class="linenos"> 812</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ana_relations</span> <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">parent_child</span><span class="p">]</span>
</span><span id="AnaDataset-813"><a href="#AnaDataset-813"><span class="linenos"> 813</span></a>
</span><span id="AnaDataset-814"><a href="#AnaDataset-814"><span class="linenos"> 814</span></a>    <span class="nd">@property</span>
</span><span id="AnaDataset-815"><a href="#AnaDataset-815"><span class="linenos"> 815</span></a>    <span class="k">def</span> <span class="nf">root</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDataset-816"><a href="#AnaDataset-816"><span class="linenos"> 816</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the root AnaDfield&#39;&#39;&#39;</span>
</span><span id="AnaDataset-817"><a href="#AnaDataset-817"><span class="linenos"> 817</span></a>        <span class="n">len_self</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="AnaDataset-818"><a href="#AnaDataset-818"><span class="linenos"> 818</span></a>        <span class="k">return</span> <span class="n">AnaDfield</span><span class="p">(</span><span class="n">AnaField</span><span class="p">(</span><span class="n">ROOT</span><span class="p">,</span> <span class="n">len_self</span><span class="p">,</span> <span class="n">len_self</span><span class="p">,</span> <span class="n">len_self</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="AnaDataset-819"><a href="#AnaDataset-819"><span class="linenos"> 819</span></a>
</span><span id="AnaDataset-820"><a href="#AnaDataset-820"><span class="linenos"> 820</span></a>    <span class="nd">@property</span>
</span><span id="AnaDataset-821"><a href="#AnaDataset-821"><span class="linenos"> 821</span></a>    <span class="k">def</span> <span class="nf">primary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDataset-822"><a href="#AnaDataset-822"><span class="linenos"> 822</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the first partition of the partitions&#39;&#39;&#39;</span>
</span><span id="AnaDataset-823"><a href="#AnaDataset-823"><span class="linenos"> 823</span></a>        <span class="n">part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">partitions</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="AnaDataset-824"><a href="#AnaDataset-824"><span class="linenos"> 824</span></a>        <span class="k">return</span> <span class="n">part</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">part</span> <span class="k">else</span> <span class="p">[]</span>
</span><span id="AnaDataset-825"><a href="#AnaDataset-825"><span class="linenos"> 825</span></a>
</span><span id="AnaDataset-826"><a href="#AnaDataset-826"><span class="linenos"> 826</span></a>    <span class="nd">@property</span>
</span><span id="AnaDataset-827"><a href="#AnaDataset-827"><span class="linenos"> 827</span></a>    <span class="k">def</span> <span class="nf">complete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDataset-828"><a href="#AnaDataset-828"><span class="linenos"> 828</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return True if the dimension is not 0&#39;&#39;&#39;</span>
</span><span id="AnaDataset-829"><a href="#AnaDataset-829"><span class="linenos"> 829</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimension</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="AnaDataset-830"><a href="#AnaDataset-830"><span class="linenos"> 830</span></a>
</span><span id="AnaDataset-831"><a href="#AnaDataset-831"><span class="linenos"> 831</span></a>    <span class="nd">@property</span>
</span><span id="AnaDataset-832"><a href="#AnaDataset-832"><span class="linenos"> 832</span></a>    <span class="k">def</span> <span class="nf">dimension</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDataset-833"><a href="#AnaDataset-833"><span class="linenos"> 833</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the highest partition lenght&#39;&#39;&#39;</span>
</span><span id="AnaDataset-834"><a href="#AnaDataset-834"><span class="linenos"> 834</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary</span><span class="p">)</span>
</span><span id="AnaDataset-835"><a href="#AnaDataset-835"><span class="linenos"> 835</span></a>
</span><span id="AnaDataset-836"><a href="#AnaDataset-836"><span class="linenos"> 836</span></a>    <span class="nd">@property</span>
</span><span id="AnaDataset-837"><a href="#AnaDataset-837"><span class="linenos"> 837</span></a>    <span class="k">def</span> <span class="nf">secondary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDataset-838"><a href="#AnaDataset-838"><span class="linenos"> 838</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the derived ou coupled fields from primary&#39;&#39;&#39;</span>
</span><span id="AnaDataset-839"><a href="#AnaDataset-839"><span class="linenos"> 839</span></a>        <span class="n">secondary</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AnaDataset-840"><a href="#AnaDataset-840"><span class="linenos"> 840</span></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary</span><span class="p">:</span>
</span><span id="AnaDataset-841"><a href="#AnaDataset-841"><span class="linenos"> 841</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_add_child</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">secondary</span><span class="p">)</span>
</span><span id="AnaDataset-842"><a href="#AnaDataset-842"><span class="linenos"> 842</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">secondary</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary</span><span class="p">]</span>
</span><span id="AnaDataset-843"><a href="#AnaDataset-843"><span class="linenos"> 843</span></a>
</span><span id="AnaDataset-844"><a href="#AnaDataset-844"><span class="linenos"> 844</span></a>    <span class="nd">@property</span>
</span><span id="AnaDataset-845"><a href="#AnaDataset-845"><span class="linenos"> 845</span></a>    <span class="k">def</span> <span class="nf">unique</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDataset-846"><a href="#AnaDataset-846"><span class="linenos"> 846</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the unique fields&#39;&#39;&#39;</span>
</span><span id="AnaDataset-847"><a href="#AnaDataset-847"><span class="linenos"> 847</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">UNIQUE</span><span class="p">]</span>
</span><span id="AnaDataset-848"><a href="#AnaDataset-848"><span class="linenos"> 848</span></a>
</span><span id="AnaDataset-849"><a href="#AnaDataset-849"><span class="linenos"> 849</span></a>    <span class="nd">@property</span>
</span><span id="AnaDataset-850"><a href="#AnaDataset-850"><span class="linenos"> 850</span></a>    <span class="k">def</span> <span class="nf">variable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDataset-851"><a href="#AnaDataset-851"><span class="linenos"> 851</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the variable fields&#39;&#39;&#39;</span>
</span><span id="AnaDataset-852"><a href="#AnaDataset-852"><span class="linenos"> 852</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span>
</span><span id="AnaDataset-853"><a href="#AnaDataset-853"><span class="linenos"> 853</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">secondary</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique</span><span class="p">]</span>
</span><span id="AnaDataset-854"><a href="#AnaDataset-854"><span class="linenos"> 854</span></a>
</span><span id="AnaDataset-855"><a href="#AnaDataset-855"><span class="linenos"> 855</span></a>    <span class="k">def</span> <span class="nf">set_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">dic_relations</span><span class="p">):</span>
</span><span id="AnaDataset-856"><a href="#AnaDataset-856"><span class="linenos"> 856</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Add relations in the AnaDataset from a dict.</span>
</span><span id="AnaDataset-857"><a href="#AnaDataset-857"><span class="linenos"> 857</span></a>
</span><span id="AnaDataset-858"><a href="#AnaDataset-858"><span class="linenos"> 858</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDataset-859"><a href="#AnaDataset-859"><span class="linenos"> 859</span></a>
</span><span id="AnaDataset-860"><a href="#AnaDataset-860"><span class="linenos"> 860</span></a><span class="sd">        - **field** : AnaDfield, AnaField or str (idfield) - first relation AnaDfield</span>
</span><span id="AnaDataset-861"><a href="#AnaDataset-861"><span class="linenos"> 861</span></a><span class="sd">        - **dic_relations** : dict - key is the second relation AnaDfield and</span>
</span><span id="AnaDataset-862"><a href="#AnaDataset-862"><span class="linenos"> 862</span></a><span class="sd">        value is the dist value or teh list [dist, distrib]</span>
</span><span id="AnaDataset-863"><a href="#AnaDataset-863"><span class="linenos"> 863</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDataset-864"><a href="#AnaDataset-864"><span class="linenos"> 864</span></a>        <span class="n">fld</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
</span><span id="AnaDataset-865"><a href="#AnaDataset-865"><span class="linenos"> 865</span></a>        <span class="k">for</span> <span class="n">other</span><span class="p">,</span> <span class="n">dist</span> <span class="ow">in</span> <span class="n">dic_relations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="AnaDataset-866"><a href="#AnaDataset-866"><span class="linenos"> 866</span></a>            <span class="n">oth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="AnaDataset-867"><a href="#AnaDataset-867"><span class="linenos"> 867</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">relations</span><span class="p">[</span><span class="n">fld</span><span class="p">][</span><span class="n">oth</span><span class="p">]</span> <span class="o">=</span> <span class="n">AnaRelation</span><span class="p">([</span><span class="n">fld</span><span class="p">,</span> <span class="n">oth</span><span class="p">],</span> <span class="n">dist</span><span class="p">)</span>
</span><span id="AnaDataset-868"><a href="#AnaDataset-868"><span class="linenos"> 868</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">relations</span><span class="p">[</span><span class="n">oth</span><span class="p">][</span><span class="n">fld</span><span class="p">]</span> <span class="o">=</span> <span class="n">AnaRelation</span><span class="p">([</span><span class="n">oth</span><span class="p">,</span> <span class="n">fld</span><span class="p">],</span> <span class="n">dist</span><span class="p">)</span>
</span><span id="AnaDataset-869"><a href="#AnaDataset-869"><span class="linenos"> 869</span></a>
</span><span id="AnaDataset-870"><a href="#AnaDataset-870"><span class="linenos"> 870</span></a>    <span class="k">def</span> <span class="nf">get_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fld1</span><span class="p">,</span> <span class="n">fld2</span><span class="p">):</span>
</span><span id="AnaDataset-871"><a href="#AnaDataset-871"><span class="linenos"> 871</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Return AnaRelation between fld1 and fld2.</span>
</span><span id="AnaDataset-872"><a href="#AnaDataset-872"><span class="linenos"> 872</span></a>
</span><span id="AnaDataset-873"><a href="#AnaDataset-873"><span class="linenos"> 873</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDataset-874"><a href="#AnaDataset-874"><span class="linenos"> 874</span></a>
</span><span id="AnaDataset-875"><a href="#AnaDataset-875"><span class="linenos"> 875</span></a><span class="sd">        - **fld1** : AnaDfield, AnaField, int or str (idfield) - first relation AnaDfield</span>
</span><span id="AnaDataset-876"><a href="#AnaDataset-876"><span class="linenos"> 876</span></a><span class="sd">        - **fld2** : AnaDfield, AnaField, int or str (idfield) - second relation AnaDfield</span>
</span><span id="AnaDataset-877"><a href="#AnaDataset-877"><span class="linenos"> 877</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDataset-878"><a href="#AnaDataset-878"><span class="linenos"> 878</span></a>        <span class="n">fl1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">fld1</span><span class="p">)</span>
</span><span id="AnaDataset-879"><a href="#AnaDataset-879"><span class="linenos"> 879</span></a>        <span class="n">fl2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">fld2</span><span class="p">)</span>
</span><span id="AnaDataset-880"><a href="#AnaDataset-880"><span class="linenos"> 880</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="ow">in</span> <span class="p">[</span><span class="n">fl1</span><span class="p">,</span> <span class="n">fl2</span><span class="p">]:</span>
</span><span id="AnaDataset-881"><a href="#AnaDataset-881"><span class="linenos"> 881</span></a>            <span class="k">return</span> <span class="n">AnaRelation</span><span class="p">([</span><span class="n">fl1</span><span class="p">,</span> <span class="n">fl2</span><span class="p">],</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="AnaDataset-882"><a href="#AnaDataset-882"><span class="linenos"> 882</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">relations</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">fld1</span><span class="p">)][</span><span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">fld2</span><span class="p">)]</span>
</span><span id="AnaDataset-883"><a href="#AnaDataset-883"><span class="linenos"> 883</span></a>
</span><span id="AnaDataset-884"><a href="#AnaDataset-884"><span class="linenos"> 884</span></a>    <span class="k">def</span> <span class="nf">dfield</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fld</span><span class="p">):</span>
</span><span id="AnaDataset-885"><a href="#AnaDataset-885"><span class="linenos"> 885</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the AnaDfield matching with fld. Fld is str, int, AnaDfield or AnaField&#39;&#39;&#39;</span>
</span><span id="AnaDataset-886"><a href="#AnaDataset-886"><span class="linenos"> 886</span></a>        <span class="k">if</span> <span class="n">fld</span> <span class="ow">in</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ROOT</span><span class="p">):</span>
</span><span id="AnaDataset-887"><a href="#AnaDataset-887"><span class="linenos"> 887</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span>
</span><span id="AnaDataset-888"><a href="#AnaDataset-888"><span class="linenos"> 888</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fld</span><span class="p">,</span> <span class="n">AnaDfield</span><span class="p">):</span>
</span><span id="AnaDataset-889"><a href="#AnaDataset-889"><span class="linenos"> 889</span></a>            <span class="k">return</span> <span class="n">fld</span>
</span><span id="AnaDataset-890"><a href="#AnaDataset-890"><span class="linenos"> 890</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fld</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="AnaDataset-891"><a href="#AnaDataset-891"><span class="linenos"> 891</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">fld</span><span class="p">]</span>
</span><span id="AnaDataset-892"><a href="#AnaDataset-892"><span class="linenos"> 892</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fld</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="AnaDataset-893"><a href="#AnaDataset-893"><span class="linenos"> 893</span></a>            <span class="k">if</span> <span class="n">fld</span> <span class="ow">in</span> <span class="p">[</span><span class="n">dfld</span><span class="o">.</span><span class="n">idfield</span> <span class="k">for</span> <span class="n">dfld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">]:</span>
</span><span id="AnaDataset-894"><a href="#AnaDataset-894"><span class="linenos"> 894</span></a>                <span class="k">return</span> <span class="p">[</span><span class="n">dfld</span> <span class="k">for</span> <span class="n">dfld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">dfld</span><span class="o">.</span><span class="n">idfield</span> <span class="o">==</span> <span class="n">fld</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AnaDataset-895"><a href="#AnaDataset-895"><span class="linenos"> 895</span></a>            <span class="c1"># return self.root</span>
</span><span id="AnaDataset-896"><a href="#AnaDataset-896"><span class="linenos"> 896</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="AnaDataset-897"><a href="#AnaDataset-897"><span class="linenos"> 897</span></a>        <span class="k">return</span> <span class="n">AnaDfield</span><span class="p">(</span><span class="n">fld</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="AnaDataset-898"><a href="#AnaDataset-898"><span class="linenos"> 898</span></a>
</span><span id="AnaDataset-899"><a href="#AnaDataset-899"><span class="linenos"> 899</span></a>    <span class="k">def</span> <span class="nf">tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;derived&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">lname</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="AnaDataset-900"><a href="#AnaDataset-900"><span class="linenos"> 900</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a string with a tree of derived Field.</span>
</span><span id="AnaDataset-901"><a href="#AnaDataset-901"><span class="linenos"> 901</span></a>
</span><span id="AnaDataset-902"><a href="#AnaDataset-902"><span class="linenos"> 902</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDataset-903"><a href="#AnaDataset-903"><span class="linenos"> 903</span></a>
</span><span id="AnaDataset-904"><a href="#AnaDataset-904"><span class="linenos"> 904</span></a><span class="sd">        - **lname** : integer (default 20) - length of the names</span>
</span><span id="AnaDataset-905"><a href="#AnaDataset-905"><span class="linenos"> 905</span></a><span class="sd">        - **width** : integer (default 5) - length of the lines</span>
</span><span id="AnaDataset-906"><a href="#AnaDataset-906"><span class="linenos"> 906</span></a><span class="sd">        - **string** : boolean (default True) - if True return str else return dict</span>
</span><span id="AnaDataset-907"><a href="#AnaDataset-907"><span class="linenos"> 907</span></a><span class="sd">        - **mode** : string (default &#39;derived&#39;) - kind of tree :</span>
</span><span id="AnaDataset-908"><a href="#AnaDataset-908"><span class="linenos"> 908</span></a><span class="sd">            &#39;derived&#39; : derived tree</span>
</span><span id="AnaDataset-909"><a href="#AnaDataset-909"><span class="linenos"> 909</span></a><span class="sd">            &#39;distance&#39;: min distance tree</span>
</span><span id="AnaDataset-910"><a href="#AnaDataset-910"><span class="linenos"> 910</span></a><span class="sd">            &#39;distomin&#39;: min distomin tree</span>
</span><span id="AnaDataset-911"><a href="#AnaDataset-911"><span class="linenos"> 911</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDataset-912"><a href="#AnaDataset-912"><span class="linenos"> 912</span></a>        <span class="n">lis</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;root-&#39;</span> <span class="o">+</span> <span class="n">mode</span> <span class="o">+</span> <span class="s1">&#39;*(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">]</span>
</span><span id="AnaDataset-913"><a href="#AnaDataset-913"><span class="linenos"> 913</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distance&#39;</span><span class="p">:</span>
</span><span id="AnaDataset-914"><a href="#AnaDataset-914"><span class="linenos"> 914</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">p_distance</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">]</span>
</span><span id="AnaDataset-915"><a href="#AnaDataset-915"><span class="linenos"> 915</span></a>        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distomin&#39;</span><span class="p">:</span>
</span><span id="AnaDataset-916"><a href="#AnaDataset-916"><span class="linenos"> 916</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">p_distomin</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">]</span>
</span><span id="AnaDataset-917"><a href="#AnaDataset-917"><span class="linenos"> 917</span></a>        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;derived&#39;</span><span class="p">:</span>
</span><span id="AnaDataset-918"><a href="#AnaDataset-918"><span class="linenos"> 918</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">p_derived</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">]</span>
</span><span id="AnaDataset-919"><a href="#AnaDataset-919"><span class="linenos"> 919</span></a>        <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">childs</span><span class="p">:</span>
</span><span id="AnaDataset-920"><a href="#AnaDataset-920"><span class="linenos"> 920</span></a>            <span class="n">lis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fld</span><span class="o">.</span><span class="n">dic_inner_node</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">lname</span><span class="p">))</span>
</span><span id="AnaDataset-921"><a href="#AnaDataset-921"><span class="linenos"> 921</span></a>        <span class="n">tree</span> <span class="o">=</span> <span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">):</span> <span class="n">lis</span><span class="p">}</span>
</span><span id="AnaDataset-922"><a href="#AnaDataset-922"><span class="linenos"> 922</span></a>        <span class="k">if</span> <span class="n">string</span><span class="p">:</span>
</span><span id="AnaDataset-923"><a href="#AnaDataset-923"><span class="linenos"> 923</span></a>            <span class="n">tre</span> <span class="o">=</span> <span class="n">pprint</span><span class="o">.</span><span class="n">pformat</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
</span><span id="AnaDataset-924"><a href="#AnaDataset-924"><span class="linenos"> 924</span></a>            <span class="n">tre</span> <span class="o">=</span> <span class="n">tre</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;---&#39;</span><span class="p">,</span> <span class="s1">&#39; - &#39;</span><span class="p">)</span>
</span><span id="AnaDataset-925"><a href="#AnaDataset-925"><span class="linenos"> 925</span></a>            <span class="n">tre</span> <span class="o">=</span> <span class="n">tre</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span id="AnaDataset-926"><a href="#AnaDataset-926"><span class="linenos"> 926</span></a>            <span class="n">tre</span> <span class="o">=</span> <span class="n">tre</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span id="AnaDataset-927"><a href="#AnaDataset-927"><span class="linenos"> 927</span></a>            <span class="k">for</span> <span class="n">car</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">]:</span>
</span><span id="AnaDataset-928"><a href="#AnaDataset-928"><span class="linenos"> 928</span></a>                <span class="n">tre</span> <span class="o">=</span> <span class="n">tre</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">car</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="AnaDataset-929"><a href="#AnaDataset-929"><span class="linenos"> 929</span></a>            <span class="k">return</span> <span class="n">tre</span>
</span><span id="AnaDataset-930"><a href="#AnaDataset-930"><span class="linenos"> 930</span></a>        <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">clean_dic</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span id="AnaDataset-931"><a href="#AnaDataset-931"><span class="linenos"> 931</span></a>
</span><span id="AnaDataset-932"><a href="#AnaDataset-932"><span class="linenos"> 932</span></a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relations</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="AnaDataset-933"><a href="#AnaDataset-933"><span class="linenos"> 933</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict with fields attributes and optionaly relations attributes.</span>
</span><span id="AnaDataset-934"><a href="#AnaDataset-934"><span class="linenos"> 934</span></a>
</span><span id="AnaDataset-935"><a href="#AnaDataset-935"><span class="linenos"> 935</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDataset-936"><a href="#AnaDataset-936"><span class="linenos"> 936</span></a>
</span><span id="AnaDataset-937"><a href="#AnaDataset-937"><span class="linenos"> 937</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation</span>
</span><span id="AnaDataset-938"><a href="#AnaDataset-938"><span class="linenos"> 938</span></a><span class="sd">        (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="AnaDataset-939"><a href="#AnaDataset-939"><span class="linenos"> 939</span></a><span class="sd">        - **relations** : boolean (default: False) - if False return a list of fields,</span>
</span><span id="AnaDataset-940"><a href="#AnaDataset-940"><span class="linenos"> 940</span></a><span class="sd">        if True return a dict &#39;{&quot;fields&quot;: &lt;list of fields&gt;, &quot;relations&quot;: &lt;list of relations&gt;}&#39;</span>
</span><span id="AnaDataset-941"><a href="#AnaDataset-941"><span class="linenos"> 941</span></a><span class="sd">        - **keys** : string, list or tuple - list of keys or single key to return</span>
</span><span id="AnaDataset-942"><a href="#AnaDataset-942"><span class="linenos"> 942</span></a><span class="sd">        if &#39;all&#39; or None, all keys are returned</span>
</span><span id="AnaDataset-943"><a href="#AnaDataset-943"><span class="linenos"> 943</span></a><span class="sd">        if list, only keys in list are returned</span>
</span><span id="AnaDataset-944"><a href="#AnaDataset-944"><span class="linenos"> 944</span></a><span class="sd">        if string, only values associated to the string(key) are returned&#39;&#39;&#39;</span>
</span><span id="AnaDataset-945"><a href="#AnaDataset-945"><span class="linenos"> 945</span></a>        <span class="n">fields</span> <span class="o">=</span> <span class="n">Util</span><span class="o">.</span><span class="n">filter_dic</span><span class="p">([</span><span class="n">fld</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>
</span><span id="AnaDataset-946"><a href="#AnaDataset-946"><span class="linenos"> 946</span></a>                                 <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">],</span> <span class="n">keys</span><span class="p">)</span>
</span><span id="AnaDataset-947"><a href="#AnaDataset-947"><span class="linenos"> 947</span></a>        <span class="n">leng</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
</span><span id="AnaDataset-948"><a href="#AnaDataset-948"><span class="linenos"> 948</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">relations</span><span class="p">:</span>
</span><span id="AnaDataset-949"><a href="#AnaDataset-949"><span class="linenos"> 949</span></a>            <span class="k">return</span> <span class="n">fields</span>
</span><span id="AnaDataset-950"><a href="#AnaDataset-950"><span class="linenos"> 950</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="p">,</span> <span class="s1">&#39;relations&#39;</span><span class="p">:</span>
</span><span id="AnaDataset-951"><a href="#AnaDataset-951"><span class="linenos"> 951</span></a>                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_relation</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">full</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>
</span><span id="AnaDataset-952"><a href="#AnaDataset-952"><span class="linenos"> 952</span></a>                 <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">leng</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">leng</span><span class="p">)]}</span>
</span><span id="AnaDataset-953"><a href="#AnaDataset-953"><span class="linenos"> 953</span></a>
</span><span id="AnaDataset-954"><a href="#AnaDataset-954"><span class="linenos"> 954</span></a>    <span class="k">def</span> <span class="nf">partitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">distributed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="AnaDataset-955"><a href="#AnaDataset-955"><span class="linenos"> 955</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a list of available partitions (the first is highest).</span>
</span><span id="AnaDataset-956"><a href="#AnaDataset-956"><span class="linenos"> 956</span></a>
</span><span id="AnaDataset-957"><a href="#AnaDataset-957"><span class="linenos"> 957</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDataset-958"><a href="#AnaDataset-958"><span class="linenos"> 958</span></a>
</span><span id="AnaDataset-959"><a href="#AnaDataset-959"><span class="linenos"> 959</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation</span>
</span><span id="AnaDataset-960"><a href="#AnaDataset-960"><span class="linenos"> 960</span></a><span class="sd">        (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="AnaDataset-961"><a href="#AnaDataset-961"><span class="linenos"> 961</span></a><span class="sd">        - **distributed** : boolean (default True) - Include only distributed fields</span>
</span><span id="AnaDataset-962"><a href="#AnaDataset-962"><span class="linenos"> 962</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDataset-963"><a href="#AnaDataset-963"><span class="linenos"> 963</span></a>        <span class="n">partit</span> <span class="o">=</span> <span class="p">[[</span><span class="n">fld</span><span class="p">]</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">ROOTED</span><span class="p">]</span>
</span><span id="AnaDataset-964"><a href="#AnaDataset-964"><span class="linenos"> 964</span></a>        <span class="n">crossed</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ana_relations</span> <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">typecoupl</span> <span class="o">==</span> <span class="n">CROSSED</span>
</span><span id="AnaDataset-965"><a href="#AnaDataset-965"><span class="linenos"> 965</span></a>                   <span class="c1"># and rel.relation[1].index &gt; rel.relation[0].index</span>
</span><span id="AnaDataset-966"><a href="#AnaDataset-966"><span class="linenos"> 966</span></a>                   <span class="ow">and</span> <span class="n">rel</span><span class="o">.</span><span class="n">parent_child</span>
</span><span id="AnaDataset-967"><a href="#AnaDataset-967"><span class="linenos"> 967</span></a>                   <span class="ow">and</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">!=</span> <span class="n">COUPLED</span>
</span><span id="AnaDataset-968"><a href="#AnaDataset-968"><span class="linenos"> 968</span></a>                   <span class="ow">and</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">!=</span> <span class="n">COUPLED</span><span class="p">]</span>
</span><span id="AnaDataset-969"><a href="#AnaDataset-969"><span class="linenos"> 969</span></a>        <span class="k">if</span> <span class="n">distributed</span><span class="p">:</span>
</span><span id="AnaDataset-970"><a href="#AnaDataset-970"><span class="linenos"> 970</span></a>            <span class="n">crossed</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">crossed</span> <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">distrib</span><span class="p">]</span>
</span><span id="AnaDataset-971"><a href="#AnaDataset-971"><span class="linenos"> 971</span></a>        <span class="k">if</span> <span class="n">crossed</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">crossed</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">crossed</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dist</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDataset-972"><a href="#AnaDataset-972"><span class="linenos"> 972</span></a>            <span class="n">partit</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">crossed</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
</span><span id="AnaDataset-973"><a href="#AnaDataset-973"><span class="linenos"> 973</span></a>        <span class="k">elif</span> <span class="n">crossed</span><span class="p">:</span>
</span><span id="AnaDataset-974"><a href="#AnaDataset-974"><span class="linenos"> 974</span></a>            <span class="k">for</span> <span class="n">repeat</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">crossed</span><span class="p">))):</span>
</span><span id="AnaDataset-975"><a href="#AnaDataset-975"><span class="linenos"> 975</span></a>                <span class="n">candidates</span> <span class="o">=</span> <span class="n">combinations</span><span class="p">(</span><span class="n">crossed</span><span class="p">,</span> <span class="n">repeat</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="AnaDataset-976"><a href="#AnaDataset-976"><span class="linenos"> 976</span></a>                <span class="k">for</span> <span class="n">candidat</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">:</span>
</span><span id="AnaDataset-977"><a href="#AnaDataset-977"><span class="linenos"> 977</span></a>                    <span class="n">flds</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="AnaDataset-978"><a href="#AnaDataset-978"><span class="linenos"> 978</span></a>                                <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">candidat</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>
</span><span id="AnaDataset-979"><a href="#AnaDataset-979"><span class="linenos"> 979</span></a>                    <span class="k">if</span> <span class="p">(</span><span class="n">reduce</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="p">[</span><span class="n">fld</span><span class="o">.</span><span class="n">lencodec</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">flds</span><span class="p">])</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">and</span>
</span><span id="AnaDataset-980"><a href="#AnaDataset-980"><span class="linenos"> 980</span></a>                        <span class="nb">len</span><span class="p">(</span><span class="n">candidat</span><span class="p">)</span> <span class="o">==</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">flds</span><span class="p">)))</span> <span class="ow">and</span>
</span><span id="AnaDataset-981"><a href="#AnaDataset-981"><span class="linenos"> 981</span></a>                            <span class="p">(</span><span class="ow">not</span> <span class="n">distributed</span> <span class="ow">or</span> <span class="nb">min</span><span class="p">(</span><span class="n">rel</span><span class="o">.</span><span class="n">distrib</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">candidat</span><span class="p">))):</span>
</span><span id="AnaDataset-982"><a href="#AnaDataset-982"><span class="linenos"> 982</span></a>                        <span class="n">partit</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">flds</span><span class="p">)</span>
</span><span id="AnaDataset-983"><a href="#AnaDataset-983"><span class="linenos"> 983</span></a>        <span class="n">partit</span> <span class="o">=</span> <span class="n">Util</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">partit</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</span><span id="AnaDataset-984"><a href="#AnaDataset-984"><span class="linenos"> 984</span></a>        <span class="k">return</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="k">for</span> <span class="n">tup</span> <span class="ow">in</span>
</span><span id="AnaDataset-985"><a href="#AnaDataset-985"><span class="linenos"> 985</span></a>                <span class="nb">sorted</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">({</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">prt</span><span class="p">))</span> <span class="k">for</span> <span class="n">prt</span> <span class="ow">in</span> <span class="n">partit</span><span class="p">})),</span>
</span><span id="AnaDataset-986"><a href="#AnaDataset-986"><span class="linenos"> 986</span></a>                       <span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>
</span><span id="AnaDataset-987"><a href="#AnaDataset-987"><span class="linenos"> 987</span></a>
</span><span id="AnaDataset-988"><a href="#AnaDataset-988"><span class="linenos"> 988</span></a>    <span class="k">def</span> <span class="nf">field_partition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">partition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">distributed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="AnaDataset-989"><a href="#AnaDataset-989"><span class="linenos"> 989</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a partition dict with the list of primary, secondary, unique</span>
</span><span id="AnaDataset-990"><a href="#AnaDataset-990"><span class="linenos"> 990</span></a><span class="sd">        and variable fields.</span>
</span><span id="AnaDataset-991"><a href="#AnaDataset-991"><span class="linenos"> 991</span></a>
</span><span id="AnaDataset-992"><a href="#AnaDataset-992"><span class="linenos"> 992</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDataset-993"><a href="#AnaDataset-993"><span class="linenos"> 993</span></a>
</span><span id="AnaDataset-994"><a href="#AnaDataset-994"><span class="linenos"> 994</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation</span>
</span><span id="AnaDataset-995"><a href="#AnaDataset-995"><span class="linenos"> 995</span></a><span class="sd">        (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="AnaDataset-996"><a href="#AnaDataset-996"><span class="linenos"> 996</span></a><span class="sd">        - **partition** : list (default None) - if None, partition is the first</span>
</span><span id="AnaDataset-997"><a href="#AnaDataset-997"><span class="linenos"> 997</span></a><span class="sd">        - **distributed** : boolean (default True) - Include only distributed fields</span>
</span><span id="AnaDataset-998"><a href="#AnaDataset-998"><span class="linenos"> 998</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDataset-999"><a href="#AnaDataset-999"><span class="linenos"> 999</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">partition</span><span class="p">:</span>
</span><span id="AnaDataset-1000"><a href="#AnaDataset-1000"><span class="linenos">1000</span></a>            <span class="n">partitions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">partitions</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="n">distributed</span><span class="p">)</span>
</span><span id="AnaDataset-1001"><a href="#AnaDataset-1001"><span class="linenos">1001</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">partitions</span><span class="p">:</span>
</span><span id="AnaDataset-1002"><a href="#AnaDataset-1002"><span class="linenos">1002</span></a>                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;primary&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;secondary&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="p">[]}</span>
</span><span id="AnaDataset-1003"><a href="#AnaDataset-1003"><span class="linenos">1003</span></a>            <span class="n">partition</span> <span class="o">=</span> <span class="n">partitions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AnaDataset-1004"><a href="#AnaDataset-1004"><span class="linenos">1004</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AnaDataset-1005"><a href="#AnaDataset-1005"><span class="linenos">1005</span></a>            <span class="n">partition</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">fld</span><span class="p">)</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">partition</span><span class="p">]</span>
</span><span id="AnaDataset-1006"><a href="#AnaDataset-1006"><span class="linenos">1006</span></a>        <span class="n">secondary</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AnaDataset-1007"><a href="#AnaDataset-1007"><span class="linenos">1007</span></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">partition</span><span class="p">:</span>
</span><span id="AnaDataset-1008"><a href="#AnaDataset-1008"><span class="linenos">1008</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_add_child</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">secondary</span><span class="p">)</span>
</span><span id="AnaDataset-1009"><a href="#AnaDataset-1009"><span class="linenos">1009</span></a>        <span class="n">secondary</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">secondary</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">partition</span><span class="p">]</span>
</span><span id="AnaDataset-1010"><a href="#AnaDataset-1010"><span class="linenos">1010</span></a>        <span class="n">unique</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">UNIQUE</span><span class="p">]</span>
</span><span id="AnaDataset-1011"><a href="#AnaDataset-1011"><span class="linenos">1011</span></a>        <span class="n">variable</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span>
</span><span id="AnaDataset-1012"><a href="#AnaDataset-1012"><span class="linenos">1012</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">partition</span> <span class="o">+</span> <span class="n">secondary</span> <span class="o">+</span> <span class="n">unique</span><span class="p">]</span>
</span><span id="AnaDataset-1013"><a href="#AnaDataset-1013"><span class="linenos">1013</span></a>        <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">view</span><span class="p">({</span><span class="s1">&#39;primary&#39;</span><span class="p">:</span> <span class="n">partition</span><span class="p">,</span> <span class="s1">&#39;secondary&#39;</span><span class="p">:</span> <span class="n">secondary</span><span class="p">,</span>
</span><span id="AnaDataset-1014"><a href="#AnaDataset-1014"><span class="linenos">1014</span></a>                          <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">unique</span><span class="p">,</span> <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="n">variable</span><span class="p">},</span> <span class="n">mode</span><span class="p">)</span>
</span><span id="AnaDataset-1015"><a href="#AnaDataset-1015"><span class="linenos">1015</span></a>
</span><span id="AnaDataset-1016"><a href="#AnaDataset-1016"><span class="linenos">1016</span></a>    <span class="k">def</span> <span class="nf">indicator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fullsize</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
</span><span id="AnaDataset-1017"><a href="#AnaDataset-1017"><span class="linenos">1017</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;generate size indicators: ol (object lightness), ul (unicity level),</span>
</span><span id="AnaDataset-1018"><a href="#AnaDataset-1018"><span class="linenos">1018</span></a><span class="sd">        gain (sizegain)</span>
</span><span id="AnaDataset-1019"><a href="#AnaDataset-1019"><span class="linenos">1019</span></a>
</span><span id="AnaDataset-1020"><a href="#AnaDataset-1020"><span class="linenos">1020</span></a><span class="sd">        *Parameters*</span>
</span><span id="AnaDataset-1021"><a href="#AnaDataset-1021"><span class="linenos">1021</span></a>
</span><span id="AnaDataset-1022"><a href="#AnaDataset-1022"><span class="linenos">1022</span></a><span class="sd">        - **fullsize** : int - size with full codec</span>
</span><span id="AnaDataset-1023"><a href="#AnaDataset-1023"><span class="linenos">1023</span></a><span class="sd">        - **size** : int - size with existing codec</span>
</span><span id="AnaDataset-1024"><a href="#AnaDataset-1024"><span class="linenos">1024</span></a>
</span><span id="AnaDataset-1025"><a href="#AnaDataset-1025"><span class="linenos">1025</span></a><span class="sd">        *Returns* : dict&#39;&#39;&#39;</span>
</span><span id="AnaDataset-1026"><a href="#AnaDataset-1026"><span class="linenos">1026</span></a>        <span class="n">lenindex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
</span><span id="AnaDataset-1027"><a href="#AnaDataset-1027"><span class="linenos">1027</span></a>        <span class="n">indexlen</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">fld</span><span class="o">.</span><span class="n">lencodec</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
</span><span id="AnaDataset-1028"><a href="#AnaDataset-1028"><span class="linenos">1028</span></a>        <span class="n">nval</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">lenindex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="AnaDataset-1029"><a href="#AnaDataset-1029"><span class="linenos">1029</span></a>        <span class="n">sval</span> <span class="o">=</span> <span class="n">fullsize</span> <span class="o">/</span> <span class="n">nval</span>
</span><span id="AnaDataset-1030"><a href="#AnaDataset-1030"><span class="linenos">1030</span></a>        <span class="n">ncod</span> <span class="o">=</span> <span class="n">indexlen</span> <span class="o">+</span> <span class="n">lenindex</span>
</span><span id="AnaDataset-1031"><a href="#AnaDataset-1031"><span class="linenos">1031</span></a>
</span><span id="AnaDataset-1032"><a href="#AnaDataset-1032"><span class="linenos">1032</span></a>        <span class="k">if</span> <span class="n">nval</span> <span class="o">!=</span> <span class="n">ncod</span><span class="p">:</span>
</span><span id="AnaDataset-1033"><a href="#AnaDataset-1033"><span class="linenos">1033</span></a>            <span class="n">scod</span> <span class="o">=</span> <span class="p">(</span><span class="n">size</span> <span class="o">-</span> <span class="n">ncod</span> <span class="o">*</span> <span class="n">sval</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">nval</span> <span class="o">-</span> <span class="n">ncod</span><span class="p">)</span>
</span><span id="AnaDataset-1034"><a href="#AnaDataset-1034"><span class="linenos">1034</span></a>            <span class="n">olight</span> <span class="o">=</span> <span class="n">scod</span> <span class="o">/</span> <span class="n">sval</span>
</span><span id="AnaDataset-1035"><a href="#AnaDataset-1035"><span class="linenos">1035</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AnaDataset-1036"><a href="#AnaDataset-1036"><span class="linenos">1036</span></a>            <span class="n">olight</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AnaDataset-1037"><a href="#AnaDataset-1037"><span class="linenos">1037</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;total values&#39;</span><span class="p">:</span> <span class="n">nval</span><span class="p">,</span> <span class="s1">&#39;mean size&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">sval</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="AnaDataset-1038"><a href="#AnaDataset-1038"><span class="linenos">1038</span></a>                <span class="s1">&#39;unique values&#39;</span><span class="p">:</span> <span class="n">ncod</span><span class="p">,</span> <span class="s1">&#39;mean coding size&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">scod</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="AnaDataset-1039"><a href="#AnaDataset-1039"><span class="linenos">1039</span></a>                <span class="s1">&#39;unicity level&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">ncod</span> <span class="o">/</span> <span class="n">nval</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="AnaDataset-1040"><a href="#AnaDataset-1040"><span class="linenos">1040</span></a>                <span class="s1">&#39;optimize level&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="n">fullsize</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="AnaDataset-1041"><a href="#AnaDataset-1041"><span class="linenos">1041</span></a>                <span class="s1">&#39;object lightness&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">olight</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="AnaDataset-1042"><a href="#AnaDataset-1042"><span class="linenos">1042</span></a>                <span class="s1">&#39;maxgain&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">((</span><span class="n">nval</span> <span class="o">-</span> <span class="n">ncod</span><span class="p">)</span> <span class="o">/</span> <span class="n">nval</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="AnaDataset-1043"><a href="#AnaDataset-1043"><span class="linenos">1043</span></a>                <span class="s1">&#39;gain&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">((</span><span class="n">fullsize</span> <span class="o">-</span> <span class="n">size</span><span class="p">)</span> <span class="o">/</span> <span class="n">fullsize</span><span class="p">,</span> <span class="mi">3</span><span class="p">)}</span>
</span><span id="AnaDataset-1044"><a href="#AnaDataset-1044"><span class="linenos">1044</span></a>
</span><span id="AnaDataset-1045"><a href="#AnaDataset-1045"><span class="linenos">1045</span></a>    <span class="k">def</span> <span class="nf">_add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">childs</span><span class="p">):</span>
</span><span id="AnaDataset-1046"><a href="#AnaDataset-1046"><span class="linenos">1046</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; add derived or coupled fields in the childs list&#39;&#39;&#39;</span>
</span><span id="AnaDataset-1047"><a href="#AnaDataset-1047"><span class="linenos">1047</span></a>        <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">field</span><span class="o">.</span><span class="n">list_c_derived</span> <span class="o">+</span> <span class="n">field</span><span class="o">.</span><span class="n">list_coupled</span><span class="p">:</span>
</span><span id="AnaDataset-1048"><a href="#AnaDataset-1048"><span class="linenos">1048</span></a>            <span class="n">child</span> <span class="o">=</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="AnaDataset-1049"><a href="#AnaDataset-1049"><span class="linenos">1049</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">childs</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">child</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">UNIQUE</span><span class="p">:</span>
</span><span id="AnaDataset-1050"><a href="#AnaDataset-1050"><span class="linenos">1050</span></a>                <span class="n">childs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
</span><span id="AnaDataset-1051"><a href="#AnaDataset-1051"><span class="linenos">1051</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">child</span><span class="o">.</span><span class="n">category</span> <span class="ow">in</span> <span class="p">(</span><span class="n">COUPLED</span><span class="p">,</span> <span class="n">UNIQUE</span><span class="p">):</span>
</span><span id="AnaDataset-1052"><a href="#AnaDataset-1052"><span class="linenos">1052</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_add_child</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">childs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This class analyses the structure of a dataset.</p>

<p><em>Attributes</em> :</p>

<ul>
<li><strong>iddataset</strong> : string or integer - Id of the Dataset</li>
<li><strong>fields</strong> : list of the AnaDfields included</li>
<li><strong>relations</strong> : dict of the AnaRelations between two AnaDfields</li>
<li><strong>hashd</strong> : string - update identifier</li>
</ul>

<p><em>relationship (@property)</em></p>

<ul>
<li><code><a href="#AnaDataset.ana_relations">ana_relations</a></code></li>
<li><code><a href="#AnaDataset.p_relations">p_relations</a></code></li>
</ul>

<p><em>field (@property)</em></p>

<ul>
<li><code><a href="#AnaDataset.root">root</a></code></li>
<li><code><a href="#AnaDataset.primary">primary</a></code></li>
<li><code><a href="#AnaDataset.secondary">secondary</a></code></li>
<li><code><a href="#AnaDataset.unique">unique</a></code></li>
<li><code><a href="#AnaDataset.variable">variable</a></code></li>
</ul>

<p><em>global (@property)</em></p>

<ul>
<li><code><a href="#AnaDataset.category">category</a></code></li>
<li><code><a href="#AnaDataset.complete">complete</a></code></li>
<li><code><a href="#AnaDataset.dimension">dimension</a></code></li>
</ul>

<p><em>update (instance methods)</em></p>

<ul>
<li><code><a href="#AnaDataset.set_relations">set_relations</a></code></li>
</ul>

<p><em>access (instance methods)</em></p>

<ul>
<li><code><a href="#AnaDataset.get_relation">get_relation</a></code></li>
<li><code><a href="#AnaDataset.dfield">dfield</a></code></li>
</ul>

<p><em>synthesis (instance methods)</em></p>

<ul>
<li><code><a href="#AnaDataset.tree">tree</a></code></li>
<li><code><a href="#AnaDataset.to_dict">to_dict</a></code></li>
<li><code><a href="#AnaDataset.indicator">indicator</a></code></li>
<li><code><a href="#AnaDataset.partitions">partitions</a></code></li>
<li><code><a href="#AnaDataset.field_partition">field_partition</a></code></li>
</ul>
</div>


                            <div id="AnaDataset.__init__" class="classattr">
                                        <input id="AnaDataset.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AnaDataset</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">fields</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">relations</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">iddataset</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">leng</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">hashd</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="AnaDataset.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDataset.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDataset.__init__-745"><a href="#AnaDataset.__init__-745"><span class="linenos">745</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">iddataset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="AnaDataset.__init__-746"><a href="#AnaDataset.__init__-746"><span class="linenos">746</span></a>                 <span class="n">leng</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hashd</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="AnaDataset.__init__-747"><a href="#AnaDataset.__init__-747"><span class="linenos">747</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Creation mode :</span>
</span><span id="AnaDataset.__init__-748"><a href="#AnaDataset.__init__-748"><span class="linenos">748</span></a><span class="sd">        - single dict attribute where keys are attributes name,</span>
</span><span id="AnaDataset.__init__-749"><a href="#AnaDataset.__init__-749"><span class="linenos">749</span></a><span class="sd">        - single AnaDataset attribute to make a copy</span>
</span><span id="AnaDataset.__init__-750"><a href="#AnaDataset.__init__-750"><span class="linenos">750</span></a><span class="sd">        - multiple attributes</span>
</span><span id="AnaDataset.__init__-751"><a href="#AnaDataset.__init__-751"><span class="linenos">751</span></a>
</span><span id="AnaDataset.__init__-752"><a href="#AnaDataset.__init__-752"><span class="linenos">752</span></a><span class="sd">         *Parameters (multiple attributes)*</span>
</span><span id="AnaDataset.__init__-753"><a href="#AnaDataset.__init__-753"><span class="linenos">753</span></a>
</span><span id="AnaDataset.__init__-754"><a href="#AnaDataset.__init__-754"><span class="linenos">754</span></a><span class="sd">        - **idfield** : string or integer - Id of the Field</span>
</span><span id="AnaDataset.__init__-755"><a href="#AnaDataset.__init__-755"><span class="linenos">755</span></a><span class="sd">        - **lencodec** : integer (default None) - length of the codec</span>
</span><span id="AnaDataset.__init__-756"><a href="#AnaDataset.__init__-756"><span class="linenos">756</span></a><span class="sd">        - **mincodec** : integer (default None) - number of different values</span>
</span><span id="AnaDataset.__init__-757"><a href="#AnaDataset.__init__-757"><span class="linenos">757</span></a><span class="sd">        - **maxcodec** : integer (default None) - length of the field</span>
</span><span id="AnaDataset.__init__-758"><a href="#AnaDataset.__init__-758"><span class="linenos">758</span></a><span class="sd">        - **hashf** : string (default None) - update identifier</span>
</span><span id="AnaDataset.__init__-759"><a href="#AnaDataset.__init__-759"><span class="linenos">759</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDataset.__init__-760"><a href="#AnaDataset.__init__-760"><span class="linenos">760</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="n">AnaDataset</span><span class="p">):</span>
</span><span id="AnaDataset.__init__-761"><a href="#AnaDataset.__init__-761"><span class="linenos">761</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">iddataset</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">iddataset</span>
</span><span id="AnaDataset.__init__-762"><a href="#AnaDataset.__init__-762"><span class="linenos">762</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">fields</span>
</span><span id="AnaDataset.__init__-763"><a href="#AnaDataset.__init__-763"><span class="linenos">763</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">relations</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">relations</span>
</span><span id="AnaDataset.__init__-764"><a href="#AnaDataset.__init__-764"><span class="linenos">764</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hashd</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">hashd</span>
</span><span id="AnaDataset.__init__-765"><a href="#AnaDataset.__init__-765"><span class="linenos">765</span></a>            <span class="k">return</span>
</span><span id="AnaDataset.__init__-766"><a href="#AnaDataset.__init__-766"><span class="linenos">766</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="AnaDataset.__init__-767"><a href="#AnaDataset.__init__-767"><span class="linenos">767</span></a>            <span class="n">iddataset</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">IDDATASET</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaDataset.__init__-768"><a href="#AnaDataset.__init__-768"><span class="linenos">768</span></a>            <span class="n">leng</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">LENGTH</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaDataset.__init__-769"><a href="#AnaDataset.__init__-769"><span class="linenos">769</span></a>            <span class="n">relations</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">RELATIONS</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaDataset.__init__-770"><a href="#AnaDataset.__init__-770"><span class="linenos">770</span></a>            <span class="n">hashd</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">HASHD</span><span class="p">)</span>
</span><span id="AnaDataset.__init__-771"><a href="#AnaDataset.__init__-771"><span class="linenos">771</span></a>            <span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">FIELDS</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="AnaDataset.__init__-772"><a href="#AnaDataset.__init__-772"><span class="linenos">772</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">iddataset</span> <span class="o">=</span> <span class="n">iddataset</span>
</span><span id="AnaDataset.__init__-773"><a href="#AnaDataset.__init__-773"><span class="linenos">773</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">AnaDfield</span><span class="p">(</span><span class="n">AnaField</span><span class="p">(</span><span class="n">field</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="AnaDataset.__init__-774"><a href="#AnaDataset.__init__-774"><span class="linenos">774</span></a>                       <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">]</span> <span class="k">if</span> <span class="n">fields</span> <span class="k">else</span> <span class="p">[]</span>
</span><span id="AnaDataset.__init__-775"><a href="#AnaDataset.__init__-775"><span class="linenos">775</span></a>        <span class="k">if</span> <span class="n">leng</span><span class="p">:</span>
</span><span id="AnaDataset.__init__-776"><a href="#AnaDataset.__init__-776"><span class="linenos">776</span></a>            <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
</span><span id="AnaDataset.__init__-777"><a href="#AnaDataset.__init__-777"><span class="linenos">777</span></a>                <span class="n">fld</span><span class="o">.</span><span class="n">maxcodec</span> <span class="o">=</span> <span class="n">leng</span>
</span><span id="AnaDataset.__init__-778"><a href="#AnaDataset.__init__-778"><span class="linenos">778</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">relations</span> <span class="o">=</span> <span class="p">{</span><span class="n">field</span><span class="p">:</span> <span class="p">{}</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">}</span>
</span><span id="AnaDataset.__init__-779"><a href="#AnaDataset.__init__-779"><span class="linenos">779</span></a>        <span class="k">if</span> <span class="n">relations</span><span class="p">:</span>
</span><span id="AnaDataset.__init__-780"><a href="#AnaDataset.__init__-780"><span class="linenos">780</span></a>            <span class="k">for</span> <span class="n">fld</span><span class="p">,</span> <span class="n">dic_relation</span> <span class="ow">in</span> <span class="n">relations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="AnaDataset.__init__-781"><a href="#AnaDataset.__init__-781"><span class="linenos">781</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">set_relations</span><span class="p">(</span><span class="n">fld</span><span class="p">,</span> <span class="n">dic_relation</span><span class="p">)</span>
</span><span id="AnaDataset.__init__-782"><a href="#AnaDataset.__init__-782"><span class="linenos">782</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hashd</span> <span class="o">=</span> <span class="n">hashd</span>
</span></pre></div>


            <div class="docstring"><p>Creation mode :</p>

<ul>
<li>single dict attribute where keys are attributes name,</li>
<li>single AnaDataset attribute to make a copy</li>
<li>multiple attributes</li>
</ul>

<p><em>Parameters (multiple attributes)</em></p>

<ul>
<li><strong>idfield</strong> : string or integer - Id of the Field</li>
<li><strong>lencodec</strong> : integer (default None) - length of the codec</li>
<li><strong>mincodec</strong> : integer (default None) - number of different values</li>
<li><strong>maxcodec</strong> : integer (default None) - length of the field</li>
<li><strong>hashf</strong> : string (default None) - update identifier</li>
</ul>
</div>


                            </div>
                            <div id="AnaDataset.category" class="classattr">
                                <div class="attr variable">
            <span class="name">category</span>

        
    </div>
    <a class="headerlink" href="#AnaDataset.category"></a>
    
            <div class="docstring"><p>return a list of AnaDfield category (unique, rooted, coupled, derived, mixed)</p>
</div>


                            </div>
                            <div id="AnaDataset.ana_relations" class="classattr">
                                <div class="attr variable">
            <span class="name">ana_relations</span>

        
    </div>
    <a class="headerlink" href="#AnaDataset.ana_relations"></a>
    
            <div class="docstring"><p>return the list of AnaRelation included</p>
</div>


                            </div>
                            <div id="AnaDataset.p_relations" class="classattr">
                                <div class="attr variable">
            <span class="name">p_relations</span>

        
    </div>
    <a class="headerlink" href="#AnaDataset.p_relations"></a>
    
            <div class="docstring"><p>return the list of oriented AnaRelation (parent first, child second)</p>
</div>


                            </div>
                            <div id="AnaDataset.root" class="classattr">
                                <div class="attr variable">
            <span class="name">root</span>

        
    </div>
    <a class="headerlink" href="#AnaDataset.root"></a>
    
            <div class="docstring"><p>return the root AnaDfield</p>
</div>


                            </div>
                            <div id="AnaDataset.primary" class="classattr">
                                <div class="attr variable">
            <span class="name">primary</span>

        
    </div>
    <a class="headerlink" href="#AnaDataset.primary"></a>
    
            <div class="docstring"><p>return the first partition of the partitions</p>
</div>


                            </div>
                            <div id="AnaDataset.complete" class="classattr">
                                <div class="attr variable">
            <span class="name">complete</span>

        
    </div>
    <a class="headerlink" href="#AnaDataset.complete"></a>
    
            <div class="docstring"><p>return True if the dimension is not 0</p>
</div>


                            </div>
                            <div id="AnaDataset.dimension" class="classattr">
                                <div class="attr variable">
            <span class="name">dimension</span>

        
    </div>
    <a class="headerlink" href="#AnaDataset.dimension"></a>
    
            <div class="docstring"><p>return the highest partition lenght</p>
</div>


                            </div>
                            <div id="AnaDataset.secondary" class="classattr">
                                <div class="attr variable">
            <span class="name">secondary</span>

        
    </div>
    <a class="headerlink" href="#AnaDataset.secondary"></a>
    
            <div class="docstring"><p>return the derived ou coupled fields from primary</p>
</div>


                            </div>
                            <div id="AnaDataset.unique" class="classattr">
                                <div class="attr variable">
            <span class="name">unique</span>

        
    </div>
    <a class="headerlink" href="#AnaDataset.unique"></a>
    
            <div class="docstring"><p>return the unique fields</p>
</div>


                            </div>
                            <div id="AnaDataset.variable" class="classattr">
                                <div class="attr variable">
            <span class="name">variable</span>

        
    </div>
    <a class="headerlink" href="#AnaDataset.variable"></a>
    
            <div class="docstring"><p>return the variable fields</p>
</div>


                            </div>
                            <div id="AnaDataset.set_relations" class="classattr">
                                        <input id="AnaDataset.set_relations-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_relations</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">field</span>, </span><span class="param"><span class="n">dic_relations</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AnaDataset.set_relations-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDataset.set_relations"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDataset.set_relations-855"><a href="#AnaDataset.set_relations-855"><span class="linenos">855</span></a>    <span class="k">def</span> <span class="nf">set_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">dic_relations</span><span class="p">):</span>
</span><span id="AnaDataset.set_relations-856"><a href="#AnaDataset.set_relations-856"><span class="linenos">856</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Add relations in the AnaDataset from a dict.</span>
</span><span id="AnaDataset.set_relations-857"><a href="#AnaDataset.set_relations-857"><span class="linenos">857</span></a>
</span><span id="AnaDataset.set_relations-858"><a href="#AnaDataset.set_relations-858"><span class="linenos">858</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDataset.set_relations-859"><a href="#AnaDataset.set_relations-859"><span class="linenos">859</span></a>
</span><span id="AnaDataset.set_relations-860"><a href="#AnaDataset.set_relations-860"><span class="linenos">860</span></a><span class="sd">        - **field** : AnaDfield, AnaField or str (idfield) - first relation AnaDfield</span>
</span><span id="AnaDataset.set_relations-861"><a href="#AnaDataset.set_relations-861"><span class="linenos">861</span></a><span class="sd">        - **dic_relations** : dict - key is the second relation AnaDfield and</span>
</span><span id="AnaDataset.set_relations-862"><a href="#AnaDataset.set_relations-862"><span class="linenos">862</span></a><span class="sd">        value is the dist value or teh list [dist, distrib]</span>
</span><span id="AnaDataset.set_relations-863"><a href="#AnaDataset.set_relations-863"><span class="linenos">863</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDataset.set_relations-864"><a href="#AnaDataset.set_relations-864"><span class="linenos">864</span></a>        <span class="n">fld</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
</span><span id="AnaDataset.set_relations-865"><a href="#AnaDataset.set_relations-865"><span class="linenos">865</span></a>        <span class="k">for</span> <span class="n">other</span><span class="p">,</span> <span class="n">dist</span> <span class="ow">in</span> <span class="n">dic_relations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="AnaDataset.set_relations-866"><a href="#AnaDataset.set_relations-866"><span class="linenos">866</span></a>            <span class="n">oth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="AnaDataset.set_relations-867"><a href="#AnaDataset.set_relations-867"><span class="linenos">867</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">relations</span><span class="p">[</span><span class="n">fld</span><span class="p">][</span><span class="n">oth</span><span class="p">]</span> <span class="o">=</span> <span class="n">AnaRelation</span><span class="p">([</span><span class="n">fld</span><span class="p">,</span> <span class="n">oth</span><span class="p">],</span> <span class="n">dist</span><span class="p">)</span>
</span><span id="AnaDataset.set_relations-868"><a href="#AnaDataset.set_relations-868"><span class="linenos">868</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">relations</span><span class="p">[</span><span class="n">oth</span><span class="p">][</span><span class="n">fld</span><span class="p">]</span> <span class="o">=</span> <span class="n">AnaRelation</span><span class="p">([</span><span class="n">oth</span><span class="p">,</span> <span class="n">fld</span><span class="p">],</span> <span class="n">dist</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Add relations in the AnaDataset from a dict.</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>field</strong> : AnaDfield, AnaField or str (idfield) - first relation AnaDfield</li>
<li><strong>dic_relations</strong> : dict - key is the second relation AnaDfield and
value is the dist value or teh list [dist, distrib]</li>
</ul>
</div>


                            </div>
                            <div id="AnaDataset.get_relation" class="classattr">
                                        <input id="AnaDataset.get_relation-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_relation</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fld1</span>, </span><span class="param"><span class="n">fld2</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AnaDataset.get_relation-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDataset.get_relation"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDataset.get_relation-870"><a href="#AnaDataset.get_relation-870"><span class="linenos">870</span></a>    <span class="k">def</span> <span class="nf">get_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fld1</span><span class="p">,</span> <span class="n">fld2</span><span class="p">):</span>
</span><span id="AnaDataset.get_relation-871"><a href="#AnaDataset.get_relation-871"><span class="linenos">871</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Return AnaRelation between fld1 and fld2.</span>
</span><span id="AnaDataset.get_relation-872"><a href="#AnaDataset.get_relation-872"><span class="linenos">872</span></a>
</span><span id="AnaDataset.get_relation-873"><a href="#AnaDataset.get_relation-873"><span class="linenos">873</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDataset.get_relation-874"><a href="#AnaDataset.get_relation-874"><span class="linenos">874</span></a>
</span><span id="AnaDataset.get_relation-875"><a href="#AnaDataset.get_relation-875"><span class="linenos">875</span></a><span class="sd">        - **fld1** : AnaDfield, AnaField, int or str (idfield) - first relation AnaDfield</span>
</span><span id="AnaDataset.get_relation-876"><a href="#AnaDataset.get_relation-876"><span class="linenos">876</span></a><span class="sd">        - **fld2** : AnaDfield, AnaField, int or str (idfield) - second relation AnaDfield</span>
</span><span id="AnaDataset.get_relation-877"><a href="#AnaDataset.get_relation-877"><span class="linenos">877</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDataset.get_relation-878"><a href="#AnaDataset.get_relation-878"><span class="linenos">878</span></a>        <span class="n">fl1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">fld1</span><span class="p">)</span>
</span><span id="AnaDataset.get_relation-879"><a href="#AnaDataset.get_relation-879"><span class="linenos">879</span></a>        <span class="n">fl2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">fld2</span><span class="p">)</span>
</span><span id="AnaDataset.get_relation-880"><a href="#AnaDataset.get_relation-880"><span class="linenos">880</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="ow">in</span> <span class="p">[</span><span class="n">fl1</span><span class="p">,</span> <span class="n">fl2</span><span class="p">]:</span>
</span><span id="AnaDataset.get_relation-881"><a href="#AnaDataset.get_relation-881"><span class="linenos">881</span></a>            <span class="k">return</span> <span class="n">AnaRelation</span><span class="p">([</span><span class="n">fl1</span><span class="p">,</span> <span class="n">fl2</span><span class="p">],</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="AnaDataset.get_relation-882"><a href="#AnaDataset.get_relation-882"><span class="linenos">882</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">relations</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">fld1</span><span class="p">)][</span><span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">fld2</span><span class="p">)]</span>
</span></pre></div>


            <div class="docstring"><p>Return AnaRelation between fld1 and fld2.</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>fld1</strong> : AnaDfield, AnaField, int or str (idfield) - first relation AnaDfield</li>
<li><strong>fld2</strong> : AnaDfield, AnaField, int or str (idfield) - second relation AnaDfield</li>
</ul>
</div>


                            </div>
                            <div id="AnaDataset.dfield" class="classattr">
                                        <input id="AnaDataset.dfield-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">dfield</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fld</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AnaDataset.dfield-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDataset.dfield"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDataset.dfield-884"><a href="#AnaDataset.dfield-884"><span class="linenos">884</span></a>    <span class="k">def</span> <span class="nf">dfield</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fld</span><span class="p">):</span>
</span><span id="AnaDataset.dfield-885"><a href="#AnaDataset.dfield-885"><span class="linenos">885</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return the AnaDfield matching with fld. Fld is str, int, AnaDfield or AnaField&#39;&#39;&#39;</span>
</span><span id="AnaDataset.dfield-886"><a href="#AnaDataset.dfield-886"><span class="linenos">886</span></a>        <span class="k">if</span> <span class="n">fld</span> <span class="ow">in</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ROOT</span><span class="p">):</span>
</span><span id="AnaDataset.dfield-887"><a href="#AnaDataset.dfield-887"><span class="linenos">887</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span>
</span><span id="AnaDataset.dfield-888"><a href="#AnaDataset.dfield-888"><span class="linenos">888</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fld</span><span class="p">,</span> <span class="n">AnaDfield</span><span class="p">):</span>
</span><span id="AnaDataset.dfield-889"><a href="#AnaDataset.dfield-889"><span class="linenos">889</span></a>            <span class="k">return</span> <span class="n">fld</span>
</span><span id="AnaDataset.dfield-890"><a href="#AnaDataset.dfield-890"><span class="linenos">890</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fld</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="AnaDataset.dfield-891"><a href="#AnaDataset.dfield-891"><span class="linenos">891</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">fld</span><span class="p">]</span>
</span><span id="AnaDataset.dfield-892"><a href="#AnaDataset.dfield-892"><span class="linenos">892</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fld</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="AnaDataset.dfield-893"><a href="#AnaDataset.dfield-893"><span class="linenos">893</span></a>            <span class="k">if</span> <span class="n">fld</span> <span class="ow">in</span> <span class="p">[</span><span class="n">dfld</span><span class="o">.</span><span class="n">idfield</span> <span class="k">for</span> <span class="n">dfld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">]:</span>
</span><span id="AnaDataset.dfield-894"><a href="#AnaDataset.dfield-894"><span class="linenos">894</span></a>                <span class="k">return</span> <span class="p">[</span><span class="n">dfld</span> <span class="k">for</span> <span class="n">dfld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">dfld</span><span class="o">.</span><span class="n">idfield</span> <span class="o">==</span> <span class="n">fld</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AnaDataset.dfield-895"><a href="#AnaDataset.dfield-895"><span class="linenos">895</span></a>            <span class="c1"># return self.root</span>
</span><span id="AnaDataset.dfield-896"><a href="#AnaDataset.dfield-896"><span class="linenos">896</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="AnaDataset.dfield-897"><a href="#AnaDataset.dfield-897"><span class="linenos">897</span></a>        <span class="k">return</span> <span class="n">AnaDfield</span><span class="p">(</span><span class="n">fld</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>return the AnaDfield matching with fld. Fld is str, int, AnaDfield or AnaField</p>
</div>


                            </div>
                            <div id="AnaDataset.tree" class="classattr">
                                        <input id="AnaDataset.tree-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">tree</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;derived&#39;</span>, </span><span class="param"><span class="n">width</span><span class="o">=</span><span class="mi">5</span>, </span><span class="param"><span class="n">lname</span><span class="o">=</span><span class="mi">20</span>, </span><span class="param"><span class="n">string</span><span class="o">=</span><span class="kc">True</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AnaDataset.tree-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDataset.tree"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDataset.tree-899"><a href="#AnaDataset.tree-899"><span class="linenos">899</span></a>    <span class="k">def</span> <span class="nf">tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;derived&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">lname</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="AnaDataset.tree-900"><a href="#AnaDataset.tree-900"><span class="linenos">900</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a string with a tree of derived Field.</span>
</span><span id="AnaDataset.tree-901"><a href="#AnaDataset.tree-901"><span class="linenos">901</span></a>
</span><span id="AnaDataset.tree-902"><a href="#AnaDataset.tree-902"><span class="linenos">902</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDataset.tree-903"><a href="#AnaDataset.tree-903"><span class="linenos">903</span></a>
</span><span id="AnaDataset.tree-904"><a href="#AnaDataset.tree-904"><span class="linenos">904</span></a><span class="sd">        - **lname** : integer (default 20) - length of the names</span>
</span><span id="AnaDataset.tree-905"><a href="#AnaDataset.tree-905"><span class="linenos">905</span></a><span class="sd">        - **width** : integer (default 5) - length of the lines</span>
</span><span id="AnaDataset.tree-906"><a href="#AnaDataset.tree-906"><span class="linenos">906</span></a><span class="sd">        - **string** : boolean (default True) - if True return str else return dict</span>
</span><span id="AnaDataset.tree-907"><a href="#AnaDataset.tree-907"><span class="linenos">907</span></a><span class="sd">        - **mode** : string (default &#39;derived&#39;) - kind of tree :</span>
</span><span id="AnaDataset.tree-908"><a href="#AnaDataset.tree-908"><span class="linenos">908</span></a><span class="sd">            &#39;derived&#39; : derived tree</span>
</span><span id="AnaDataset.tree-909"><a href="#AnaDataset.tree-909"><span class="linenos">909</span></a><span class="sd">            &#39;distance&#39;: min distance tree</span>
</span><span id="AnaDataset.tree-910"><a href="#AnaDataset.tree-910"><span class="linenos">910</span></a><span class="sd">            &#39;distomin&#39;: min distomin tree</span>
</span><span id="AnaDataset.tree-911"><a href="#AnaDataset.tree-911"><span class="linenos">911</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDataset.tree-912"><a href="#AnaDataset.tree-912"><span class="linenos">912</span></a>        <span class="n">lis</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;root-&#39;</span> <span class="o">+</span> <span class="n">mode</span> <span class="o">+</span> <span class="s1">&#39;*(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">]</span>
</span><span id="AnaDataset.tree-913"><a href="#AnaDataset.tree-913"><span class="linenos">913</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distance&#39;</span><span class="p">:</span>
</span><span id="AnaDataset.tree-914"><a href="#AnaDataset.tree-914"><span class="linenos">914</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">p_distance</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">]</span>
</span><span id="AnaDataset.tree-915"><a href="#AnaDataset.tree-915"><span class="linenos">915</span></a>        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;distomin&#39;</span><span class="p">:</span>
</span><span id="AnaDataset.tree-916"><a href="#AnaDataset.tree-916"><span class="linenos">916</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">p_distomin</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">]</span>
</span><span id="AnaDataset.tree-917"><a href="#AnaDataset.tree-917"><span class="linenos">917</span></a>        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;derived&#39;</span><span class="p">:</span>
</span><span id="AnaDataset.tree-918"><a href="#AnaDataset.tree-918"><span class="linenos">918</span></a>            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">p_derived</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">]</span>
</span><span id="AnaDataset.tree-919"><a href="#AnaDataset.tree-919"><span class="linenos">919</span></a>        <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">childs</span><span class="p">:</span>
</span><span id="AnaDataset.tree-920"><a href="#AnaDataset.tree-920"><span class="linenos">920</span></a>            <span class="n">lis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fld</span><span class="o">.</span><span class="n">dic_inner_node</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">lname</span><span class="p">))</span>
</span><span id="AnaDataset.tree-921"><a href="#AnaDataset.tree-921"><span class="linenos">921</span></a>        <span class="n">tree</span> <span class="o">=</span> <span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">):</span> <span class="n">lis</span><span class="p">}</span>
</span><span id="AnaDataset.tree-922"><a href="#AnaDataset.tree-922"><span class="linenos">922</span></a>        <span class="k">if</span> <span class="n">string</span><span class="p">:</span>
</span><span id="AnaDataset.tree-923"><a href="#AnaDataset.tree-923"><span class="linenos">923</span></a>            <span class="n">tre</span> <span class="o">=</span> <span class="n">pprint</span><span class="o">.</span><span class="n">pformat</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
</span><span id="AnaDataset.tree-924"><a href="#AnaDataset.tree-924"><span class="linenos">924</span></a>            <span class="n">tre</span> <span class="o">=</span> <span class="n">tre</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;---&#39;</span><span class="p">,</span> <span class="s1">&#39; - &#39;</span><span class="p">)</span>
</span><span id="AnaDataset.tree-925"><a href="#AnaDataset.tree-925"><span class="linenos">925</span></a>            <span class="n">tre</span> <span class="o">=</span> <span class="n">tre</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span id="AnaDataset.tree-926"><a href="#AnaDataset.tree-926"><span class="linenos">926</span></a>            <span class="n">tre</span> <span class="o">=</span> <span class="n">tre</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span id="AnaDataset.tree-927"><a href="#AnaDataset.tree-927"><span class="linenos">927</span></a>            <span class="k">for</span> <span class="n">car</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">]:</span>
</span><span id="AnaDataset.tree-928"><a href="#AnaDataset.tree-928"><span class="linenos">928</span></a>                <span class="n">tre</span> <span class="o">=</span> <span class="n">tre</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">car</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="AnaDataset.tree-929"><a href="#AnaDataset.tree-929"><span class="linenos">929</span></a>            <span class="k">return</span> <span class="n">tre</span>
</span><span id="AnaDataset.tree-930"><a href="#AnaDataset.tree-930"><span class="linenos">930</span></a>        <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">clean_dic</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>return a string with a tree of derived Field.</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>lname</strong> : integer (default 20) - length of the names</li>
<li><strong>width</strong> : integer (default 5) - length of the lines</li>
<li><strong>string</strong> : boolean (default True) - if True return str else return dict</li>
<li><strong>mode</strong> : string (default 'derived') - kind of tree :
'derived' : derived tree
'distance': min distance tree
'distomin': min distomin tree</li>
</ul>
</div>


                            </div>
                            <div id="AnaDataset.to_dict" class="classattr">
                                        <input id="AnaDataset.to_dict-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">to_dict</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span>, </span><span class="param"><span class="n">keys</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">relations</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AnaDataset.to_dict-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDataset.to_dict"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDataset.to_dict-932"><a href="#AnaDataset.to_dict-932"><span class="linenos">932</span></a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relations</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="AnaDataset.to_dict-933"><a href="#AnaDataset.to_dict-933"><span class="linenos">933</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict with fields attributes and optionaly relations attributes.</span>
</span><span id="AnaDataset.to_dict-934"><a href="#AnaDataset.to_dict-934"><span class="linenos">934</span></a>
</span><span id="AnaDataset.to_dict-935"><a href="#AnaDataset.to_dict-935"><span class="linenos">935</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDataset.to_dict-936"><a href="#AnaDataset.to_dict-936"><span class="linenos">936</span></a>
</span><span id="AnaDataset.to_dict-937"><a href="#AnaDataset.to_dict-937"><span class="linenos">937</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation</span>
</span><span id="AnaDataset.to_dict-938"><a href="#AnaDataset.to_dict-938"><span class="linenos">938</span></a><span class="sd">        (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="AnaDataset.to_dict-939"><a href="#AnaDataset.to_dict-939"><span class="linenos">939</span></a><span class="sd">        - **relations** : boolean (default: False) - if False return a list of fields,</span>
</span><span id="AnaDataset.to_dict-940"><a href="#AnaDataset.to_dict-940"><span class="linenos">940</span></a><span class="sd">        if True return a dict &#39;{&quot;fields&quot;: &lt;list of fields&gt;, &quot;relations&quot;: &lt;list of relations&gt;}&#39;</span>
</span><span id="AnaDataset.to_dict-941"><a href="#AnaDataset.to_dict-941"><span class="linenos">941</span></a><span class="sd">        - **keys** : string, list or tuple - list of keys or single key to return</span>
</span><span id="AnaDataset.to_dict-942"><a href="#AnaDataset.to_dict-942"><span class="linenos">942</span></a><span class="sd">        if &#39;all&#39; or None, all keys are returned</span>
</span><span id="AnaDataset.to_dict-943"><a href="#AnaDataset.to_dict-943"><span class="linenos">943</span></a><span class="sd">        if list, only keys in list are returned</span>
</span><span id="AnaDataset.to_dict-944"><a href="#AnaDataset.to_dict-944"><span class="linenos">944</span></a><span class="sd">        if string, only values associated to the string(key) are returned&#39;&#39;&#39;</span>
</span><span id="AnaDataset.to_dict-945"><a href="#AnaDataset.to_dict-945"><span class="linenos">945</span></a>        <span class="n">fields</span> <span class="o">=</span> <span class="n">Util</span><span class="o">.</span><span class="n">filter_dic</span><span class="p">([</span><span class="n">fld</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>
</span><span id="AnaDataset.to_dict-946"><a href="#AnaDataset.to_dict-946"><span class="linenos">946</span></a>                                 <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">],</span> <span class="n">keys</span><span class="p">)</span>
</span><span id="AnaDataset.to_dict-947"><a href="#AnaDataset.to_dict-947"><span class="linenos">947</span></a>        <span class="n">leng</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
</span><span id="AnaDataset.to_dict-948"><a href="#AnaDataset.to_dict-948"><span class="linenos">948</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">relations</span><span class="p">:</span>
</span><span id="AnaDataset.to_dict-949"><a href="#AnaDataset.to_dict-949"><span class="linenos">949</span></a>            <span class="k">return</span> <span class="n">fields</span>
</span><span id="AnaDataset.to_dict-950"><a href="#AnaDataset.to_dict-950"><span class="linenos">950</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="p">,</span> <span class="s1">&#39;relations&#39;</span><span class="p">:</span>
</span><span id="AnaDataset.to_dict-951"><a href="#AnaDataset.to_dict-951"><span class="linenos">951</span></a>                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_relation</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">full</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>
</span><span id="AnaDataset.to_dict-952"><a href="#AnaDataset.to_dict-952"><span class="linenos">952</span></a>                 <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">leng</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">leng</span><span class="p">)]}</span>
</span></pre></div>


            <div class="docstring"><p>return a dict with fields attributes and optionaly relations attributes.</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>mode</strong> : str (default 'field') - AnaDfield representation
('field', 'id', 'index')</li>
<li><strong>relations</strong> : boolean (default: False) - if False return a list of fields,
if True return a dict '{"fields": <list of fields>, "relations": <list of relations>}'</li>
<li><strong>keys</strong> : string, list or tuple - list of keys or single key to return
if 'all' or None, all keys are returned
if list, only keys in list are returned
if string, only values associated to the string(key) are returned</li>
</ul>
</div>


                            </div>
                            <div id="AnaDataset.partitions" class="classattr">
                                        <input id="AnaDataset.partitions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">partitions</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span>, </span><span class="param"><span class="n">distributed</span><span class="o">=</span><span class="kc">True</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AnaDataset.partitions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDataset.partitions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDataset.partitions-954"><a href="#AnaDataset.partitions-954"><span class="linenos">954</span></a>    <span class="k">def</span> <span class="nf">partitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">distributed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="AnaDataset.partitions-955"><a href="#AnaDataset.partitions-955"><span class="linenos">955</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a list of available partitions (the first is highest).</span>
</span><span id="AnaDataset.partitions-956"><a href="#AnaDataset.partitions-956"><span class="linenos">956</span></a>
</span><span id="AnaDataset.partitions-957"><a href="#AnaDataset.partitions-957"><span class="linenos">957</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDataset.partitions-958"><a href="#AnaDataset.partitions-958"><span class="linenos">958</span></a>
</span><span id="AnaDataset.partitions-959"><a href="#AnaDataset.partitions-959"><span class="linenos">959</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation</span>
</span><span id="AnaDataset.partitions-960"><a href="#AnaDataset.partitions-960"><span class="linenos">960</span></a><span class="sd">        (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="AnaDataset.partitions-961"><a href="#AnaDataset.partitions-961"><span class="linenos">961</span></a><span class="sd">        - **distributed** : boolean (default True) - Include only distributed fields</span>
</span><span id="AnaDataset.partitions-962"><a href="#AnaDataset.partitions-962"><span class="linenos">962</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDataset.partitions-963"><a href="#AnaDataset.partitions-963"><span class="linenos">963</span></a>        <span class="n">partit</span> <span class="o">=</span> <span class="p">[[</span><span class="n">fld</span><span class="p">]</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">ROOTED</span><span class="p">]</span>
</span><span id="AnaDataset.partitions-964"><a href="#AnaDataset.partitions-964"><span class="linenos">964</span></a>        <span class="n">crossed</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ana_relations</span> <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">typecoupl</span> <span class="o">==</span> <span class="n">CROSSED</span>
</span><span id="AnaDataset.partitions-965"><a href="#AnaDataset.partitions-965"><span class="linenos">965</span></a>                   <span class="c1"># and rel.relation[1].index &gt; rel.relation[0].index</span>
</span><span id="AnaDataset.partitions-966"><a href="#AnaDataset.partitions-966"><span class="linenos">966</span></a>                   <span class="ow">and</span> <span class="n">rel</span><span class="o">.</span><span class="n">parent_child</span>
</span><span id="AnaDataset.partitions-967"><a href="#AnaDataset.partitions-967"><span class="linenos">967</span></a>                   <span class="ow">and</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">!=</span> <span class="n">COUPLED</span>
</span><span id="AnaDataset.partitions-968"><a href="#AnaDataset.partitions-968"><span class="linenos">968</span></a>                   <span class="ow">and</span> <span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">!=</span> <span class="n">COUPLED</span><span class="p">]</span>
</span><span id="AnaDataset.partitions-969"><a href="#AnaDataset.partitions-969"><span class="linenos">969</span></a>        <span class="k">if</span> <span class="n">distributed</span><span class="p">:</span>
</span><span id="AnaDataset.partitions-970"><a href="#AnaDataset.partitions-970"><span class="linenos">970</span></a>            <span class="n">crossed</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">crossed</span> <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">distrib</span><span class="p">]</span>
</span><span id="AnaDataset.partitions-971"><a href="#AnaDataset.partitions-971"><span class="linenos">971</span></a>        <span class="k">if</span> <span class="n">crossed</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">crossed</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">crossed</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dist</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AnaDataset.partitions-972"><a href="#AnaDataset.partitions-972"><span class="linenos">972</span></a>            <span class="n">partit</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">crossed</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
</span><span id="AnaDataset.partitions-973"><a href="#AnaDataset.partitions-973"><span class="linenos">973</span></a>        <span class="k">elif</span> <span class="n">crossed</span><span class="p">:</span>
</span><span id="AnaDataset.partitions-974"><a href="#AnaDataset.partitions-974"><span class="linenos">974</span></a>            <span class="k">for</span> <span class="n">repeat</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">crossed</span><span class="p">))):</span>
</span><span id="AnaDataset.partitions-975"><a href="#AnaDataset.partitions-975"><span class="linenos">975</span></a>                <span class="n">candidates</span> <span class="o">=</span> <span class="n">combinations</span><span class="p">(</span><span class="n">crossed</span><span class="p">,</span> <span class="n">repeat</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="AnaDataset.partitions-976"><a href="#AnaDataset.partitions-976"><span class="linenos">976</span></a>                <span class="k">for</span> <span class="n">candidat</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">:</span>
</span><span id="AnaDataset.partitions-977"><a href="#AnaDataset.partitions-977"><span class="linenos">977</span></a>                    <span class="n">flds</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">rel</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="AnaDataset.partitions-978"><a href="#AnaDataset.partitions-978"><span class="linenos">978</span></a>                                <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">candidat</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>
</span><span id="AnaDataset.partitions-979"><a href="#AnaDataset.partitions-979"><span class="linenos">979</span></a>                    <span class="k">if</span> <span class="p">(</span><span class="n">reduce</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="p">[</span><span class="n">fld</span><span class="o">.</span><span class="n">lencodec</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">flds</span><span class="p">])</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">and</span>
</span><span id="AnaDataset.partitions-980"><a href="#AnaDataset.partitions-980"><span class="linenos">980</span></a>                        <span class="nb">len</span><span class="p">(</span><span class="n">candidat</span><span class="p">)</span> <span class="o">==</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">flds</span><span class="p">)))</span> <span class="ow">and</span>
</span><span id="AnaDataset.partitions-981"><a href="#AnaDataset.partitions-981"><span class="linenos">981</span></a>                            <span class="p">(</span><span class="ow">not</span> <span class="n">distributed</span> <span class="ow">or</span> <span class="nb">min</span><span class="p">(</span><span class="n">rel</span><span class="o">.</span><span class="n">distrib</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">candidat</span><span class="p">))):</span>
</span><span id="AnaDataset.partitions-982"><a href="#AnaDataset.partitions-982"><span class="linenos">982</span></a>                        <span class="n">partit</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">flds</span><span class="p">)</span>
</span><span id="AnaDataset.partitions-983"><a href="#AnaDataset.partitions-983"><span class="linenos">983</span></a>        <span class="n">partit</span> <span class="o">=</span> <span class="n">Util</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">partit</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</span><span id="AnaDataset.partitions-984"><a href="#AnaDataset.partitions-984"><span class="linenos">984</span></a>        <span class="k">return</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="k">for</span> <span class="n">tup</span> <span class="ow">in</span>
</span><span id="AnaDataset.partitions-985"><a href="#AnaDataset.partitions-985"><span class="linenos">985</span></a>                <span class="nb">sorted</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">({</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">prt</span><span class="p">))</span> <span class="k">for</span> <span class="n">prt</span> <span class="ow">in</span> <span class="n">partit</span><span class="p">})),</span>
</span><span id="AnaDataset.partitions-986"><a href="#AnaDataset.partitions-986"><span class="linenos">986</span></a>                       <span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>
</span></pre></div>


            <div class="docstring"><p>return a list of available partitions (the first is highest).</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>mode</strong> : str (default 'field') - AnaDfield representation
('field', 'id', 'index')</li>
<li><strong>distributed</strong> : boolean (default True) - Include only distributed fields</li>
</ul>
</div>


                            </div>
                            <div id="AnaDataset.field_partition" class="classattr">
                                        <input id="AnaDataset.field_partition-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">field_partition</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span>, </span><span class="param"><span class="n">partition</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">distributed</span><span class="o">=</span><span class="kc">True</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AnaDataset.field_partition-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDataset.field_partition"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDataset.field_partition-988"><a href="#AnaDataset.field_partition-988"><span class="linenos"> 988</span></a>    <span class="k">def</span> <span class="nf">field_partition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">partition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">distributed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="AnaDataset.field_partition-989"><a href="#AnaDataset.field_partition-989"><span class="linenos"> 989</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a partition dict with the list of primary, secondary, unique</span>
</span><span id="AnaDataset.field_partition-990"><a href="#AnaDataset.field_partition-990"><span class="linenos"> 990</span></a><span class="sd">        and variable fields.</span>
</span><span id="AnaDataset.field_partition-991"><a href="#AnaDataset.field_partition-991"><span class="linenos"> 991</span></a>
</span><span id="AnaDataset.field_partition-992"><a href="#AnaDataset.field_partition-992"><span class="linenos"> 992</span></a><span class="sd">         *Parameters*</span>
</span><span id="AnaDataset.field_partition-993"><a href="#AnaDataset.field_partition-993"><span class="linenos"> 993</span></a>
</span><span id="AnaDataset.field_partition-994"><a href="#AnaDataset.field_partition-994"><span class="linenos"> 994</span></a><span class="sd">        - **mode** : str (default &#39;field&#39;) - AnaDfield representation</span>
</span><span id="AnaDataset.field_partition-995"><a href="#AnaDataset.field_partition-995"><span class="linenos"> 995</span></a><span class="sd">        (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="AnaDataset.field_partition-996"><a href="#AnaDataset.field_partition-996"><span class="linenos"> 996</span></a><span class="sd">        - **partition** : list (default None) - if None, partition is the first</span>
</span><span id="AnaDataset.field_partition-997"><a href="#AnaDataset.field_partition-997"><span class="linenos"> 997</span></a><span class="sd">        - **distributed** : boolean (default True) - Include only distributed fields</span>
</span><span id="AnaDataset.field_partition-998"><a href="#AnaDataset.field_partition-998"><span class="linenos"> 998</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="AnaDataset.field_partition-999"><a href="#AnaDataset.field_partition-999"><span class="linenos"> 999</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">partition</span><span class="p">:</span>
</span><span id="AnaDataset.field_partition-1000"><a href="#AnaDataset.field_partition-1000"><span class="linenos">1000</span></a>            <span class="n">partitions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">partitions</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="n">distributed</span><span class="p">)</span>
</span><span id="AnaDataset.field_partition-1001"><a href="#AnaDataset.field_partition-1001"><span class="linenos">1001</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">partitions</span><span class="p">:</span>
</span><span id="AnaDataset.field_partition-1002"><a href="#AnaDataset.field_partition-1002"><span class="linenos">1002</span></a>                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;primary&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;secondary&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="p">[]}</span>
</span><span id="AnaDataset.field_partition-1003"><a href="#AnaDataset.field_partition-1003"><span class="linenos">1003</span></a>            <span class="n">partition</span> <span class="o">=</span> <span class="n">partitions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AnaDataset.field_partition-1004"><a href="#AnaDataset.field_partition-1004"><span class="linenos">1004</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AnaDataset.field_partition-1005"><a href="#AnaDataset.field_partition-1005"><span class="linenos">1005</span></a>            <span class="n">partition</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dfield</span><span class="p">(</span><span class="n">fld</span><span class="p">)</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">partition</span><span class="p">]</span>
</span><span id="AnaDataset.field_partition-1006"><a href="#AnaDataset.field_partition-1006"><span class="linenos">1006</span></a>        <span class="n">secondary</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AnaDataset.field_partition-1007"><a href="#AnaDataset.field_partition-1007"><span class="linenos">1007</span></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">partition</span><span class="p">:</span>
</span><span id="AnaDataset.field_partition-1008"><a href="#AnaDataset.field_partition-1008"><span class="linenos">1008</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_add_child</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">secondary</span><span class="p">)</span>
</span><span id="AnaDataset.field_partition-1009"><a href="#AnaDataset.field_partition-1009"><span class="linenos">1009</span></a>        <span class="n">secondary</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">secondary</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">partition</span><span class="p">]</span>
</span><span id="AnaDataset.field_partition-1010"><a href="#AnaDataset.field_partition-1010"><span class="linenos">1010</span></a>        <span class="n">unique</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="k">if</span> <span class="n">fld</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">UNIQUE</span><span class="p">]</span>
</span><span id="AnaDataset.field_partition-1011"><a href="#AnaDataset.field_partition-1011"><span class="linenos">1011</span></a>        <span class="n">variable</span> <span class="o">=</span> <span class="p">[</span><span class="n">fld</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span>
</span><span id="AnaDataset.field_partition-1012"><a href="#AnaDataset.field_partition-1012"><span class="linenos">1012</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">partition</span> <span class="o">+</span> <span class="n">secondary</span> <span class="o">+</span> <span class="n">unique</span><span class="p">]</span>
</span><span id="AnaDataset.field_partition-1013"><a href="#AnaDataset.field_partition-1013"><span class="linenos">1013</span></a>        <span class="k">return</span> <span class="n">Util</span><span class="o">.</span><span class="n">view</span><span class="p">({</span><span class="s1">&#39;primary&#39;</span><span class="p">:</span> <span class="n">partition</span><span class="p">,</span> <span class="s1">&#39;secondary&#39;</span><span class="p">:</span> <span class="n">secondary</span><span class="p">,</span>
</span><span id="AnaDataset.field_partition-1014"><a href="#AnaDataset.field_partition-1014"><span class="linenos">1014</span></a>                          <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">unique</span><span class="p">,</span> <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="n">variable</span><span class="p">},</span> <span class="n">mode</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>return a partition dict with the list of primary, secondary, unique
and variable fields.</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>mode</strong> : str (default 'field') - AnaDfield representation
('field', 'id', 'index')</li>
<li><strong>partition</strong> : list (default None) - if None, partition is the first</li>
<li><strong>distributed</strong> : boolean (default True) - Include only distributed fields</li>
</ul>
</div>


                            </div>
                            <div id="AnaDataset.indicator" class="classattr">
                                        <input id="AnaDataset.indicator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">indicator</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fullsize</span>, </span><span class="param"><span class="n">size</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AnaDataset.indicator-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaDataset.indicator"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaDataset.indicator-1016"><a href="#AnaDataset.indicator-1016"><span class="linenos">1016</span></a>    <span class="k">def</span> <span class="nf">indicator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fullsize</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
</span><span id="AnaDataset.indicator-1017"><a href="#AnaDataset.indicator-1017"><span class="linenos">1017</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;generate size indicators: ol (object lightness), ul (unicity level),</span>
</span><span id="AnaDataset.indicator-1018"><a href="#AnaDataset.indicator-1018"><span class="linenos">1018</span></a><span class="sd">        gain (sizegain)</span>
</span><span id="AnaDataset.indicator-1019"><a href="#AnaDataset.indicator-1019"><span class="linenos">1019</span></a>
</span><span id="AnaDataset.indicator-1020"><a href="#AnaDataset.indicator-1020"><span class="linenos">1020</span></a><span class="sd">        *Parameters*</span>
</span><span id="AnaDataset.indicator-1021"><a href="#AnaDataset.indicator-1021"><span class="linenos">1021</span></a>
</span><span id="AnaDataset.indicator-1022"><a href="#AnaDataset.indicator-1022"><span class="linenos">1022</span></a><span class="sd">        - **fullsize** : int - size with full codec</span>
</span><span id="AnaDataset.indicator-1023"><a href="#AnaDataset.indicator-1023"><span class="linenos">1023</span></a><span class="sd">        - **size** : int - size with existing codec</span>
</span><span id="AnaDataset.indicator-1024"><a href="#AnaDataset.indicator-1024"><span class="linenos">1024</span></a>
</span><span id="AnaDataset.indicator-1025"><a href="#AnaDataset.indicator-1025"><span class="linenos">1025</span></a><span class="sd">        *Returns* : dict&#39;&#39;&#39;</span>
</span><span id="AnaDataset.indicator-1026"><a href="#AnaDataset.indicator-1026"><span class="linenos">1026</span></a>        <span class="n">lenindex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
</span><span id="AnaDataset.indicator-1027"><a href="#AnaDataset.indicator-1027"><span class="linenos">1027</span></a>        <span class="n">indexlen</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">fld</span><span class="o">.</span><span class="n">lencodec</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
</span><span id="AnaDataset.indicator-1028"><a href="#AnaDataset.indicator-1028"><span class="linenos">1028</span></a>        <span class="n">nval</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">lenindex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="AnaDataset.indicator-1029"><a href="#AnaDataset.indicator-1029"><span class="linenos">1029</span></a>        <span class="n">sval</span> <span class="o">=</span> <span class="n">fullsize</span> <span class="o">/</span> <span class="n">nval</span>
</span><span id="AnaDataset.indicator-1030"><a href="#AnaDataset.indicator-1030"><span class="linenos">1030</span></a>        <span class="n">ncod</span> <span class="o">=</span> <span class="n">indexlen</span> <span class="o">+</span> <span class="n">lenindex</span>
</span><span id="AnaDataset.indicator-1031"><a href="#AnaDataset.indicator-1031"><span class="linenos">1031</span></a>
</span><span id="AnaDataset.indicator-1032"><a href="#AnaDataset.indicator-1032"><span class="linenos">1032</span></a>        <span class="k">if</span> <span class="n">nval</span> <span class="o">!=</span> <span class="n">ncod</span><span class="p">:</span>
</span><span id="AnaDataset.indicator-1033"><a href="#AnaDataset.indicator-1033"><span class="linenos">1033</span></a>            <span class="n">scod</span> <span class="o">=</span> <span class="p">(</span><span class="n">size</span> <span class="o">-</span> <span class="n">ncod</span> <span class="o">*</span> <span class="n">sval</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">nval</span> <span class="o">-</span> <span class="n">ncod</span><span class="p">)</span>
</span><span id="AnaDataset.indicator-1034"><a href="#AnaDataset.indicator-1034"><span class="linenos">1034</span></a>            <span class="n">olight</span> <span class="o">=</span> <span class="n">scod</span> <span class="o">/</span> <span class="n">sval</span>
</span><span id="AnaDataset.indicator-1035"><a href="#AnaDataset.indicator-1035"><span class="linenos">1035</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AnaDataset.indicator-1036"><a href="#AnaDataset.indicator-1036"><span class="linenos">1036</span></a>            <span class="n">olight</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AnaDataset.indicator-1037"><a href="#AnaDataset.indicator-1037"><span class="linenos">1037</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;total values&#39;</span><span class="p">:</span> <span class="n">nval</span><span class="p">,</span> <span class="s1">&#39;mean size&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">sval</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="AnaDataset.indicator-1038"><a href="#AnaDataset.indicator-1038"><span class="linenos">1038</span></a>                <span class="s1">&#39;unique values&#39;</span><span class="p">:</span> <span class="n">ncod</span><span class="p">,</span> <span class="s1">&#39;mean coding size&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">scod</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="AnaDataset.indicator-1039"><a href="#AnaDataset.indicator-1039"><span class="linenos">1039</span></a>                <span class="s1">&#39;unicity level&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">ncod</span> <span class="o">/</span> <span class="n">nval</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="AnaDataset.indicator-1040"><a href="#AnaDataset.indicator-1040"><span class="linenos">1040</span></a>                <span class="s1">&#39;optimize level&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="n">fullsize</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="AnaDataset.indicator-1041"><a href="#AnaDataset.indicator-1041"><span class="linenos">1041</span></a>                <span class="s1">&#39;object lightness&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">olight</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="AnaDataset.indicator-1042"><a href="#AnaDataset.indicator-1042"><span class="linenos">1042</span></a>                <span class="s1">&#39;maxgain&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">((</span><span class="n">nval</span> <span class="o">-</span> <span class="n">ncod</span><span class="p">)</span> <span class="o">/</span> <span class="n">nval</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="AnaDataset.indicator-1043"><a href="#AnaDataset.indicator-1043"><span class="linenos">1043</span></a>                <span class="s1">&#39;gain&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">((</span><span class="n">fullsize</span> <span class="o">-</span> <span class="n">size</span><span class="p">)</span> <span class="o">/</span> <span class="n">fullsize</span><span class="p">,</span> <span class="mi">3</span><span class="p">)}</span>
</span></pre></div>


            <div class="docstring"><p>generate size indicators: ol (object lightness), ul (unicity level),
gain (sizegain)</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>fullsize</strong> : int - size with full codec</li>
<li><strong>size</strong> : int - size with existing codec</li>
</ul>

<p><em>Returns</em> : dict</p>
</div>


                            </div>
                </section>
                <section id="Util">
                            <input id="Util-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Util</span>:

                <label class="view-source-button" for="Util-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Util"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Util-1055"><a href="#Util-1055"><span class="linenos">1055</span></a><span class="k">class</span> <span class="nc">Util</span><span class="p">:</span>
</span><span id="Util-1056"><a href="#Util-1056"><span class="linenos">1056</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39; common functions for analysis package&#39;&#39;&#39;</span>
</span><span id="Util-1057"><a href="#Util-1057"><span class="linenos">1057</span></a>
</span><span id="Util-1058"><a href="#Util-1058"><span class="linenos">1058</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Util-1059"><a href="#Util-1059"><span class="linenos">1059</span></a>    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">field_struc</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
</span><span id="Util-1060"><a href="#Util-1060"><span class="linenos">1060</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; return a representation of a AnaDfields structure (fields, id, index).</span>
</span><span id="Util-1061"><a href="#Util-1061"><span class="linenos">1061</span></a>
</span><span id="Util-1062"><a href="#Util-1062"><span class="linenos">1062</span></a><span class="sd">         *Parameters*</span>
</span><span id="Util-1063"><a href="#Util-1063"><span class="linenos">1063</span></a>
</span><span id="Util-1064"><a href="#Util-1064"><span class="linenos">1064</span></a><span class="sd">        - **mode** : str - AnaDfield representation (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="Util-1065"><a href="#Util-1065"><span class="linenos">1065</span></a><span class="sd">        - **field_struc** : list or dict - structure to represent</span>
</span><span id="Util-1066"><a href="#Util-1066"><span class="linenos">1066</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Util-1067"><a href="#Util-1067"><span class="linenos">1067</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;field&#39;</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">field_struc</span><span class="p">:</span>
</span><span id="Util-1068"><a href="#Util-1068"><span class="linenos">1068</span></a>            <span class="k">return</span> <span class="n">field_struc</span>
</span><span id="Util-1069"><a href="#Util-1069"><span class="linenos">1069</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_struc</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Util-1070"><a href="#Util-1070"><span class="linenos">1070</span></a>            <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="p">[</span><span class="n">fld</span><span class="o">.</span><span class="n">idfield</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span> <span class="k">else</span> <span class="n">fld</span><span class="o">.</span><span class="n">index</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">val</span><span class="p">]</span>
</span><span id="Util-1071"><a href="#Util-1071"><span class="linenos">1071</span></a>                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">field_struc</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</span><span id="Util-1072"><a href="#Util-1072"><span class="linenos">1072</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_struc</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_struc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="Util-1073"><a href="#Util-1073"><span class="linenos">1073</span></a>            <span class="k">return</span> <span class="p">[[</span><span class="n">fld</span><span class="o">.</span><span class="n">idfield</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span> <span class="k">else</span> <span class="n">fld</span><span class="o">.</span><span class="n">index</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">val</span><span class="p">]</span>
</span><span id="Util-1074"><a href="#Util-1074"><span class="linenos">1074</span></a>                    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">field_struc</span><span class="p">]</span>
</span><span id="Util-1075"><a href="#Util-1075"><span class="linenos">1075</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_struc</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="Util-1076"><a href="#Util-1076"><span class="linenos">1076</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">fld</span><span class="o">.</span><span class="n">idfield</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span> <span class="k">else</span> <span class="n">fld</span><span class="o">.</span><span class="n">index</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">field_struc</span><span class="p">]</span>
</span><span id="Util-1077"><a href="#Util-1077"><span class="linenos">1077</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_struc</span><span class="p">,</span> <span class="n">AnaField</span><span class="p">):</span>
</span><span id="Util-1078"><a href="#Util-1078"><span class="linenos">1078</span></a>            <span class="k">return</span> <span class="n">field_struc</span><span class="o">.</span><span class="n">idfield</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span> <span class="k">else</span> <span class="n">field_struc</span><span class="o">.</span><span class="n">index</span>
</span><span id="Util-1079"><a href="#Util-1079"><span class="linenos">1079</span></a>        <span class="k">return</span> <span class="n">field_struc</span>
</span><span id="Util-1080"><a href="#Util-1080"><span class="linenos">1080</span></a>
</span><span id="Util-1081"><a href="#Util-1081"><span class="linenos">1081</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Util-1082"><a href="#Util-1082"><span class="linenos">1082</span></a>    <span class="k">def</span> <span class="nf">reduce_dic</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
</span><span id="Util-1083"><a href="#Util-1083"><span class="linenos">1083</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict without empty or None values&#39;&#39;&#39;</span>
</span><span id="Util-1084"><a href="#Util-1084"><span class="linenos">1084</span></a>        <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">}</span>
</span><span id="Util-1085"><a href="#Util-1085"><span class="linenos">1085</span></a>
</span><span id="Util-1086"><a href="#Util-1086"><span class="linenos">1086</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Util-1087"><a href="#Util-1087"><span class="linenos">1087</span></a>    <span class="k">def</span> <span class="nf">clean_dic</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
</span><span id="Util-1088"><a href="#Util-1088"><span class="linenos">1088</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict or list with updated strings by replacing &quot;old&quot; substring</span>
</span><span id="Util-1089"><a href="#Util-1089"><span class="linenos">1089</span></a><span class="sd">        with &quot;new&quot; substring&#39;&#39;&#39;</span>
</span><span id="Util-1090"><a href="#Util-1090"><span class="linenos">1090</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Util-1091"><a href="#Util-1091"><span class="linenos">1091</span></a>            <span class="k">return</span> <span class="p">{</span><span class="n">Util</span><span class="o">.</span><span class="n">clean_dic</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span> <span class="n">Util</span><span class="o">.</span><span class="n">clean_dic</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
</span><span id="Util-1092"><a href="#Util-1092"><span class="linenos">1092</span></a>                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</span><span id="Util-1093"><a href="#Util-1093"><span class="linenos">1093</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="Util-1094"><a href="#Util-1094"><span class="linenos">1094</span></a>            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
</span><span id="Util-1095"><a href="#Util-1095"><span class="linenos">1095</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="Util-1096"><a href="#Util-1096"><span class="linenos">1096</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">Util</span><span class="o">.</span><span class="n">clean_dic</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">]</span>
</span><span id="Util-1097"><a href="#Util-1097"><span class="linenos">1097</span></a>        <span class="k">return</span> <span class="n">obj</span>
</span><span id="Util-1098"><a href="#Util-1098"><span class="linenos">1098</span></a>
</span><span id="Util-1099"><a href="#Util-1099"><span class="linenos">1099</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Util-1100"><a href="#Util-1100"><span class="linenos">1100</span></a>    <span class="k">def</span> <span class="nf">filter_dic</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
</span><span id="Util-1101"><a href="#Util-1101"><span class="linenos">1101</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return extract of a list of dict or of a dict</span>
</span><span id="Util-1102"><a href="#Util-1102"><span class="linenos">1102</span></a>
</span><span id="Util-1103"><a href="#Util-1103"><span class="linenos">1103</span></a><span class="sd">         *Parameters*</span>
</span><span id="Util-1104"><a href="#Util-1104"><span class="linenos">1104</span></a>
</span><span id="Util-1105"><a href="#Util-1105"><span class="linenos">1105</span></a><span class="sd">        - **keys** : string, list or tuple - list of keys or single key to return</span>
</span><span id="Util-1106"><a href="#Util-1106"><span class="linenos">1106</span></a><span class="sd">        if &#39;all&#39; or None, all keys are returned</span>
</span><span id="Util-1107"><a href="#Util-1107"><span class="linenos">1107</span></a><span class="sd">        if list, only keys in list are returned</span>
</span><span id="Util-1108"><a href="#Util-1108"><span class="linenos">1108</span></a><span class="sd">        if string, only values associated to the string(key) are returned&#39;&#39;&#39;</span>
</span><span id="Util-1109"><a href="#Util-1109"><span class="linenos">1109</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">keys</span> <span class="ow">or</span> <span class="n">keys</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
</span><span id="Util-1110"><a href="#Util-1110"><span class="linenos">1110</span></a>            <span class="k">return</span> <span class="n">obj</span>
</span><span id="Util-1111"><a href="#Util-1111"><span class="linenos">1111</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="Util-1112"><a href="#Util-1112"><span class="linenos">1112</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">Util</span><span class="o">.</span><span class="n">filter_dic</span><span class="p">(</span><span class="n">dic</span><span class="p">,</span> <span class="n">keys</span><span class="p">)</span> <span class="k">for</span> <span class="n">dic</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">]</span>
</span><span id="Util-1113"><a href="#Util-1113"><span class="linenos">1113</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Util-1114"><a href="#Util-1114"><span class="linenos">1114</span></a>            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Util-1115"><a href="#Util-1115"><span class="linenos">1115</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Util-1116"><a href="#Util-1116"><span class="linenos">1116</span></a>            <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">}</span>
</span><span id="Util-1117"><a href="#Util-1117"><span class="linenos">1117</span></a>        <span class="k">return</span> <span class="n">obj</span>
</span></pre></div>


            <div class="docstring"><p>common functions for analysis package</p>
</div>


                            <div id="Util.view" class="classattr">
                                        <input id="Util.view-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">view</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">field_struc</span>, </span><span class="param"><span class="n">mode</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Util.view-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Util.view"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Util.view-1058"><a href="#Util.view-1058"><span class="linenos">1058</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Util.view-1059"><a href="#Util.view-1059"><span class="linenos">1059</span></a>    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">field_struc</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
</span><span id="Util.view-1060"><a href="#Util.view-1060"><span class="linenos">1060</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; return a representation of a AnaDfields structure (fields, id, index).</span>
</span><span id="Util.view-1061"><a href="#Util.view-1061"><span class="linenos">1061</span></a>
</span><span id="Util.view-1062"><a href="#Util.view-1062"><span class="linenos">1062</span></a><span class="sd">         *Parameters*</span>
</span><span id="Util.view-1063"><a href="#Util.view-1063"><span class="linenos">1063</span></a>
</span><span id="Util.view-1064"><a href="#Util.view-1064"><span class="linenos">1064</span></a><span class="sd">        - **mode** : str - AnaDfield representation (&#39;field&#39;, &#39;id&#39;, &#39;index&#39;)</span>
</span><span id="Util.view-1065"><a href="#Util.view-1065"><span class="linenos">1065</span></a><span class="sd">        - **field_struc** : list or dict - structure to represent</span>
</span><span id="Util.view-1066"><a href="#Util.view-1066"><span class="linenos">1066</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Util.view-1067"><a href="#Util.view-1067"><span class="linenos">1067</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;field&#39;</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">field_struc</span><span class="p">:</span>
</span><span id="Util.view-1068"><a href="#Util.view-1068"><span class="linenos">1068</span></a>            <span class="k">return</span> <span class="n">field_struc</span>
</span><span id="Util.view-1069"><a href="#Util.view-1069"><span class="linenos">1069</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_struc</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Util.view-1070"><a href="#Util.view-1070"><span class="linenos">1070</span></a>            <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="p">[</span><span class="n">fld</span><span class="o">.</span><span class="n">idfield</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span> <span class="k">else</span> <span class="n">fld</span><span class="o">.</span><span class="n">index</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">val</span><span class="p">]</span>
</span><span id="Util.view-1071"><a href="#Util.view-1071"><span class="linenos">1071</span></a>                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">field_struc</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</span><span id="Util.view-1072"><a href="#Util.view-1072"><span class="linenos">1072</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_struc</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_struc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="Util.view-1073"><a href="#Util.view-1073"><span class="linenos">1073</span></a>            <span class="k">return</span> <span class="p">[[</span><span class="n">fld</span><span class="o">.</span><span class="n">idfield</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span> <span class="k">else</span> <span class="n">fld</span><span class="o">.</span><span class="n">index</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">val</span><span class="p">]</span>
</span><span id="Util.view-1074"><a href="#Util.view-1074"><span class="linenos">1074</span></a>                    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">field_struc</span><span class="p">]</span>
</span><span id="Util.view-1075"><a href="#Util.view-1075"><span class="linenos">1075</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_struc</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="Util.view-1076"><a href="#Util.view-1076"><span class="linenos">1076</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">fld</span><span class="o">.</span><span class="n">idfield</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span> <span class="k">else</span> <span class="n">fld</span><span class="o">.</span><span class="n">index</span> <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">field_struc</span><span class="p">]</span>
</span><span id="Util.view-1077"><a href="#Util.view-1077"><span class="linenos">1077</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_struc</span><span class="p">,</span> <span class="n">AnaField</span><span class="p">):</span>
</span><span id="Util.view-1078"><a href="#Util.view-1078"><span class="linenos">1078</span></a>            <span class="k">return</span> <span class="n">field_struc</span><span class="o">.</span><span class="n">idfield</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span> <span class="k">else</span> <span class="n">field_struc</span><span class="o">.</span><span class="n">index</span>
</span><span id="Util.view-1079"><a href="#Util.view-1079"><span class="linenos">1079</span></a>        <span class="k">return</span> <span class="n">field_struc</span>
</span></pre></div>


            <div class="docstring"><p>return a representation of a AnaDfields structure (fields, id, index).</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>mode</strong> : str - AnaDfield representation ('field', 'id', 'index')</li>
<li><strong>field_struc</strong> : list or dict - structure to represent</li>
</ul>
</div>


                            </div>
                            <div id="Util.reduce_dic" class="classattr">
                                        <input id="Util.reduce_dic-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">reduce_dic</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">obj</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Util.reduce_dic-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Util.reduce_dic"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Util.reduce_dic-1081"><a href="#Util.reduce_dic-1081"><span class="linenos">1081</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Util.reduce_dic-1082"><a href="#Util.reduce_dic-1082"><span class="linenos">1082</span></a>    <span class="k">def</span> <span class="nf">reduce_dic</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
</span><span id="Util.reduce_dic-1083"><a href="#Util.reduce_dic-1083"><span class="linenos">1083</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict without empty or None values&#39;&#39;&#39;</span>
</span><span id="Util.reduce_dic-1084"><a href="#Util.reduce_dic-1084"><span class="linenos">1084</span></a>        <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>return a dict without empty or None values</p>
</div>


                            </div>
                            <div id="Util.clean_dic" class="classattr">
                                        <input id="Util.clean_dic-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">clean_dic</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">obj</span>, </span><span class="param"><span class="n">old</span>, </span><span class="param"><span class="n">new</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Util.clean_dic-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Util.clean_dic"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Util.clean_dic-1086"><a href="#Util.clean_dic-1086"><span class="linenos">1086</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Util.clean_dic-1087"><a href="#Util.clean_dic-1087"><span class="linenos">1087</span></a>    <span class="k">def</span> <span class="nf">clean_dic</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
</span><span id="Util.clean_dic-1088"><a href="#Util.clean_dic-1088"><span class="linenos">1088</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return a dict or list with updated strings by replacing &quot;old&quot; substring</span>
</span><span id="Util.clean_dic-1089"><a href="#Util.clean_dic-1089"><span class="linenos">1089</span></a><span class="sd">        with &quot;new&quot; substring&#39;&#39;&#39;</span>
</span><span id="Util.clean_dic-1090"><a href="#Util.clean_dic-1090"><span class="linenos">1090</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Util.clean_dic-1091"><a href="#Util.clean_dic-1091"><span class="linenos">1091</span></a>            <span class="k">return</span> <span class="p">{</span><span class="n">Util</span><span class="o">.</span><span class="n">clean_dic</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span> <span class="n">Util</span><span class="o">.</span><span class="n">clean_dic</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
</span><span id="Util.clean_dic-1092"><a href="#Util.clean_dic-1092"><span class="linenos">1092</span></a>                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</span><span id="Util.clean_dic-1093"><a href="#Util.clean_dic-1093"><span class="linenos">1093</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="Util.clean_dic-1094"><a href="#Util.clean_dic-1094"><span class="linenos">1094</span></a>            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
</span><span id="Util.clean_dic-1095"><a href="#Util.clean_dic-1095"><span class="linenos">1095</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="Util.clean_dic-1096"><a href="#Util.clean_dic-1096"><span class="linenos">1096</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">Util</span><span class="o">.</span><span class="n">clean_dic</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">]</span>
</span><span id="Util.clean_dic-1097"><a href="#Util.clean_dic-1097"><span class="linenos">1097</span></a>        <span class="k">return</span> <span class="n">obj</span>
</span></pre></div>


            <div class="docstring"><p>return a dict or list with updated strings by replacing "old" substring
with "new" substring</p>
</div>


                            </div>
                            <div id="Util.filter_dic" class="classattr">
                                        <input id="Util.filter_dic-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">filter_dic</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">obj</span>, </span><span class="param"><span class="n">keys</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Util.filter_dic-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Util.filter_dic"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Util.filter_dic-1099"><a href="#Util.filter_dic-1099"><span class="linenos">1099</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Util.filter_dic-1100"><a href="#Util.filter_dic-1100"><span class="linenos">1100</span></a>    <span class="k">def</span> <span class="nf">filter_dic</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
</span><span id="Util.filter_dic-1101"><a href="#Util.filter_dic-1101"><span class="linenos">1101</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;return extract of a list of dict or of a dict</span>
</span><span id="Util.filter_dic-1102"><a href="#Util.filter_dic-1102"><span class="linenos">1102</span></a>
</span><span id="Util.filter_dic-1103"><a href="#Util.filter_dic-1103"><span class="linenos">1103</span></a><span class="sd">         *Parameters*</span>
</span><span id="Util.filter_dic-1104"><a href="#Util.filter_dic-1104"><span class="linenos">1104</span></a>
</span><span id="Util.filter_dic-1105"><a href="#Util.filter_dic-1105"><span class="linenos">1105</span></a><span class="sd">        - **keys** : string, list or tuple - list of keys or single key to return</span>
</span><span id="Util.filter_dic-1106"><a href="#Util.filter_dic-1106"><span class="linenos">1106</span></a><span class="sd">        if &#39;all&#39; or None, all keys are returned</span>
</span><span id="Util.filter_dic-1107"><a href="#Util.filter_dic-1107"><span class="linenos">1107</span></a><span class="sd">        if list, only keys in list are returned</span>
</span><span id="Util.filter_dic-1108"><a href="#Util.filter_dic-1108"><span class="linenos">1108</span></a><span class="sd">        if string, only values associated to the string(key) are returned&#39;&#39;&#39;</span>
</span><span id="Util.filter_dic-1109"><a href="#Util.filter_dic-1109"><span class="linenos">1109</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">keys</span> <span class="ow">or</span> <span class="n">keys</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
</span><span id="Util.filter_dic-1110"><a href="#Util.filter_dic-1110"><span class="linenos">1110</span></a>            <span class="k">return</span> <span class="n">obj</span>
</span><span id="Util.filter_dic-1111"><a href="#Util.filter_dic-1111"><span class="linenos">1111</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="Util.filter_dic-1112"><a href="#Util.filter_dic-1112"><span class="linenos">1112</span></a>            <span class="k">return</span> <span class="p">[</span><span class="n">Util</span><span class="o">.</span><span class="n">filter_dic</span><span class="p">(</span><span class="n">dic</span><span class="p">,</span> <span class="n">keys</span><span class="p">)</span> <span class="k">for</span> <span class="n">dic</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">]</span>
</span><span id="Util.filter_dic-1113"><a href="#Util.filter_dic-1113"><span class="linenos">1113</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Util.filter_dic-1114"><a href="#Util.filter_dic-1114"><span class="linenos">1114</span></a>            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Util.filter_dic-1115"><a href="#Util.filter_dic-1115"><span class="linenos">1115</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Util.filter_dic-1116"><a href="#Util.filter_dic-1116"><span class="linenos">1116</span></a>            <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">}</span>
</span><span id="Util.filter_dic-1117"><a href="#Util.filter_dic-1117"><span class="linenos">1117</span></a>        <span class="k">return</span> <span class="n">obj</span>
</span></pre></div>


            <div class="docstring"><p>return extract of a list of dict or of a dict</p>

<p><em>Parameters</em></p>

<ul>
<li><strong>keys</strong> : string, list or tuple - list of keys or single key to return
if 'all' or None, all keys are returned
if list, only keys in list are returned
if string, only values associated to the string(key) are returned</li>
</ul>
</div>


                            </div>
                </section>
                <section id="AnaError">
                            <input id="AnaError-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AnaError</span><wbr>(<span class="base">builtins.Exception</span>):

                <label class="view-source-button" for="AnaError-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnaError"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnaError-1120"><a href="#AnaError-1120"><span class="linenos">1120</span></a><span class="k">class</span> <span class="nc">AnaError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="AnaError-1121"><a href="#AnaError-1121"><span class="linenos">1121</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39; Analysis Exception&#39;&#39;&#39;</span>
</span><span id="AnaError-1122"><a href="#AnaError-1122"><span class="linenos">1122</span></a>    <span class="c1"># pass</span>
</span></pre></div>


            <div class="docstring"><p>Analysis Exception</p>
</div>


                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.Exception</dt>
                                <dd id="AnaError.__init__" class="function">Exception</dd>

            </div>
            <div><dt>builtins.BaseException</dt>
                                <dd id="AnaError.with_traceback" class="function">with_traceback</dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>